<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>SIP</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="RiderMsgEptRef.html" title="Messaging Endpoints"><link rel="prev" href="mail.html" title="Mail"><link rel="next" href="smpp.html" title="SMPP"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry"><a name="sip"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>SIP &#8212; supports the SIP Publish and Subscribe capability as described in the 
      [<span class="citation">RFC3903 - Session Initiation Protocol (SIP) Extension for Event</span>]</p></div><div class="refsection"><a name="d0e46623"></a><h2>Overview</h2><p>The SIP component in Apache Camel is a communication component, based on the Jain SIP implementation (available under the JCP license).</p><p>Session Initiation Protocol (SIP) is an IETF-defined signaling protocol, widely used for controlling multimedia communication sessions such as voice and video calls over Internet Protocol (IP).The SIP protocol is an Application Layer protocol designed to be independent of the underlying transport layer; it can run on Transmission Control Protocol (TCP), User Datagram Protocol (UDP) or Stream Control Transmission Protocol (SCTP). </p><p>The Jain SIP implementation supports TCP and UDP only.</p><p>The Apache Camel SIP component <span class="bold"><strong>only</strong></span> supports the SIP
            Publish and Subscribe capability as described in the <a class="link" href="http://www.ietf.org/rfc/rfc3903.txt" target="_top">RFC3903 - Session Initiation Protocol
                (SIP) Extension for Event</a>
        </p><p>This component supports both producer and consumer endpoints.</p><p>Apache Camel SIP Producers (Event Publishers) and SIP Consumers (Event Subscribers)
            communicate event &amp; state information to each other using an intermediary entity
            called a SIP Presence Agent (a stateful brokering entity).</p></div><div class="refsection"><a name="d0e46644"></a><h2>URI format</h2><p>The URI scheme for a SIP endpoint is as follows:</p><pre class="programlisting">sip://<em class="replaceable"><code>username</code></em>@<em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>[?<em class="replaceable"><code>options</code></em>]
sips://<em class="replaceable"><code>username</code></em>@<em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>[?<em class="replaceable"><code>options</code></em>]</pre></div><div class="refsection"><a name="d0e46675"></a><h2>Dependencies</h2><p>For SIP based communication, a SIP Stack with a listener 
      <span class="bold"><strong>must</strong></span> be instantiated on both the SIP Producer and Consumer (using separate ports if using localhost). This is necessary in order to support the handshakes &amp; acknowledgements exchanged between the SIP Stacks during communication.</p><p>Maven users will need to add the dependency shown in <a class="xref" href="sip.html#sipPOM" title="Example&nbsp;12.&nbsp;SIP dependency">Example&nbsp;12, &#8220;SIP dependency&#8221;</a> to their 
    <code class="filename">pom.xml</code> to use this component.</p><div class="example"><a name="sipPOM"></a><p class="title"><b>Example&nbsp;12.&nbsp;SIP dependency</b></p><div class="example-contents"><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-sip<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre></div></div><br class="example-break"></div><div class="refsection"><a name="d0e46695"></a><h2>Options</h2><p><a class="xref" href="sip.html#SIPOptsTbl" title="Table&nbsp;40.&nbsp;SIP Options">Table&nbsp;40, &#8220;SIP Options&#8221;</a> lists the options for a SIP endpoint.</p><div class="table"><a name="SIPOptsTbl"></a><p class="title"><b>Table&nbsp;40.&nbsp;SIP Options</b></p><div class="table-contents"><table summary="SIP Options" width="100%" border="1"><colgroup><col width="27%" class="c1"><col width="15%" class="c2"><col width="58%" class="c3"></colgroup><thead><tr><th>Name </th><th> Default </th><th> Description </th></tr></thead><tbody><tr><td><code class="literal">stackName</code>
        </td><td><code class="literal">NAME_NOT_SET</code>
        </td><td> Name of the SIP Stack instance associated with an SIP Endpoint. </td></tr><tr><td><code class="literal">transport</code>
        </td><td><code class="literal">tcp</code>
        </td><td> Setting for choice of transport potocol. Valid choices are "tcp" or "udp". </td></tr><tr><td><code class="literal">fromUser</code>
        </td><td>&nbsp;</td><td> Username of the message originator. <span class="bold"><strong>Mandatory setting unless a registry based custom FromHeader is specified.</strong></span>
        </td></tr><tr><td><code class="literal">fromHost</code>
        </td><td>&nbsp;</td><td> Hostname of the message originator. <span class="bold"><strong>Mandatory setting unless a registry based FromHeader is specified</strong></span>
        </td></tr><tr><td><code class="literal">fromPort</code>
        </td><td>&nbsp;</td><td> Port of the message originator. <span class="bold"><strong>Mandatory setting unless a registry based FromHeader is specified</strong></span>
        </td></tr><tr><td><code class="literal">toUser</code>
        </td><td>&nbsp;</td><td> Username of the message receiver. <span class="bold"><strong>Mandatory setting unless a registry based custom ToHeader is specified.</strong></span>
        </td></tr><tr><td><code class="literal">toHost</code>
        </td><td>&nbsp;</td><td> Hostname of the message receiver. <span class="bold"><strong>Mandatory setting unless a registry based ToHeader is specified</strong></span>
        </td></tr><tr><td><code class="literal">toPort</code>
        </td><td>&nbsp;</td><td> Portname of the message receiver. <span class="bold"><strong>Mandatory setting unless a registry based ToHeader is specified</strong></span>
        </td></tr><tr><td><code class="literal">maxforwards</code>
        </td><td> 0 </td><td> the number of intermediaries that may forward the message to the message receiver. <span class="bold"><strong>Optional setting. May alternatively be set using as registry based MaxForwardsHeader</strong></span>
        </td></tr><tr><td><code class="literal">eventId</code>
        </td><td>&nbsp;</td><td> Setting for a String based event Id. <span class="bold"><strong>Mandatory setting unless a registry based FromHeader is specified</strong></span>
        </td></tr><tr><td><code class="literal">eventHeaderName</code>
        </td><td>&nbsp;</td><td> Setting for a String based event Id. <span class="bold"><strong>Mandatory setting unless a registry based FromHeader is specified</strong></span>
        </td></tr><tr><td><code class="literal">maxMessageSize</code>
        </td><td><code class="literal">1048576</code>
        </td><td> Setting for maximum allowed Message size in bytes. </td></tr><tr><td><code class="literal">cacheConnections</code>
        </td><td><code class="literal">false</code>
        </td><td> Should connections be cached by the SipStack to reduce cost of connection creation. This is useful if the connection is used for long running conversations. </td></tr><tr><td><code class="literal">consumer</code>
        </td><td><code class="literal">false</code>
        </td><td> This setting is used to determine whether the kind of header (FromHeader,ToHeader etc) that needs to be created for this endpoint</td></tr><tr><td><code class="literal">automaticDialogSupport</code>
        </td><td><code class="literal">off</code>
        </td><td> Setting to specify whether every communication should be associated with a dialog. </td></tr><tr><td><code class="literal">contentType</code>
        </td><td><code class="literal">text</code>
        </td><td> Setting for contentType can be set to any valid MimeType. </td></tr><tr><td><code class="literal">contentSubType</code>
        </td><td><code class="literal">xml</code>
        </td><td> Setting for contentSubType can be set to any valid MimeSubType. </td></tr><tr><td><code class="literal">receiveTimeoutMillis</code>
        </td><td><code class="literal">10000</code>
        </td><td> Setting for specifying amount of time to wait for a Response and/or Acknowledgement can be received from another SIP stack </td></tr><tr><td><code class="literal">useRouterForAllUris</code>
        </td><td><code class="literal">false</code>
        </td><td> This setting is used when requests are sent to the Presence Agent via a proxy. </td></tr><tr><td><code class="literal">msgExpiration</code>
        </td><td><code class="literal">3600</code>
        </td><td> The amount of time a message received at an endpoint is considered valid </td></tr><tr><td><code class="literal">presenceAgent</code>
        </td><td><code class="literal">false</code>
        </td><td> This setting is used to distingish between a Presence Agent &amp; a consumer. This is due to the fact that the SIP Camel component ships with a basic Presence Agent (for testing purposes only). Consumers have to set this flag to true. </td></tr></tbody></table></div></div><br class="table-break"></div><div class="refsection"><a name="d0e46949"></a><h2>Registry based options</h2><p>SIP requires a number of headers to be sent/received as part of a request. These SIP header can be enlisted in the <a class="link" href="Registry" target="_top">Registry</a>, such as in the Spring XML file.</p><p><a class="xref" href="sip.html#SIPHeadValueTbl" title="Table&nbsp;41.&nbsp;SIP registry-based options">Table&nbsp;41, &#8220;SIP registry-based options&#8221;</a> describes the values.</p><div class="table"><a name="SIPHeadValueTbl"></a><p class="title"><b>Table&nbsp;41.&nbsp;SIP registry-based options</b></p><div class="table-contents"><table summary="SIP registry-based options" width="100%" border="1"><colgroup><col width="21%" class="c1"><col width="79%" class="c2"></colgroup><thead><tr><th>Name </th><th>Description </th></tr></thead><tbody><tr><td><code class="literal">fromHeader</code>
        </td><td> a custom Header object containing message originator settings. Must implement the type javax.sip.header.FromHeader </td></tr><tr><td><code class="literal">toHeader</code>
        </td><td> a custom Header object containing message receiver settings. Must implement the type javax.sip.header.ToHeader </td></tr><tr><td><code class="literal">viaHeaders</code>
        </td><td> List of custom Header objects of the type javax.sip.header.ViaHeader. Each ViaHeader containing a proxy address for request forwarding. (Note this header is automatically updated by each proxy when the request arrives at its listener) </td></tr><tr><td><code class="literal">contentTypeHeader</code>
        </td><td> a custom Header object containing message content details. Must implement the type javax.sip.header.ContentTypeHeader </td></tr><tr><td><code class="literal">callIdHeader</code>
        </td><td> a custom Header object containing call details. Must implement the type javax.sip.header.CallIdHeader </td></tr><tr><td><code class="literal">maxForwardsHeader</code>
        </td><td> a custom Header object containing details on maximum proxy forwards. This header places a limit on the viaHeaders possible. Must implement the type javax.sip.header.MaxForwardsHeader </td></tr><tr><td><code class="literal">eventHeader</code>
        </td><td> a custom Header object containing event details. Must implement the type javax.sip.header.EventHeader </td></tr><tr><td><code class="literal">contactHeader</code>
        </td><td> an optional custom Header object containing verbose contact details (email, phone number etc). Must implement the type javax.sip.header.ContactHeader </td></tr><tr><td><code class="literal">expiresHeader</code>
        </td><td> a custom Header object containing message expiration details. Must implement the type javax.sip.header.ExpiresHeader </td></tr><tr><td><code class="literal">extensionHeader</code>
        </td><td> a custom Header object containing user/application specific details. Must implement the type javax.sip.header.ExtensionHeader </td></tr></tbody></table></div></div><br class="table-break"></div></div></body></html>