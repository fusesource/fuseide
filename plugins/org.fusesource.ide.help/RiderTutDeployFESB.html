<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>To Deploy a Camel Project to Red Hat JBoss Fuse</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="description" content="This tutorial walks you through the process of deploying a camel project into Red Hat JBoss Fuse. It assumes that you have an instance of Red Hat JBoss Fuse installed on the same machine on which you are running the Red Hat JBoss Fuse Tooling."><meta name="keywords" content="Apache Camel, Open Source, open source, Fuse, Red Hat, EIP, Enterprise Integration Patterns"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="RiderTutorials.html" title="Tutorials"><link rel="prev" href="RiderTutorialJUnit.html" title="To Test a Route with JUnit"><link rel="next" href="RiderEIPRef.html" title="Enterprise Integration Pattern Reference"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="RiderTutDeployFESB"></a>To Deploy a Camel Project to Red Hat JBoss Fuse</h1></div><div><div class="abstract"><p>This tutorial walks you through the process of deploying a camel project into Red
                Hat JBoss Fuse. It assumes that you have an instance of Red Hat JBoss Fuse installed
                on the same machine on which you are running <span class="phrase">the Red
                    Hat JBoss Fuse Tooling</span>.</p></div></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e13824"></a>Goals</h2></div></div></div><p>In this tutorial you will:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>start up Red Hat JBoss Fuse 6.x Server</p></li><li class="listitem"><p>deploy your project into Red Hat JBoss Fuse 6.x Server</p></li><li class="listitem"><p>check whether your project was successfully built and deployed</p></li><li class="listitem"><p>uninstall your deployed bundle</p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e13842"></a>Prerequisites</h2></div></div></div><p>To complete this tutorial you will need</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>access to a Red Hat JBoss Fuse instance</p></li><li class="listitem"><p>the <span class="bold"><strong>simple-route</strong></span> project you updated in
                            <a class="xref" href="RiderTutorialCBR.html" title="To Add a Content-Based Router"><i>To Add a Content-Based Router</i></a></p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e13858"></a>Starting up Red Hat JBoss Fuse 6.x Server</h2></div></div></div><p>To start up the server:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In <span class="guilabel">Fuse Integration</span> perspective, click the
                        <span class="guilabel">Servers</span> tab in the lower, right pane to open the
                        <span class="guilabel">Servers</span> view.</p></li><li class="step"><p>Click the link <span class="guilabel">No servers are available. Click this link to create a
                        new server...</span> to open the <span class="guilabel">Define a New
                        Server</span> page.</p></li><li class="step"><p>Expand the <code class="filename">JBoss Fuse</code> node to expose the available server
                    options as shown in <a class="xref" href="RiderTutDeployFESB.html#TutDefNewServer" title="Figure&nbsp;18.&nbsp;Define a New Server page">Figure&nbsp;18</a>.</p><div class="figure"><a name="TutDefNewServer"></a><p class="title"><b>Figure&nbsp;18.&nbsp;Define a New Server page</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/tutDefineNewServer.png" align="middle" width="265.8" alt="New server selection"></div></div></div><br class="figure-break"></li><li class="step"><p>Click <code class="filename">JBoss Fuse 6.1 Server</code>.</p></li><li class="step"><p>Accept the defaults for <span class="guilabel">Server's host name</span>
                        (<em class="replaceable"><code>localhost</code></em>) and <span class="guilabel">Server name</span>
                        (<em class="replaceable"><code>JBoss Fuse 6.1 Server at localhost</code></em>), and then
                    click <span class="guibutton">Next</span> to open the <span class="guilabel">JBoss Fuse
                        Runtime</span> page. </p></li><li class="step"><p>In <span class="guilabel">Installation directory</span>, enter the path where the JBoss
                    Fuse 6.1 installation is located, or click the <span class="guibutton">Browse</span> to
                    search for it, and then click <span class="guibutton">Next</span> to open the
                        <span class="guilabel">New Server&gt; JBoss Fuse server configuration details</span>
                    page.</p><div class="figure"><a name="TutServerConfig"></a><p class="title"><b>Figure&nbsp;19.&nbsp;New server configuration</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/NewServerDetailsTut.png" align="middle" width="380.8" alt="New server configuration details"></div></div></div><br class="figure-break"></li><li class="step"><p>Accept the defaults for <span class="guilabel">Host Name</span>
                        (<em class="replaceable"><code>0.0.0.0</code></em>) and <span class="guilabel">Port Number</span>
                        (<em class="replaceable"><code>8101</code></em>).</p></li><li class="step"><p>In <span class="guilabel">User name</span>, enter the name used to log into the
                    server.</p><p>This is a user name stored in Red Hat JBoss Fuse's
                        <em class="replaceable"><code>installDir</code></em><code class="filename">/etc/users.properties</code>
                    file.</p><p>If one has not been set, you can either add one to that file using the format
                        <code class="literal">user=password,role</code> (for example,
                        <code class="literal">admin=admin,admin</code>), or you can set one using the karaf
                        <code class="literal">jaas</code> command set:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">jaas:realms</code>&#8212;to list the realms</p></li><li class="listitem"><p><code class="literal">jaas:manage --index 1</code>&#8212;to edit the first
                                (server) realm</p></li><li class="listitem"><p><code class="literal">jaas:useradd &lt;username&gt;
                                &lt;password&gt;</code>&#8212;to add a user and associated
                                password</p></li><li class="listitem"><p><code class="literal">jaas:roleadd &lt;username&gt; admin</code>&#8212;to
                                specify the new user's role</p></li><li class="listitem"><p><code class="literal">jaas:update</code>&#8212;to update the realm with the
                                new user information</p></li></ul></div><p>If a jaas realm has already been selected for the server, you can discover the
                    user name by issuing the command
                    <code class="code">JBossFuse:karaf@root&gt;jaas:users</code>.</p></li><li class="step"><p>In <span class="guilabel">Password</span>, enter the password required for
                        <span class="guilabel">User name</span> to log into the server.</p><p>This is the password set either in Red Hat JBoss Fuse's
                        <em class="replaceable"><code>installDir</code></em><code class="filename">/etc/users.properties</code>
                    file or by the karaf <code class="literal">jaas</code> commands.</p></li><li class="step"><p>Click <span class="guibutton">Next</span>, and then click
                        <span class="guibutton">Finish</span>.</p><p><code class="code">jboss-fuse-6.1.0.redhat-xxx [stopped]</code> appears in
                        <span class="guilabel">Servers</span> view.</p></li><li class="step"><p>In <span class="guilabel">Servers</span> view, right-click
                        <code class="code">jboss-fuse-6.1.0.redhat-xxx</code> to open the context menu, and then
                    click <span class="guimenuitem">Start</span>.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>If the warning that the remote host identification has changed appears,
                        click <span class="guibutton">yes</span> to delete the old key and insert the new
                        key, only if the JBoss Fuse 6.1 server runtime is installed on the same
                        machine where <span class="phrase">the Red Hat JBoss Fuse Tooling
                            is</span> running! Otherwise click <span class="guibutton">no</span> and
                        contact your system administrator.</p></td></tr></table></div><p>Wait a few seconds for JBoss Fuse 6.1 Server to start up. When it does,
                    <code class="code">JBoss Fuse [xxx]</code> is added to the <span class="guilabel">Fuse JMX
                        Navigator</span> tree under the Local Processes node, but you need to expand the Local
                    Processes node to see it.</p><p>The JBoss Fuse console also starts up in <span class="guilabel">Shell</span> view, as
                    shown in <a class="xref" href="RiderTutDeployFESB.html#FESBstartedShell" title="Figure&nbsp;20.&nbsp;JBoss Fuse console">Figure&nbsp;20</a>:</p><div class="figure"><a name="FESBstartedShell"></a><p class="title"><b>Figure&nbsp;20.&nbsp;JBoss Fuse console</b></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/JBFuseConsoleStartup.png" align="middle" width="380.25000000000006" alt="JBoss Fuse console"></div></div></div><br class="figure-break"></li><li class="step"><p>In <span class="guilabel">Fuse JMX Navigator</span>, right-click <code class="code">JBoss Fuse
                        [xxx]</code> to open the context menu, and then click
                        <span class="guimenuitem">Connect</span>.</p></li><li class="step"><p>In <span class="guilabel">Fuse JMX Navigator</span>, expand the <code class="code">JBoss Fuse
                    [xxx]</code> node to see its tree structure.</p><p>Now you're ready to deploy your project.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14129"></a>Deploying a project to Red Hat JBoss Fuse</h2></div></div></div><p>To deploy a camel project to JBoss Fuse:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>From <span class="guilabel">Project Explorer</span>, drag the <code class="code">simple-route</code>
                    root project over to <span class="guilabel">Fuse JMX Navigator</span> and drop it on
                        <code class="code">JBoss Fuse [xxx]</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The <span class="guimenuitem">Deploy to...</span> tool provides an alternative
                        to the drag and drop method of deployment. For details, see
                            <em class="citetitle">Deploying Projects to a Container</em> in the
                            <em class="citetitle">Red Hat JBoss Fuse Tooling: JBoss Fuse
                            Tooling User Guide</em>.</p></td></tr></table></div><p><span class="guilabel">Console</span> view chronicles the process as the tooling builds
                    the <code class="code">simple-route</code> project, runs the tests, and then installs the
                    project as a bundle inside <code class="code">JBoss Fuse [xxx]</code>. </p></li><li class="step"><p>In <span class="guilabel">Fuse JMX Navigator</span>, right-click <code class="code">JBoss Fuse
                        [xxx]</code> to open the context menu, and then click
                        <span class="guimenuitem">Refresh</span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You may have to repeat the <span class="guimenuitem">Refresh</span> operation
                        before your project appears in <span class="guilabel">Fuse JMX Navigator</span> under <span class="guimenu">JBoss Fuse [xxx}</span> &gt; <span class="guisubmenu">Camel</span> as
                            <code class="code"><em class="replaceable"><code>&lt;bundleIdentifier&gt;</code></em>-camel-#</code>.
                        (Camel generates and appends an ID number to the end of the node name to
                        ensure that every camel context is uniquely identified.)</p><p>In the mean time, you can verify whether your project's bundle was
                        installed by clicking the <span class="guimenuitem">Bundles</span> node under
                            <code class="code">JBoss Fuse [xxx]</code> to display, in
                            <span class="guimenuitem">Properties</span> view, all installed bundles. Start
                        typing <span class="emphasis"><em>tutorial</em></span> in
                            <span class="guimenuitem">Properties</span> view's Search tool to quickly
                        determine whether your project's <code class="code">tutorial.simple-route</code> bundle
                        is included in the list.</p></td></tr></table></div><p>Once your project appears in Fuse JMX Navigator, you can start tracing on it,
                    as described in <a class="xref" href="RiderTutorialTrace.html" title="To Trace a Message Through a Route"><i>To Trace a Message Through a Route</i></a>.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14228"></a>Uninstalling your project's bundle</h2></div></div></div><p>To uninstall your project from JBoss Fuse 6.1 server:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Switch to the JBoss Fuse console in <span class="guilabel">Shell</span> view.</p></li><li class="step"><p>At the JBoss Fuse console command line, type <code class="code">uninstall</code>
                    <em class="replaceable"><code>&lt;bundleIdentifier&gt;</code></em></p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e14248"></a>Further reading</h2></div></div></div><p>To learn more about deploying applications to external containers, see:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <em class="citetitle">Deploying Projects to a Container</em> in the <em class="citetitle">Red Hat JBoss Fuse Tooling: JBoss Fuse Tooling User
                        Guide</em>
                </p></li></ul></div></div></div></body></html>