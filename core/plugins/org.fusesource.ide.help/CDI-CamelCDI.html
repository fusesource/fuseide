<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Camel CDI</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="Cache-CacheComponent.html" title="Cache Component"><link rel="next" href="Chunk-Chunk.html" title="Chunk"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="CDI-CamelCDI"></a>Camel CDI</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Auto-configuredCamelcontext">Auto-configured Camel context</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Auto-detectingCamelroutes">Auto-detecting Camel routes</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Auto-configuredCamelprimitives">Auto-configured Camel primitives</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Camelcontextconfiguration">Camel context configuration</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-MultipleCamelcontexts">Multiple Camel contexts</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Configurationproperties">Configuration properties</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Auto-configuredtypeconverters">Auto-configured type converters</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Camelbeanintegration">Camel bean integration</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-CameleventstoCDIevents">Camel events to CDI events</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-CDIeventsendpoint">CDI events endpoint</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-CamelXMLconfigurationimport">Camel XML configuration import</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Auto-configuredOSGiintegration">Auto-configured OSGi integration</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-ProgrammaticLazyInjectionProgrammaticLookup">Lazy Injection / Programmatic Lookup</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-MavenArchetype">Maven Archetype</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Supportedcontainers">Supported containers</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Examples">Examples</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-SeeAlso">See Also</a></span></dt></dl></div><p>The Camel CDI component provides auto-configuration for Apache Camel
using CDI as dependency injection framework based
on&nbsp;<span class="emphasis"><em>convention-over-configuration</em></span>. It auto-detects Camel routes
available in the application and provides beans for common Camel
primitives like <code class="literal">Endpoint</code>,&nbsp;<code class="literal">FluentProducerTemplate</code>, <code class="literal">ProducerTemplate</code> or&nbsp;<code class="literal">TypeConverter</code>. It
implements standard <a class="link" href="bean-integration.html" target="_top">Camel bean integration</a>
so that Camel annotations like&nbsp;<code class="literal">@Consume</code>,&nbsp;<code class="literal">@Produce</code>
and&nbsp;<code class="literal">@PropertyInject</code> can be used seamlessly in CDI beans. Besides, it
bridges Camel events (e.g. <code class="literal">RouteAddedEvent</code>,
<code class="literal">CamelContextStartedEvent</code>,&nbsp;<code class="literal">ExchangeCompletedEvent</code>, &#8230;&#8203;) as CDI events
and provides a CDI events endpoint that can be used to consume / produce
CDI events from / to Camel routes.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>While the Camel CDI component is available as of <span class="strong"><strong>Camel 2.10</strong></span>, it&#8217;s
been rewritten in <span class="strong"><strong>Camel 2.17</strong></span> to better fit into the CDI programming
model. Hence some of the features like the Camel events to CDI events
bridge and the CDI events endpoint only apply starting Camel 2.17.</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>More details on how to test Camel CDI applications are available in
<a class="link" href="cdi-testing.html" target="_top">Camel CDI testing</a>.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Auto-configuredCamelcontext"></a>Auto-configured Camel context</h2></div></div></div><p>Camel CDI automatically deploys and configures a&nbsp;<code class="literal">CamelContext</code> bean.
That <code class="literal">CamelContext</code> bean is automatically instantiated, configured and
started (resp. stopped) when the CDI container initializes (resp. shuts
down). It can be injected in the application, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
CamelContext context;</pre><p>That default <code class="literal">CamelContext</code> bean is qualified with the
built-in&nbsp;<code class="literal">@Default</code> qualifier, is scoped&nbsp;<code class="literal">@ApplicationScoped</code> and is of
type <code class="literal">DefaultCamelContext</code>.</p><p>Note that this bean can be customized programmatically and other Camel
context beans can be deployed in the application as well.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Auto-detectingCamelroutes"></a>Auto-detecting Camel routes</h2></div></div></div><p>Camel CDI automatically&nbsp;collects all the&nbsp;<code class="literal">RoutesBuilder</code> beans in the
application, instantiates and add them to the <code class="literal">CamelContext</code> bean
instance when the CDI container initializes. For example, adding a Camel
route is as simple as declaring a class, e.g.:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> MyRouteBean <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> RouteBuilder {
&nbsp;
    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() {
        from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"jms:invoices"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:/invoices"</em></strong>);
    }
}</pre><p>Note that you can declare as many&nbsp;<code class="literal">RoutesBuilder</code> beans as you want.
Besides,&nbsp;<code class="literal">RouteContainer</code> beans are also automatically collected,
instantiated and added to the&nbsp;<code class="literal">CamelContext</code> bean instance managed by
Camel CDI when the container initializes.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Auto-configuredCamelprimitives"></a>Auto-configured Camel primitives</h2></div></div></div><p>Camel CDI provides beans for common Camel primitives that can be
injected in any CDI beans, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:inbound")</span></em>
ProducerTemplate producerTemplate;

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:inbound")</span></em>
FluentProducerTemplate fluentProducerTemplate;

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
MockEndpoint outbound; <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// URI defaults to the member name, i.e. mock:outbound</em>

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:inbound")</span></em>
Endpoint endpoint;

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
TypeConverter converter;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Camelcontextconfiguration"></a>Camel context configuration</h2></div></div></div><p>If you just want to change the name of the default <code class="literal">CamelContext</code> bean,
you can used the <code class="literal">@ContextName</code> qualifier&nbsp;provided by Camel CDI, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("camel-context")</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> MyRouteBean <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> RouteBuilder {
&nbsp;
    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() {
        from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"jms:invoices"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"file:/invoices"</em></strong>);
    }
}</pre><p>Else, if more customization is needed, any&nbsp;<code class="literal">CamelContext</code>&nbsp;class can be
used to declare a custom Camel context bean. Then,
the&nbsp;<code class="literal">@PostConstruct</code>&nbsp;and&nbsp;<code class="literal">@PreDestroy</code>&nbsp;lifecycle callbacks can be done
to do the customization, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ApplicationScoped</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> CustomCamelContext <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> DefaultCamelContext {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@PostConstruct</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> customize() {
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Set the Camel context name</em>
        setName(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"custom"</em></strong>);
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Disable JMX</em>
        disableJMX();
    }

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@PreDestroy</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> cleanUp() {
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// ...</em>
    }
}</pre><p><a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#producer_method" target="_top">Producer</a>
and&nbsp;<a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#disposer_method" target="_top">disposer</a>
methods can also be used as well to customize the Camel context bean, e.g.:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> CamelContextFactory {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produces</span></em>
    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ApplicationScoped</span></em>
    CamelContext customize() {
        DefaultCamelContext context = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> DefaultCamelContext();
        context.setName(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"custom"</em></strong>);
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> context;
    }

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> cleanUp(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Disposes</span></em> CamelContext context) {
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// ...</em>
    }
}</pre><p>Similarly,&nbsp;<a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#producer_field" target="_top">producer
fields</a>&nbsp;can be used, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produces</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ApplicationScoped</span></em>
CamelContext context = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> CustomCamelContext();

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> CustomCamelContext <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> DefaultCamelContext {

    CustomCamelContext() {
        setName(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"custom"</em></strong>);
    }
}</pre><p>This pattern can be used for example to avoid having the Camel context
routes started automatically when the container initializes by calling
the&nbsp;<code class="literal">setAutoStartup</code>&nbsp;method, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ApplicationScoped</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> ManualStartupCamelContext <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> DefaultCamelContext {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@PostConstruct</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> manual() {
        setAutoStartup(false);
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-MultipleCamelcontexts"></a>Multiple Camel contexts</h2></div></div></div><p>Any number of <code class="literal">CamelContext</code> beans can actually be declared in the
application as documented above. In that case, the CDI qualifiers
declared on these <code class="literal">CamelContext</code> beans are used to bind the Camel routes
and other Camel primitives to the corresponding Camel contexts. From
example, if the following beans get declared:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ApplicationScoped</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("foo")</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> FooCamelContext <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> DefaultCamelContext {
}

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ApplicationScoped</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@BarContextQualifier</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> BarCamelContext <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> DefaultCamelContext {
}
&nbsp;
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("foo")</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> RouteAddedToFooCamelContext <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> RouteBuilder {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() {
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// ...</em>
    }
}
&nbsp;
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@BarContextQualifier</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> RouteAddedToBarCamelContext <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> RouteBuilder {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() {
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// ...</em>
    }
}
&nbsp;
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("baz")</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> RouteAddedToBazCamelContext <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> RouteBuilder {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() {
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// ...</em>
    }
}
&nbsp;
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@MyOtherQualifier</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> RouteNotAddedToAnyCamelContext <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> RouteBuilder {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> configure() {
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// ...</em>
    }
}</pre><p>The&nbsp;<code class="literal">RoutesBuilder</code> beans qualified with&nbsp;<code class="literal">@ContextName</code> are
automatically added to the corresponding <code class="literal">CamelContext</code> beans by Camel
CDI. If no such <code class="literal">CamelContext</code> bean exists, it gets automatically
created, as for the <code class="literal">RouteAddedToBazCamelContext</code> bean. Note this only
happens for the&nbsp;<code class="literal">@ContextName</code>&nbsp;qualifier provided by Camel CDI. Hence
the&nbsp;<code class="literal">RouteNotAddedToAnyCamelContext</code> bean qualified with the
user-defined&nbsp;<code class="literal">@MyOtherQualifier</code>&nbsp;qualifier does not get added to any
Camel contexts. That may be useful, for example, for Camel routes that
may be required to be added later during the application execution.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Since Camel version 2.17.0, Camel CDI is capable of managing any kind of
<code class="literal">CamelContext</code> beans (e.g. <code class="literal">DefaultCamelContext</code>). In previous versions,
it is only capable of managing beans of type <code class="literal">CdiCamelContext</code> so it is
required to extend it.</p></td></tr></table></div><p>The CDI qualifiers declared on the&nbsp;<code class="literal">CamelContext</code>&nbsp;beans are also used to
bind the corresponding Camel primitives, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("foo")</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:inbound")</span></em>
ProducerTemplate producerTemplate;

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("foo")</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:inbound")</span></em>
FluentProducerTemplate fluentProducerTemplate;

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@BarContextQualifier</span></em>
MockEndpoint outbound; <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// URI defaults to the member name, i.e. mock:outbound</em>

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("baz")</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:inbound")</span></em>
Endpoint endpoint;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Configurationproperties"></a>Configuration properties</h2></div></div></div><p>To configure the sourcing of the configuration properties used by Camel
to resolve properties placeholders, you can declare
a&nbsp;<code class="literal">PropertiesComponent</code>&nbsp;bean qualified with <code class="literal">@Named("properties")</code>,
e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produces</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ApplicationScoped</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Named("properties")</span></em>
PropertiesComponent propertiesComponent() {
    Properties properties = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> Properties();
    properties.put(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"property"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"value"</em></strong>);
    PropertiesComponent component = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> PropertiesComponent();
    component.setInitialProperties(properties);
    component.setLocation(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"classpath:placeholder.properties"</em></strong>);
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> component;
}</pre><p>If you want to
use&nbsp;<a class="link" href="http://deltaspike.apache.org/documentation/configuration.html" target="_top">DeltaSpike
configuration mechanism</a>&nbsp;you can declare the
following&nbsp;<code class="literal">PropertiesComponent</code> bean:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produces</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ApplicationScoped</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Named("properties")</span></em>
PropertiesComponent properties(PropertiesParser parser) {
    PropertiesComponent component = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> PropertiesComponent();
    component.setPropertiesParser(parser);
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> component;
}

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// PropertiesParser bean that uses DeltaSpike to resolve properties</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">static</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> DeltaSpikeParser <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">extends</strong> DefaultPropertiesParser {
    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> String parseProperty(String key, String value, Properties properties) {
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> ConfigResolver.getPropertyValue(key);
    }
}</pre><p>You can see the&nbsp;<code class="literal">camel-example-cdi-properties</code> example for a working
example of a Camel CDI application using DeltaSpike configuration
mechanism.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Auto-configuredtypeconverters"></a>Auto-configured type converters</h2></div></div></div><p>CDI beans annotated with the&nbsp;<code class="literal">@Converter</code>&nbsp;annotation are automatically
registered into the deployed Camel contexts, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Converter</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> MyTypeConverter {

    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Converter</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> Output convert(Input input) {
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//...</em>
    }
}</pre><p>Note that CDI injection is supported within the type converters.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Camelbeanintegration"></a>Camel bean integration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Camelannotations">Camel annotations</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-Beancomponent">Bean component</a></span></dt><dt><span class="section"><a href="CDI-CamelCDI.html#CDI-ReferringbeansfromEndpointURIs">Referring beans from Endpoint URIs</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="CDI-Camelannotations"></a>Camel annotations</h3></div></div></div><p>As part of the Camel&nbsp;<a class="link" href="http://camel.apache.org/bean-integration.html" target="_top">bean
integration</a>,&nbsp;Camel comes with a set
of&nbsp;<a class="link" href="http://camel.apache.org/bean-integration.html#BeanIntegration-Annotations" target="_top">annotations</a>&nbsp;that
are seamlessly supported by Camel CDI. So you can use any of these
annotations in your CDI beans, e.g.:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="20%" class="col_1"><col width="40%" class="col_2"><col width="40%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">&nbsp;</th><th align="left" valign="top">Camel annotation</th><th align="left" valign="top">CDI equivalent</th></tr></thead><tbody><tr><td align="left" valign="top"><p>Configuration property</p></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@PropertyInject("key")</span></em>
String value;</pre></td><td align="left" valign="top"><p>If using
<a class="link" href="http://deltaspike.apache.org/documentation/configuration.html" target="_top">DeltaSpike
configuration mechanism</a>:</p>
<pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ConfigProperty(name = "key")</span></em>
String value;</pre>
<p>See <a class="link" href="cdi.html" target="_top">configuration properties</a> for more details.</p></td></tr><tr><td align="left" valign="top"><p>Producer template injection (default Camel context)</p></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produce(uri = "mock:outbound")</span></em>
ProducerTemplate producer;

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produce(uri = "mock:outbound")</span></em>
FluentProducerTemplate producer;</pre></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:outbound")</span></em>
ProducerTemplate producer;

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produce(uri = "direct:outbound")</span></em>
FluentProducerTemplate producer;</pre></td></tr><tr><td align="left" valign="top"><p>Endpoint injection (default Camel context)</p></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "direct:inbound")</span></em>
Endpoint endpoint;</pre></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:inbound")</span></em>
Endpoint endpoint;</pre></td></tr><tr><td align="left" valign="top"><p>Endpoint injection (Camel context by name)</p></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@EndpointInject(uri = "direct:inbound",
                context = "foo")</span></em>
Endpoint contextEndpoint;</pre></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("foo")</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:inbound")</span></em>
Endpoint contextEndpoint;</pre></td></tr><tr><td align="left" valign="top"><p>Bean injection (by type)</p></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@BeanInject</span></em>
MyBean bean;</pre></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
MyBean bean;</pre></td></tr><tr><td align="left" valign="top"><p>Bean injection (by name)</p></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@BeanInject("foo")</span></em>
MyBean bean;</pre></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Named("foo")</span></em>
MyBean bean;</pre></td></tr><tr><td align="left" valign="top"><p>POJO consuming</p></td><td align="left" valign="top"><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Consume(uri = "seda:inbound")</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> consume(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Body</span></em> String body) {
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//...</em>
}</pre></td><td align="left" valign="top"><p>&nbsp;</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="CDI-Beancomponent"></a>Bean component</h3></div></div></div><p>You can refer to CDI beans, either by type or name, From the Camel DSL,
e.g. with the Java Camel DSL:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> MyBean {
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//...</em>
}
&nbsp;
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:inbound"</em></strong>).bean(MyBean.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>);</pre><p>Or to lookup a CDI bean by name from the Java DSL:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Named("foo")</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> MyNamedBean {
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//...</em>
}
&nbsp;
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:inbound"</em></strong>).bean(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"foo"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="CDI-ReferringbeansfromEndpointURIs"></a>Referring beans from Endpoint URIs</h3></div></div></div><p>When configuring endpoints using the URI syntax you can refer to beans
in the&nbsp;<a class="link" href="registry.html" target="_top">Registry</a>&nbsp;using the <code class="literal">#</code> notation.&nbsp;If the URI
parameter value starts with a&nbsp;<code class="literal">#</code>&nbsp;sign then Camel CDI will lookup&nbsp;for a
bean of the given type by name, e.g.:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"jms:queue:{{destination}}?transacted=true&amp;transactionManager=#jtaTransactionManager"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"..."</em></strong>);</pre><p>Having the following CDI bean qualified
with&nbsp;<code class="literal">@Named("jtaTransactionManager")</code>:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produces</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Named("jtaTransactionManager")</span></em>
PlatformTransactionManager createTransactionManager(TransactionManager transactionManager, UserTransaction userTransaction) {
    JtaTransactionManager jtaTransactionManager = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> JtaTransactionManager();
    jtaTransactionManager.setUserTransaction(userTransaction);
    jtaTransactionManager.setTransactionManager(transactionManager);
    jtaTransactionManager.afterPropertiesSet();
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">return</strong> jtaTransactionManager;
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-CameleventstoCDIevents"></a>Camel events to CDI events</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.17</strong></span></p><p>Camel provides a set
of&nbsp;<a class="link" href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/management/event/package-summary.html" target="_top">management
events</a>&nbsp;that can be subscribed to for listening to Camel context,
service, route and exchange events. Camel CDI seamlessly translates
these Camel events into CDI events that can be observed using
CDI&nbsp;<a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#observer_methods" target="_top">observer
methods</a>, e.g.:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> onContextStarting(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Observes</span></em> CamelContextStartingEvent event) {
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Called before the default Camel context is about to start</em>
}</pre><p>As of Camel 2.18, it is possible to observe events for a particular route (<code class="literal">RouteAddedEvent</code>,
<code class="literal">RouteStartedEvent</code>, <code class="literal">RouteStoppedEvent</code> and <code class="literal">RouteRemovedEvent</code>) should it have
an explicit defined, e.g.:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"..."</em></strong>).routeId(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"foo"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"..."</em></strong>);

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> onRouteStarted(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Observes</span></em> <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Named("foo")</span></em> RouteStartedEvent event) {
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Called after the route "foo" has started</em>
}</pre><p>When multiple Camel contexts exist in the CDI container, the Camel
context bean qualifiers, like&nbsp;<code class="literal">@ContextName</code>,&nbsp;can be used to refine the
observer method resolution to a particular Camel context as specified
in&nbsp;<a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#observer_resolution" target="_top">observer
resolution</a>, e.g.:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> onRouteStarted(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Observes</span></em> <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("foo")</span></em> RouteStartedEvent event) {
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Called after the route 'event.getRoute()' for the Camel context 'foo' has started</em>
}
&nbsp;
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> onContextStarted(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Observes</span></em> <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Manual</span></em> CamelContextStartedEvent event) {
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Called after the the Camel context qualified with '@Manual' has started</em>
}</pre><p>Similarly, the&nbsp;<code class="literal">@Default</code>&nbsp;qualifier can be used to observe Camel events
for the&nbsp;<span class="emphasis"><em>default</em></span>&nbsp;Camel context if multiples contexts exist, e.g.:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> onExchangeCompleted(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Observes</span></em> <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Default</span></em> ExchangeCompletedEvent event) {
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Called after the exchange 'event.getExchange()' processing has completed</em>
}</pre><p>In that example, if no qualifier is specified, the&nbsp;<code class="literal">@Any</code>&nbsp;qualifier is
implicitly assumed, so that corresponding events for all the Camel
contexts get received.</p><p>Note that the support for Camel events translation into CDI events is
only activated if observer methods listening for Camel events are
detected in the deployment, and that per Camel context.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-CDIeventsendpoint"></a>CDI events endpoint</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.17</strong></span></p><p>The CDI event endpoint bridges
the&nbsp;<a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#events" target="_top">CDI
events</a>&nbsp;with the Camel routes so that CDI events can be seamlessly
observed / consumed (resp. produced / fired) from Camel consumers (resp.
by Camel producers).</p><p>The&nbsp;<code class="literal">CdiEventEndpoint&lt;T&gt;</code>&nbsp;bean provided by Camel CDI can be used to
observe / consume CDI events whose&nbsp;<span class="emphasis"><em>event type</em></span>&nbsp;is&nbsp;<code class="literal">T</code>, for example:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
CdiEventEndpoint&lt;String&gt; cdiEventEndpoint;

from(cdiEventEndpoint).log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CDI event received: ${body}"</em></strong>);</pre><p>This is equivalent to writing:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Uri("direct:event")</span></em>
ProducerTemplate producer;

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> observeCdiEvents(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Observes</span></em> String event) {
    producer.sendBody(event);
}

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:event"</em></strong>).log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CDI event received: ${body}"</em></strong>);</pre><p>Conversely, the&nbsp;<code class="literal">CdiEventEndpoint&lt;T&gt;</code>&nbsp;bean can be used to produce / fire
CDI events whose&nbsp;<span class="emphasis"><em>event type</em></span>&nbsp;is&nbsp;<code class="literal">T</code>, for example:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
CdiEventEndpoint&lt;String&gt; cdiEventEndpoint;

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:event"</em></strong>).to(cdiEventEndpoint).log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CDI event sent: ${body}"</em></strong>);</pre><p>This is equivalent to writing:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
Event&lt;String&gt; event;

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:event"</em></strong>).process(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> Processor() {
    <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Override</span></em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">public</strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> process(Exchange exchange) {
        event.fire(exchange.getBody(String.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>));
    }
}).log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CDI event sent: ${body}"</em></strong>);</pre><p>Or using a Java 8 lambda expression:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
Event&lt;String&gt; event;

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:event"</em></strong>)
    .process(exchange -&gt; event.fire(exchange.getIn().getBody(String.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>)))
    .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CDI event sent: ${body}"</em></strong>);</pre><p>The type variable&nbsp;<code class="literal">T</code> (resp. the qualifiers) of a
particular&nbsp;<code class="literal">CdiEventEndpoint&lt;T&gt;</code>&nbsp;injection point are automatically
translated into the parameterized&nbsp;<span class="emphasis"><em>event type</em></span>&nbsp;(resp. into the&nbsp;<span class="emphasis"><em>event
qualifiers</em></span>)&nbsp;e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@FooQualifier</span></em>
CdiEventEndpoint&lt;List&lt;String&gt;&gt; cdiEventEndpoint;

from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:event"</em></strong>).to(cdiEventEndpoint);

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> observeCdiEvents(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Observes</span></em> <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@FooQualifier</span></em> List&lt;String&gt; event) {
    logger.info(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CDI event: {}"</em></strong>, event);
}</pre><p>When multiple Camel contexts exist in the CDI container, the Camel
context bean qualifiers, like&nbsp;<code class="literal">@ContextName</code>,&nbsp;can be used to qualify
the&nbsp;<code class="literal">CdiEventEndpoint&lt;T&gt;</code>&nbsp;injection points, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("foo")</span></em>
CdiEventEndpoint&lt;List&lt;String&gt;&gt; cdiEventEndpoint;
<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Only observes / consumes events having the @ContextName("foo") qualifier</em>
from(cdiEventEndpoint).log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Camel context (foo) &gt; CDI event received: ${body}"</em></strong>);
<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Produces / fires events with the @ContextName("foo") qualifier</em>
from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"..."</em></strong>).to(cdiEventEndpoint);

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">void</strong> observeCdiEvents(<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Observes</span></em> <em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("foo")</span></em> List&lt;String&gt; event) {
    logger.info(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Camel context (foo) &gt; CDI event: {}"</em></strong>, event);
}</pre><p>Note that the CDI event Camel endpoint dynamically adds
an&nbsp;<a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#observer_methods" target="_top">observer
method</a>&nbsp;for each unique combination of&nbsp;<span class="emphasis"><em>event type</em></span>&nbsp;and&nbsp;<span class="emphasis"><em>event
qualifiers</em></span>&nbsp;and solely relies on the container
typesafe&nbsp;<a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#observer_resolution" target="_top">observer
resolution</a>, which leads to an implementation as efficient as possible.</p><p>Besides, as the impedance between the&nbsp;<span class="emphasis"><em>typesafe</em></span>&nbsp;nature of CDI and
the&nbsp;<span class="emphasis"><em>dynamic</em></span>&nbsp;nature of
the&nbsp;<a class="link" href="http://camel.apache.org/component.html" target="_top">Camel component</a>&nbsp;model is
quite high, it is not possible to create an instance of the CDI event
Camel endpoint via&nbsp;<a class="link" href="http://camel.apache.org/uris.html" target="_top">URIs</a>. Indeed, the
URI format for the CDI event component is:</p><pre class="programlisting">cdi-event://PayloadType&lt;T1,...,Tn&gt;[?qualifiers=QualifierType1[,...[,QualifierTypeN]...]]</pre><p>With the authority&nbsp;<code class="literal">PayloadType</code>&nbsp;(resp. the&nbsp;<code class="literal">QualifierType</code>) being the
URI escaped fully qualified name of the payload (resp. qualifier) raw
type followed by the type parameters section delimited by angle brackets
for payload parameterized type. Which leads to&nbsp;<span class="emphasis"><em>unfriendly</em></span>&nbsp;URIs,
e.g.:</p><pre class="programlisting">cdi-event://org.apache.camel.cdi.example.EventPayload%3Cjava.lang.Integer%3E?qualifiers=org.apache.camel.cdi.example.FooQualifier%2Corg.apache.camel.cdi.example.BarQualifier</pre><p>But more fundamentally, that would prevent efficient binding between the
endpoint instances and the observer methods as the CDI container doesn&#8217;t
have any ways of discovering the Camel context model during the
deployment phase.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-CamelXMLconfigurationimport"></a>Camel XML configuration import</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.18</strong></span></p><p>While CDI favors a typesafe dependency injection mechanism, it may be
useful&nbsp;to reuse existing Camel XML configuration files into a Camel CDI
application.&nbsp;In other use cases, it might be handy to rely on the Camel
XML DSL to configure&nbsp;its Camel context(s).</p><p>You can use the&nbsp;<code class="literal">@ImportResource</code> annotation that&#8217;s provided by Camel
CDI on any CDI beans and Camel CDI will automatically load the Camel XML
configuration at the specified locations, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ImportResource("camel-context.xml")</span></em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong> MyBean {
}</pre><p>Camel CDI will load the resources at the specified locations from the
classpath (other protocols may be added in the future).</p><p>Every <code class="literal">CamelContext</code> elements and other Camel <span class="emphasis"><em>primitives</em></span> from the
imported resources are automatically deployed as CDI beans during the
container bootstrap so that they benefit from the auto-configuration
provided by Camel CDI and become available for injection at runtime. If
such an element has an explicit <code class="literal">id</code> attribute set, the corresponding
CDI bean is qualified with the <code class="literal">@Named</code> qualifier, e.g., given the
following Camel XML configuration:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"foo"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;endpoint</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"bar"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"seda:inbound"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">key</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"queue"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"#queue"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">key</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"concurrentConsumers"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"10"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/endpoint&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext/&gt;</strong></pre><p>The&nbsp;corresponding CDI beans are automatically deployed and can be
injected, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@ContextName("foo")</span></em>
CamelContext context;

<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Named("bar")</span></em>
Endpoint endpoint;</pre><p>Note that the&nbsp;<code class="literal">CamelContext</code>&nbsp;beans are automatically qualified with both
the&nbsp;<code class="literal">@Named</code>&nbsp;and&nbsp;<code class="literal">@ContextName</code>&nbsp;qualifiers. If the
imported&nbsp;<code class="literal">CamelContext</code>&nbsp;element doesn&#8217;t have an&nbsp;<code class="literal">id</code>&nbsp;attribute, the
corresponding bean is deployed with the built-in&nbsp;<code class="literal">@Default</code>&nbsp;qualifier.</p><p>Conversely, CDI beans deployed in the application can be referred to
from the Camel XML configuration, usually using the&nbsp;<code class="literal">ref</code>&nbsp;attribute,
e.g., given the following bean declared:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Produces</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Named("baz")</span></em>
Processor processor = exchange -&gt; exchange.getIn().setHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"qux"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"quux"</em></strong>);</pre><p>A reference to that bean can be declared in the imported Camel XML
configuration, e.g.:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"foo"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"..."</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;process</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"baz"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext/&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Auto-configuredOSGiintegration"></a>Auto-configured OSGi integration</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.17</strong></span></p><p>The Camel context beans are automatically adapted by Camel CDI so that
they are registered as OSGi services and the various resolvers
(like&nbsp;<code class="literal">ComponentResolver</code> and&nbsp;<code class="literal">DataFormatResolver</code>) integrate with the
OSGi registry. That means that the <a class="link" href="karaf.html" target="_top">Karaf Camel commands</a>
can be used to operate the Camel contexts auto-configured by Camel CDI,
e.g.:</p><pre class="programlisting">&nbsp;&nbsp;1 karaf@root()&gt; camel:context-list
&nbsp;&nbsp;2  Context        Status              Total #       Failed #     Inflight #   Uptime
&nbsp;&nbsp;3  -------        ------              -------       --------     ----------   ------
&nbsp;&nbsp;4  camel-cdi      Started                   1              0              0   1 minute</pre><p>See the&nbsp;<code class="literal">camel-example-cdi-osgi</code> example for a working example of the
Camel CDI OSGi integration.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-ProgrammaticLazyInjectionProgrammaticLookup"></a>Lazy Injection / Programmatic Lookup</h2></div></div></div><p>While the CDI programmatic model favors a <a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#typesafe_resolution" target="_top">typesafe resolution</a>
mechanism that occurs at application initialization time, it is possible to perform
dynamic / lazy injection later during the application execution using the
<a class="link" href="http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html#programmatic_lookup" target="_top">programmatic lookup</a>
mechanism.</p><p>Camel CDI provides for convenience the annotation literals corresponding to the
CDI qualifiers that you can use for standard injection of Camel primitives.
These annotation literals can be used in conjunction with the <code class="literal">javax.enterprise.inject.Instance</code>
interface which is the CDI entry point to perform lazy injection / programmatic lookup.</p><p>For example, you can use the provided annotation literal for the <code class="literal">@Uri</code> qualifier
to lazily lookup for Camel primitives, e.g. for <code class="literal">ProducerTemplate</code> beans:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Any</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
Instance&lt;ProducerTemplate&gt; producers;

ProducerTemplate inbound = producers
    .select(Uri.Literal.of(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:inbound"</em></strong>))
    .get();</pre><p>Or for <code class="literal">Endpoint</code> beans, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Any</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
Instance&lt;Endpoint&gt; endpoints;

MockEndpoint outbound = endpoints
    .select(MockEndpoint.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>, Uri.Literal.of(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:outbound"</em></strong>))
    .get();</pre><p>Similarly, you can use the provided annotation literal for
the <code class="literal">@ContextName</code> qualifier to lazily lookup for <code class="literal">CamelContext</code>
beans, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Any</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
Instance&lt;CamelContext&gt; contexts;

CamelContext context = contexts
    .select(ContextName.Literal.of(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"foo"</em></strong>))
    .get();</pre><p>You can also refined the selection based on the Camel context type, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Any</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
Instance&lt;CamelContext&gt; contexts;

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Refine the selection by type</em>
Instance&lt;DefaultCamelContext&gt; context = contexts.select(DefaultCamelContext.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>);

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">// Check if such a bean exists then retrieve a reference</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">if</strong> (!context.isUnsatisfied())
    context.get();</pre><p>Or even iterate over a selection of Camel contexts, e.g.:</p><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Any</span></em>
<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@Inject</span></em>
Instance&lt;CamelContext&gt; contexts;

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">for</strong> (CamelContext context : contexts)
    context.setUseBreadcrumb(true);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-MavenArchetype"></a>Maven Archetype</h2></div></div></div><p>Among the available&nbsp;<a class="link" href="camel-maven-archetypes.html" target="_top">Camel Maven
archetypes</a>, you can use the provided&nbsp;<code class="literal">camel-archetype-cdi</code>&nbsp;to generate
a Camel CDI Maven project, e.g.:</p><pre class="programlisting">mvn archetype:generate -DarchetypeGroupId=org.apache.camel.archetypes -DarchetypeArtifactId=camel-archetype-cdi</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Supportedcontainers"></a>Supported containers</h2></div></div></div><p>The Camel CDI component is compatible with any CDI 1.0, CDI 1.1 and CDI
1.2 compliant runtime. It&#8217;s been successfully tested against the
following runtimes:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="40%" class="col_1"><col width="20%" class="col_2"><col width="40%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Container</th><th align="left" valign="top">Version</th><th align="left" valign="top">Runtime</th></tr></thead><tbody><tr><td align="left" valign="top"><p>Weld SE</p></td><td align="left" valign="top"><p><code class="literal">1.1.28.Final</code></p></td><td align="left" valign="top"><p>CDI 1.0 / Java SE 7</p></td></tr><tr><td align="left" valign="top"><p>OpenWebBeans</p></td><td align="left" valign="top"><p><code class="literal">1.2.7</code></p></td><td align="left" valign="top"><p>CDI 1.0 / Java SE 7</p></td></tr><tr><td align="left" valign="top"><p>Weld SE</p></td><td align="left" valign="top"><p><code class="literal">2.3.4.Final</code></p></td><td align="left" valign="top"><p>CDI 1.2 / Java SE 7</p></td></tr><tr><td align="left" valign="top"><p>OpenWebBeans</p></td><td align="left" valign="top"><p><code class="literal">1.6.3</code></p></td><td align="left" valign="top"><p>CDI 1.2 / Java SE 7</p></td></tr><tr><td align="left" valign="top"><p>WildFly</p></td><td align="left" valign="top"><p><code class="literal">8.2.1.Final</code></p></td><td align="left" valign="top"><p>CDI 1.2 / Java EE 7</p></td></tr><tr><td align="left" valign="top"><p>WildFly</p></td><td align="left" valign="top"><p><code class="literal">9.0.1.Final</code></p></td><td align="left" valign="top"><p>CDI 1.2 / Java EE 7</p></td></tr><tr><td align="left" valign="top"><p>WildFly</p></td><td align="left" valign="top"><p><code class="literal">10.0.0.Final</code></p></td><td align="left" valign="top"><p>CDI 1.2 / Java EE 7</p></td></tr><tr><td align="left" valign="top"><p>Karaf</p></td><td align="left" valign="top"><p><code class="literal">2.4.4</code></p></td><td align="left" valign="top"><p>CDI 1.2 / OSGi 4 / PAX CDI</p></td></tr><tr><td align="left" valign="top"><p>Karaf</p></td><td align="left" valign="top"><p><code class="literal">3.0.5</code></p></td><td align="left" valign="top"><p>CDI 1.2 / OSGi 5 / PAX CDI</p></td></tr><tr><td align="left" valign="top"><p>Karaf</p></td><td align="left" valign="top"><p><code class="literal">4.0.4</code></p></td><td align="left" valign="top"><p>CDI 1.2 / OSGi 6 / PAX CDI</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-Examples"></a>Examples</h2></div></div></div><p>The following examples are available in the <code class="literal">examples</code> directory of the
Camel project:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="24%" class="col_1"><col width="76%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Example</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">camel-example-cdi</code></p></td><td align="left" valign="top"><p>Illustrates how to work with Camel using CDI to configure components,
endpoints and beans</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">camel-example-cdi-kubernetes</code></p></td><td align="left" valign="top"><p>Illustrates the integration between Camel, CDI and Kubernetes</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">camel-example-cdi-metrics</code></p></td><td align="left" valign="top"><p>Illustrates the integration between Camel, Dropwizard Metrics and CDI</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">camel-example-cdi-properties</code></p></td><td align="left" valign="top"><p>Illustrates the integration between Camel, DeltaSpike and CDI for
configuration properties</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">camel-example-cdi-osgi</code></p></td><td align="left" valign="top"><p>A&nbsp;CDI application using the SJMS component that can be executed
inside an OSGi container using PAX CDI</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">camel-example-cdi-rest-servlet</code></p></td><td align="left" valign="top"><p>Illustrates the Camel REST DSL being used in a Web application that
uses CDI as dependency injection framework</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">camel-example-cdi-test</code></p></td><td align="left" valign="top"><p>Demonstrates the testing features that are provided as part of
the integration between Camel and CDI</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">camel-example-cdi-xml</code></p></td><td align="left" valign="top"><p>Illustrates the use of Camel XML configuration
files into a Camel CDI application</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">camel-example-swagger-cdi</code></p></td><td align="left" valign="top"><p>An example using REST DSL and Swagger Java with CDI</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">camel-example-widget-gadget-cdi</code></p></td><td align="left" valign="top"><p>The Widget and Gadget use-case from the EIP book implemented
in Java with CDI dependency Injection</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CDI-SeeAlso"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="cdi-testing.html" target="_top">Camel CDI testing</a></li><li class="listitem"><a class="link" href="http://www.cdi-spec.org" target="_top">CDI specification Web site</a></li><li class="listitem"><a class="link" href="http://www.cdi-spec.org/ecosystem/" target="_top">CDI ecosystem</a></li><li class="listitem"><a class="link" href="http://weld.cdi-spec.org" target="_top">Weld home page</a></li><li class="listitem"><a class="link" href="http://openwebbeans.apache.org" target="_top">OpenWebBeans home page</a></li><li class="listitem"><a class="link" href="https://github.com/astefanutti/further-cdi" target="_top">Going further with CDI and Camel</a>
(See Camel CDI section)</li></ul></div><p>The Chronicle Engine component has no options.</p><p>The Chronicle Engine component supports 13 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>addresses</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Engine addresses. Multiple addresses can be separated by comman.</p></td></tr><tr><td align="left" valign="top"><p>path</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Engine path</p></td></tr><tr><td align="left" valign="top"><p>action</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The default action to perform valid values are: - PUBLISH - PPUBLISH_AND_INDEX - PPUT - PGET_AND_PUT - PPUT_ALL - PPUT_IF_ABSENT - PGET - PGET_AND_REMOVE - PREMOVE - PIS_EMPTY - PSIZE</p></td></tr><tr><td align="left" valign="top"><p>filteredMapEvents</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>A comma separated list of Map event type to filer valid values are: INSERT UPDATE REMOVE.</p></td></tr><tr><td align="left" valign="top"><p>persistent</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Enable/disable data persistence</p></td></tr><tr><td align="left" valign="top"><p>subscribeMapEvents</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Set if consumer should subscribe to Map events default true.</p></td></tr><tr><td align="left" valign="top"><p>subscribeTopicEvents</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Set if consumer should subscribe to TopicEventsd efault false.</p></td></tr><tr><td align="left" valign="top"><p>subscribeTopologicalEvents</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Set if consumer should subscribe to TopologicalEventsd efault false.</p></td></tr><tr><td align="left" valign="top"><p>wireType</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">BINARY</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The Wire type to use default to binary wire.</p></td></tr><tr><td align="left" valign="top"><p>bridgeErrorHandler</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler which mean any exceptions occurred while the consumer is trying to pickup incoming messages or the likes will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exceptionHandler</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExceptionHandler</code></p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exchangePattern</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExchangePattern</code></p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr></tbody></table></div><p>{% endraw %}</p></div></div></body></html>