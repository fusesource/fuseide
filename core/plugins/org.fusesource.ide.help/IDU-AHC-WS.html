<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>AHC-WS</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-AHC.html" title="AHC"><link rel="next" href="IDU-AMQP.html" title="AMQP"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-AHC-WS"></a>AHC-WS</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-AHC-WS_HSH_AsyncHttpClientAHCWebsocketClientComponent"></a>Async Http Client (AHC) Websocket Client Component</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.14</strong></span></p><p>The <span class="strong"><strong>ahc-ws</strong></span> component provides Websocket based <a class="link" href="http://localhost:8090/display/CAMEL/Endpoint" target="_top">endpoints</a> for a client
            communicating with external servers over Websocket (as a client opening a websocket
            connection to an external server). The component uses the <a href="IDU-AHC.html" class="olink"><i>AHC</i></a>
            component that in turn uses the <a class="link" href="https://github.com/AsyncHttpClient/async-http-client" target="_top">Async Http
                Client</a> library.</p><p>Maven users will need to add the following dependency to their <code class="code">pom.xml</code>
            for this component:</p><div class="informalexample"><pre class="programlisting">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-ahc-ws&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</pre></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-374"></a>URI Format</h2></div></div></div><div class="informalexample"><pre class="programlisting">ahc-ws://hostname[:port][/resourceUri][?options]
ahc-wss://hostname[:port][/resourceUri][?options]</pre></div><p>Will by default use port 80 for ahc-ws and 443 for ahc-wss.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-375"></a>AHC-WS Options</h2></div></div></div><p>As the AHC-WS component is based on the AHC component, you can use the various
                configuration options of the AHC component.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-376"></a>Writing and Reading Data over Websocket</h2></div></div></div><p>An ahc-ws endpoint can either write data to the socket or read from the socket,
                depending on whether the endpoint is configured as the producer or the consumer,
                respectively.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-377"></a>Configuring URI to Write or Read Data</h2></div></div></div><p>In the route below, Camel will write to the specified websocket connection.</p><div class="informalexample"><pre class="programlisting">from("direct:start")
	    .to("ahc-ws://targethost");</pre></div><p>And the equivalent Spring sample:</p><div class="informalexample"><pre class="programlisting">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;to uri="ahc-ws://targethost"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</pre></div><p>In the route below, Camel will read from the specified websocket
                connection.</p><div class="informalexample"><pre class="programlisting">from("ahc-ws://targethost")
	    .to("direct:next");</pre></div><p>And the equivalent Spring sample:</p><div class="informalexample"><pre class="programlisting">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="ahc-ws://targethost"/&gt;
    &lt;to uri="direct:next"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</pre></div></div></div></body></html>