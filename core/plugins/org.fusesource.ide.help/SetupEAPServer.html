<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Running a SwitchYard Project on a JBoss Enterprise Application Server</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="RiderSwitchyard.html" title="Using the Switchyard Tooling"><link rel="prev" href="SetupFuseServer.html" title="Running a SwitchYard Project on a JBoss Fuse Server"><link rel="next" href="RiderCamelDebugger.html" title="Part&nbsp;III.&nbsp;Debugging Routing Contexts"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SetupEAPServer"></a>Running a SwitchYard Project on a JBoss Enterprise Application Server</h2></div></div></div><p>To publish and run Fuse SwitchYard projects on an installed EAP server, you must first: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Install JBoss Fuse on the JBoss EAP server</p><p>For details, see <a class="link" href="https://access.redhat.com/site/documentation/en-US/Red_Hat_JBoss_Fuse/6.3/html/Installation_on_JBoss_EAP/index.html" target="_top">Installation of JBoss Fuse on JBoss EAP</a></p></li><li class="listitem"><p>Add the server and its runtime definition to the tooling's
                        <span class="guilabel">Servers</span> list</p><p>Once added to the list, the server appears in the <span class="guilabel">Servers</span>
                    view, where you can configure it, start and stop it, and publish projects to
                    it.</p></li></ul></div><p>You can publish SwitchYard projects to Red Hat JBoss Enterprise Platform 6.4 and newer
        servers that you have defined and added to the Servers list.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you haven't already installed a server, you can do so when you define and add it
        to the Servers list.</p></td></tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="Add_JBoss_EAP_Server"></a>Adding a JBoss EAP server</h3></div></div></div><p>You can add a new server to the <span class="guilabel">Servers</span> view in three ways:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>In <span class="guilabel">Servers</span> view, click the link <span class="guilabel">No servers are available. Click
                        this link to create a new server...</span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>This link appears in <span class="guilabel">Servers</span> view only when no server has been
                        defined.</p></td></tr></table></div></li><li class="listitem"><p>Right-click in <span class="guilabel">Servers</span> view to open the context menu, then select <span class="guimenu">New</span> &gt; <span class="guimenuitem">Server</span>.</p></li><li class="listitem"><p>On the menu bar, select <span class="guimenu">File</span> &gt; <span class="guisubmenu">New</span> &gt; <span class="guisubmenu">Other</span> &gt; <span class="guisubmenu">Server</span> &gt; <span class="guimenuitem">Server</span>.</p></li></ul></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Define a New Server</span> dialog, select <code class="filename">Red Hat JBoss Enterprise
                    Application Platform 6.1+</code>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/EAP64DefineNewSrv_1a.png" width="289.3"></div></div><p><span class="guilabel">Server's host name</span> and <span class="guilabel">Server name</span> are auto
                    filled by default. In <span class="guilabel">Server name</span>, you can enter a
                    different name to use to identify the server in the <span class="guilabel">Servers</span>
                    view. </p></li><li class="step"><p>Click <span class="guibutton">Next</span> to open the <span class="guilabel">Create a New Server
	        Adapter</span> page.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/EAP64DownloadSrvAdapter_1.png" width="341.55"></div></div><p>To specify that the server life-cycle is managed from outside the tooling, check
                            <span class="guilabel">Server is externally managed. Assume server is
                            started.</span>.</p><p>If you have not configured a runtime before, <span class="guilabel">Create new runtime (next
                        page)</span> appears on the drop-down menu bar under <span class="guilabel">The
                        selected profile requires a runtime</span> (as shown in the figure
                    above). Otherwise, a previously configured runtime appears on the drop-down menu
                    bar.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can assign the same runtime to multiple server instances, which enables
                    you to quickly launch a server in debug mode or to configure other runtime
                    settings.</p></td></tr></table></div></li><li class="step"><p>To use a previously created runtime with this server, click the drop-down menu and select it
                    from the list (skip to <a class="xref" href="SetupEAPServer.html#eapSrvRTFinish" title="Step 6">Step 6</a>). </p><p>To create a new runtime, select <span class="guilabel">Create new runtime (next
                        page)</span> from the list. </p></li><li class="step"><a name="localStandalone"></a><p>Click <span class="guibutton">Next</span> to open the <span class="guilabel">JBoss Runtime</span> page.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/EAP64RuntimeDef.png" width="359.7000000000001"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If the server is not already installed on your machine, you can install it
	            now by clicking the link <span class="guilabel">Download and install runtime...</span> and
	            following the site's download instructions. Depending on the site, you may be
	            required to provide valid credentials before you can continue the download
	            process.</p></td></tr></table></div></li><li class="step"><p>Configure the JBoss runtime:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Accept the default for <span class="guilabel">Name</span>, or enter a different name.</p></li><li class="listitem"><p>In <span class="guilabel">Home Directory</span>, enter the path where the server runtime is installed,
                            or click <span class="guibutton">Browse</span> to find and select it.</p></li><li class="listitem"><p>Select the runtime JRE from the drop-down menu next to <span class="guilabel">Execution
	                Environment</span>.</p><p>If the version you want does not appear on the list, click <span class="guibutton">Environments</span>, and
	                    then select the version from the list. The JRE version you select must be
	                    installed on your machine.</p></li><li class="listitem"><p>Accept the defaults for <span class="guilabel">Configuration base directory</span> and
                                <span class="guilabel">Configuration file</span>, or browse to the directory
                            where the <code class="filename">.xml</code> configuration file to use is
                            located.</p></li></ul></div></li><li class="step"><a name="eapSrvRTFinish"></a><p>Click <span class="guibutton">Finish</span>.</p><p>The server appears in the <span class="guilabel">Servers</span> view.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/EAP64SrvRuntimeDefined.png" width="357.7"></div></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e8138"></a>Importing a SwitchYard quickstart project</h3></div></div></div><p>The JBoss Fuse on JBoss EAP installer installs the SwitchYard quickstarts in
                    <code class="filename"><em class="replaceable"><code>$EAP_HOME</code></em>/quickstarts/switchyard/</code>.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Right-click in <span class="guilabel">Project Explorer</span>, and select <span class="guimenu">Import</span> &gt; <span class="guimenuitem">Import...</span> to open the <span class="guilabel">Choose Import source</span>
                    dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYchooseImportSource.png" width="288.75"></div></div></li><li class="step"><p>In the <span class="guilabel">Maven</span> folder, select <span class="guilabel">Existing Maven
                Projects</span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapExistMvnProjects.png" width="243.10000000000002"></div></div></li><li class="step"><p>Click <span class="guibutton">Next</span> to open the <span class="guilabel">Select Maven
                        projects</span> dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYFuseMavenProjects1.png" width="296.45000000000005"></div></div></li><li class="step"><p>Click the <span class="guibutton">Browse</span> button next to the <span class="guilabel">Root Directory</span>
                    field to locate and select the
                        <code class="literal"><em class="replaceable"><code>$EAP_HOME</code></em>/quickstarts/switchyard/bean-service</code>. </p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapBeanSrvSelect.png" width="330.55"></div></div></li><li class="step"><p>In the <span class="guilabel">Projects</span> pane, make sure the <code class="filename">pom.xml</code> file
                    entry for the <code class="filename">switchyard-bean-service</code> is selected.</p></li><li class="step"><p>Click <span class="guibutton">Finish</span> to start the import.</p><p>The <code class="filename">switchyard-bean-service</code> project appears in
                    <span class="guilabel">Project Explorer</span>. </p><p>Wait a moment for the import process to finish.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e8240"></a>Testing a SwitchYard project locally</h3></div></div></div><p>Before you try to publish your project to a server, it's useful to confirm that it
            builds and runs locally. The provided test files included with each SwitchYard
            quickstart are complete and comprehensive and need no modification.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In <span class="guilabel">Project Explorer</span>, expand the
                        <code class="filename">switchyard-bean-service</code> project to expose
                        <code class="filename">src/test/java/OrderServiceTest.java</code> file.</p><p>If you want to take a look at the test code, double-click the file to open it
                    in the Java editor.</p></li><li class="step"><p>In <span class="guilabel">Project Explorer</span>, right-click the
                <code class="filename">OrderServiceTest.java</code> file to open the context menu,
                and select <span class="guimenu">Run As</span> &gt; <span class="guimenuitem">JUnit Test</span>.</p><p><span class="guilabel">Console</span> view automatically opens and displays the log
                    entries generated by the JUnit test.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapJUnitTstConsole.png" width="477.59999999999997"></div></div><p>These log entries indicate that the test ran successfully against Apache Camel
                    as expected.</p></li><li class="step"><p>Click the <span class="guilabel">JUnit</span> tab to open <span class="guilabel">JUnit</span> view.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapJUnitTstPass.png" width="407.40000000000003"></div></div><p>This test proves that the <code class="filename">switchyard-bean-service</code> successfully builds and runs
                    locally.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="publishSYEAPproject"></a>Publishing a SwitchYard project to the server</h3></div></div></div><p>You can publish a project to a supported EAP server, defined and listed in the
                <span class="guilabel">Servers</span> view, whether it's running or not. A published project
            will run as scheduled according to the server's settings (for details, see (<a href="FIDEDeployingContainer.html" class="olink"><i>Publishing Fuse Integration Projects to a Server</i></a>).</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>The EAP server must have JBoss Fuse on JBoss EAP installed on it. For details, see <a class="link" href="https://access.redhat.com/site/documentation/en-US/Red_Hat_JBoss_Fuse/6.3/html/Installation_on_JBoss_EAP/index.html" target="_top">Installation of JBoss Fuse on JBoss EAP</a>
            </p></td></tr></table></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Servers</span> view, select the EAP 6.4 server you just added, and click <span class="inlinemediaobject"><img src="./images/run_exec.png" width="12.8"></span> on the menu bar to start it.</p></li><li class="step"><p>In the <span class="guilabel">Servers</span> view, right-click the server to open the context menu, and
                    select <span class="guimenuitem">Add and Remove</span>.</p><p>When a project is ready for publishing, it appears in the
                        <span class="guilabel">Available</span> column.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapAddRemove1.png" width="284.35"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The option <span class="guilabel">If server is started, publish changes immediately</span> is enable by
                        default. See <a href="FIDEDeployingContainer.html#autoPublish" class="olink">Publishing Fuse projects automatically when resources change</a> for information on how this
                        option works and on using other publishing options.</p></td></tr></table></div></li><li class="step"><p>Double-click the project in the <span class="guilabel">Available</span> column to move it to the
                        <span class="guilabel">Configured</span> column.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapAddRemove2.png" width="284.35"></div></div></li><li class="step"><p>Click <span class="guibutton">Finish</span>.</p><p>Once publishing has finished, the project appears as a node under the server
                    runtime node in the <span class="guilabel">Servers</span> view.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapBeanSrvDeployed.png" width="382.2"></div></div><p><span class="guilabel">Servers</span> view shows that both the server runtime and the project
                    are started and synchronized.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>For a server runtime, <span class="italic">Synchronized</span> means that all published
                        resources on the server are identical to their local counterparts. For a
                        published resource, <span class="italic">Synchronized</span> means
                        that it is identical to its local counterpart.</p></td></tr></table></div></li><li class="step"><p>Look at the log output in <span class="guilabel">Console</span> view
                    to confirm that the <code class="filename">switchyard-bean-service</code> project is
                    deployed and running:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapBeanSrvDeployLogs.png" width="503.4"></div></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e8410"></a>Testing the published SwitchYard project</h3></div></div></div><p>You can use the  JBoss Web Service Tester tool to test your published web
            service.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>From the log output in <span class="guilabel">Console</span> view, copy the address
                of the <code class="filename">bean-service</code>
                    project's <code class="literal">OrderService</code>. </p><p>In the example we are using, the address is
                    <code class="literal">http://localhost:8080/quickstart-bean/OrderService</code>.</p></li><li class="step"><p>Open a browser, and paste the address of the <code class="literal">OrderService</code> in the browser's
                    address field.</p></li><li class="step"><a name="wsdlOrderService"></a><p>Add <code class="literal">?wsdl</code> to the end of the address, so it reads
                        <code class="literal">http://localhost:8080/quickstart-bean/OrderService?wsdl</code>.</p></li><li class="step"><p>Press <span class="command"><strong>Enter</strong></span>.</p><p>The browser displays the WSDL for the <code class="literal">OrderService</code>:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapWSDLbrowser.png" width="369.04999999999995"></div></div></li><li class="step"><a name="eapCpyWSDLaddr"></a><p>Copy the URL in the browser's address field.</p></li><li class="step"><p>In JBoss Developer Studio, click <span class="guimenu">Window</span> &gt; <span class="guisubmenu">Show View</span> &gt; <span class="guimenuitem">Other</span>, then scroll down to the <span class="guilabel">JBoss Tools Web Services</span> folder, and
                select <span class="guimenuitem">Web Service Tester</span>. </p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapJBWebTester0.png" width="377.85"></div></div></li><li class="step"><p>Click the drop-down menu labeled <span class="guimenuitem">GET</span>, and select
                        <span class="guimenuitem">JAX-WS</span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapJBWebTester2.png" width="378.95000000000005"></div></div><p>The <span class="guilabel">Request Body</span> pane displays an example SOAP request message.</p></li><li class="step"><p>Click <span class="inlinemediaobject"><img src="./images/GetFromWSDLIcon.png" width="16.15"></span> next to <span class="inlinemediaobject"><img src="./images/JAXWSbutton.png" width="88.39999999999999"></span> to open the <span class="guilabel">Specify the Source WSDL for the Web
                        Service</span> dialog, then paste the URL you copied in <a class="xref" href="SetupEAPServer.html#eapCpyWSDLaddr" title="Step 5">Step 5</a> into the
                <span class="guilabel">WSDL URI</span> field.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapJBWebTester4.png" width="370.7000000000001"></div></div><p>The <span class="guilabel">Web Service Tester</span> auto fills the remaining fields
                    with the data retrieved from the WSDL.</p></li><li class="step"><p>Click <span class="guibutton">OK</span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapJBWebTester5.png" width="379.50000000000006"></div></div><p>The <span class="guilabel">Web Service Tester</span> displays the XML request message
                    retrieved from the WSDL in the <span class="guilabel">Request Body</span> pane.</p><p>You can enter values for the <code class="literal">&lt;order&gt;</code> items
                    <code class="literal">&lt;orderId&gt;</code>, <code class="literal">&lt;itemId&gt;</code>, and
                    <code class="literal">&lt;quantity&gt;</code> to test the project's request and response
                    services.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can discover what the data types are for each order item. In
                    <span class="guilabel">Project Explorer</span>,
                    double-click <code class="filename">src/test/java/OrderServiceTest.java</code> file to open it in the Java
                    editor:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYOrderSrvTestJava.png" width="275.99999999999994"></div></div></td></tr></table></div></li><li class="step"><p>In the <span class="guilabel">Request Body</span> pane, click the value field of each order item and
                    enter an appropriate value for it. For example:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>For <span class="property">&lt;orderID&gt;</span>, replace <code class="literal">?</code> with
                                <em class="replaceable"><code>ORDER10</code></em></p></li><li class="listitem"><p>For <span class="property">&lt;itemId&gt;</span>, replace <code class="literal">?</code> with
                                <em class="replaceable"><code>BUTTER</code></em></p></li><li class="listitem"><p>For <span class="property">&lt;quantity&gt;</span>, replace <code class="literal">0</code> with
                                <em class="replaceable"><code>1000</code></em></p></li></ul></div></li><li class="step"><p>Click <span class="inlinemediaobject"><img src="./images/run_exec.png" width="13.6"></span> to the right of <span class="inlinemediaobject"><img src="./images/GetFromWSDLIcon.png" width="16.15"></span> to invoke the <span class="command"><strong>submitOrder</strong></span> operation. and
                    populate the <span class="guilabel">Response Body</span> pane with an example response
                    message.</p><p><span class="guilabel">Console</span> view automatically opens to display the status of
                    the <span class="command"><strong>submitOrder</strong></span> operation like this&#8212;</p><pre class="programlisting">... INFO [stdout] (http-localhost/127.0.0.1:8080-2) |--- Validating Order object: [OrderID=ORDER10, 
       ItemID=BUTTER, quantity=1000] ---|

... INFO [stdout] (http-localhost/127.0.0.1:8080-2) |--- Validating OrderAck object: [OrderID=ORDER10,
       accepted=true, status=Order Accepted [intercepted]] ---|</pre><p>&#8212;at the end of the <span class="guilabel">Console</span> output.</p></li><li class="step"><p>Switch to the <span class="guilabel">Web Service Tester</span> tool and check the response message in
                    the <span class="guilabel">Response Body</span> pane.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapWSTReqMsgValidate.png" width="383.90000000000003"></div></div></li></ol></div></div></div></body></html>