<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>AWS S3 Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="AWS-KINESIS-KinesisComponent.html" title="AWS Kinesis Component"><link rel="next" href="AWS-SDB-SDBComponent.html" title="AWS SDB Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="AWS-S3-S3Component"></a>AWS S3 Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-URIFormat">URI Format</a></span></dt><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-URIOptions">URI Options</a></span></dt><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-BatchConsumer">Batch Consumer</a></span></dt><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-Usage">Usage</a></span></dt><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-Dependencies">Dependencies</a></span></dt><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-SeeAlso">See Also</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel 2.8</strong></span></p><p>The S3 component supports storing and retrieving objetcs from/to
<a class="link" href="http://aws.amazon.com/s3" target="_top">Amazon&#8217;s S3</a> service.</p><p>Prerequisites</p><p>You must have a valid Amazon Web Services developer account, and be
signed up to use Amazon S3. More information are available at
<a class="link" href="http://aws.amazon.com/s3" target="_top">Amazon S3</a>.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="AWS-S3-URIFormat"></a>URI Format</h2></div></div></div><pre class="programlisting">aws-s3:<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//bucketNameOrArn[?options]</em></pre><p>The bucket will be created if it don&#8217;t already exists.
 You can append query options to the URI in the following format,
?options=value&amp;option2=value&amp;&#8230;&#8203;</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="AWS-S3-URIOptions"></a>URI Options</h2></div></div></div><p>The AWS S3 Storage Service component has no options.</p><p>The AWS S3 Storage Service component supports 41 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>bucketNameOrArn</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Bucket name or ARN</p></td></tr><tr><td align="left" valign="top"><p>accessKey</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Amazon AWS Access Key</p></td></tr><tr><td align="left" valign="top"><p>amazonS3Client</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">AmazonS3</code></p></td><td align="left" valign="top"><p>Reference to a com.amazonaws.services.sqs.AmazonS3 in the link:registry.htmlRegistry.</p></td></tr><tr><td align="left" valign="top"><p>amazonS3Endpoint</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The region with which the AWS-S3 client wants to work with.</p></td></tr><tr><td align="left" valign="top"><p>pathStyleAccess</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Whether or not the S3 client should use path style access</p></td></tr><tr><td align="left" valign="top"><p>policy</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Camel 2.8.4: The policy for this queue to set in the com.amazonaws.services.s3.AmazonS3setBucketPolicy() method.</p></td></tr><tr><td align="left" valign="top"><p>proxyHost</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Camel 2.16: To define a proxy host when instantiating the SQS client</p></td></tr><tr><td align="left" valign="top"><p>proxyPort</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>Camel 2.16: Specify a proxy port to be used inside the client definition.</p></td></tr><tr><td align="left" valign="top"><p>secretKey</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Amazon AWS Secret Key</p></td></tr><tr><td align="left" valign="top"><p>autocloseBody</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If this option is true and includeBody is true then the S3Object.close() method will be called on exchange completion</p></td></tr><tr><td align="left" valign="top"><p>bridgeErrorHandler</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler which mean any exceptions occurred while the consumer is trying to pickup incoming messages or the likes will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>deleteAfterRead</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Delete objects from S3 after they have been retrieved. The delete is only performed if the Exchange is committed. If a rollback occurs the object is not deleted. If this option is false then the same objects will be retrieve over and over again on the polls. Therefore you need to use the Idempotent Consumer EIP in the route to filter out duplicates. You can filter using the link S3ConstantsBUCKET_NAME and link S3ConstantsKEY headers or only the link S3ConstantsKEY header.</p></td></tr><tr><td align="left" valign="top"><p>fileName</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>To get the object from the bucket with the given file name</p></td></tr><tr><td align="left" valign="top"><p>includeBody</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Camel 2.17: If it is true the exchange body will be set to a stream to the contents of the file. If false the headers will be set with the S3 object metadata but the body will be null.</p></td></tr><tr><td align="left" valign="top"><p>maxMessagesPerPoll</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">10</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>Gets the maximum number of messages as a limit to poll at each polling. Is default unlimited but use 0 or negative number to disable it as unlimited.</p></td></tr><tr><td align="left" valign="top"><p>prefix</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Camel 2.10.1: The prefix which is used in the com.amazonaws.services.s3.model.ListObjectsRequest to only consume objects we are interested in.</p></td></tr><tr><td align="left" valign="top"><p>sendEmptyMessageWhenIdle</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If the polling consumer did not poll any files you can enable this option to send an empty message (no body) instead.</p></td></tr><tr><td align="left" valign="top"><p>exceptionHandler</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExceptionHandler</code></p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exchangePattern</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExchangePattern</code></p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td></tr><tr><td align="left" valign="top"><p>pollStrategy</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">PollingConsumerPollStrategy</code></p></td><td align="left" valign="top"><p>A pluggable org.apache.camel.PollingConsumerPollingStrategy allowing you to provide your custom implementation to control error handling usually occurred during the poll operation before an Exchange have been created and being routed in Camel.</p></td></tr><tr><td align="left" valign="top"><p>deleteAfterWrite</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Camel 2.11.0: Delete file object after the S3 file has been uploaded</p></td></tr><tr><td align="left" valign="top"><p>multiPartUpload</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Camel 2.15.0: If it is true camel will upload the file with multi part format the part size is decided by the option of partSize</p></td></tr><tr><td align="left" valign="top"><p>operation</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">S3Operations</code></p></td><td align="left" valign="top"><p>Camel 2.18: The operation to do in case the user don&#8217;t want to do only an upload</p></td></tr><tr><td align="left" valign="top"><p>partSize</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top"><p><code class="literal">26214400</code></p></td><td align="left" valign="top"><p><code class="literal">long</code></p></td><td align="left" valign="top"><p>Camel 2.15.0: Setup the partSize which is used in multi part upload the default size is 25M.</p></td></tr><tr><td align="left" valign="top"><p>region</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The region where the bucket is located. This option is used in the com.amazonaws.services.s3.model.CreateBucketRequest.</p></td></tr><tr><td align="left" valign="top"><p>serverSideEncryption</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Camel 2.16: Sets the server-side encryption algorithm when encrypting the object using AWS-managed keys. For example use AES256.</p></td></tr><tr><td align="left" valign="top"><p>storageClass</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Camel 2.8.4: The storage class to set in the com.amazonaws.services.s3.model.PutObjectRequest request.</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr><tr><td align="left" valign="top"><p>backoffErrorThreshold</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>The number of subsequent error polls (failed due some error) that should happen before the backoffMultipler should kick-in.</p></td></tr><tr><td align="left" valign="top"><p>backoffIdleThreshold</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>The number of subsequent idle polls that should happen before the backoffMultipler should kick-in.</p></td></tr><tr><td align="left" valign="top"><p>backoffMultiplier</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>To let the scheduled polling consumer backoff if there has been a number of subsequent idles/errors in a row. The multiplier is then the number of polls that will be skipped before the next actual attempt is happening again. When this option is in use then backoffIdleThreshold and/or backoffErrorThreshold must also be configured.</p></td></tr><tr><td align="left" valign="top"><p>delay</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top"><p><code class="literal">500</code></p></td><td align="left" valign="top"><p><code class="literal">long</code></p></td><td align="left" valign="top"><p>Milliseconds before the next poll. You can also specify time values using units such as 60s (60 seconds) 5m30s (5 minutes and 30 seconds) and 1h (1 hour).</p></td></tr><tr><td align="left" valign="top"><p>greedy</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If greedy is enabled then the ScheduledPollConsumer will run immediately again if the previous run polled 1 or more messages.</p></td></tr><tr><td align="left" valign="top"><p>initialDelay</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top"><p><code class="literal">1000</code></p></td><td align="left" valign="top"><p><code class="literal">long</code></p></td><td align="left" valign="top"><p>Milliseconds before the first poll starts. You can also specify time values using units such as 60s (60 seconds) 5m30s (5 minutes and 30 seconds) and 1h (1 hour).</p></td></tr><tr><td align="left" valign="top"><p>runLoggingLevel</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top"><p><code class="literal">TRACE</code></p></td><td align="left" valign="top"><p><code class="literal">LoggingLevel</code></p></td><td align="left" valign="top"><p>The consumer logs a start/complete log line when it polls. This option allows you to configure the logging level for that.</p></td></tr><tr><td align="left" valign="top"><p>scheduledExecutorService</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ScheduledExecutorService</code></p></td><td align="left" valign="top"><p>Allows for configuring a custom/shared thread pool to use for the consumer. By default each consumer has its own single threaded thread pool.</p></td></tr><tr><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top"><p><code class="literal">none</code></p></td><td align="left" valign="top"><p><code class="literal">ScheduledPollConsumerScheduler</code></p></td><td align="left" valign="top"><p>To use a cron scheduler from either camel-spring or camel-quartz2 component</p></td></tr><tr><td align="left" valign="top"><p>schedulerProperties</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Map</code></p></td><td align="left" valign="top"><p>To configure additional properties when using a custom scheduler or any of the Quartz2 Spring based scheduler.</p></td></tr><tr><td align="left" valign="top"><p>startScheduler</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Whether the scheduler should be auto started.</p></td></tr><tr><td align="left" valign="top"><p>timeUnit</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top"><p><code class="literal">MILLISECONDS</code></p></td><td align="left" valign="top"><p><code class="literal">TimeUnit</code></p></td><td align="left" valign="top"><p>Time unit for initialDelay and delay options.</p></td></tr><tr><td align="left" valign="top"><p>useFixedDelay</p></td><td align="left" valign="top"><p>scheduler</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Controls if fixed delay or fixed rate is used. See ScheduledExecutorService in JDK for details.</p></td></tr></tbody></table></div><p>{% endraw %}</p><p>Required S3 component options</p><p>You have to provide the amazonS3Client in the
<a class="link" href="registry.html" target="_top">Registry</a> or your accessKey and secretKey to access
the <a class="link" href="http://aws.amazon.com/s3" target="_top">Amazon&#8217;s S3</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="AWS-S3-BatchConsumer"></a>Batch Consumer</h2></div></div></div><p>This component implements the <a class="link" href="batch-consumer.html" target="_top">Batch Consumer</a>.</p><p>This allows you for instance to know how many messages exists in this
batch and for instance let the <a class="link" href="aggregator.html" target="_top">Aggregator</a>
aggregate this number of messages.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="AWS-S3-Usage"></a>Usage</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-MessageheadersevaluatedbytheS3producer">Message headers evaluated by the S3 producer</a></span></dt><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-MessageheaderssetbytheS3producer">Message headers set by the S3 producer</a></span></dt><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-MessageheaderssetbytheS3consumer">Message headers set by the S3 consumer</a></span></dt><dt><span class="section"><a href="AWS-S3-S3Component.html#AWS-S3-AdvancedAmazonS3configuration">Advanced AmazonS3 configuration</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="AWS-S3-MessageheadersevaluatedbytheS3producer"></a>Message headers evaluated by the S3 producer</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Header</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3BucketName</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The bucket Name which this object will be stored or which will be used for the current operation</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3BucketDestinationName</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.18</strong></span>: The bucket Destination Name which will be used for the current operation</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentLength</code></p></td><td align="left" valign="top"><p><code class="literal">Long</code></p></td><td align="left" valign="top"><p>The content length of this object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The content type of this object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentControl</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.8.2:</strong></span> The content control of this object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentDisposition</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.8.2:</strong></span> The content disposition of this object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentEncoding</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.8.2:</strong></span> The content encoding of this object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentMD5</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.8.2:</strong></span> The md5 checksum of this object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3DestinationKey</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.18</strong></span>:The Destination key which will be used for the current operation</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3Key</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The key under which this object will be stored or which will be used for the current operation</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3LastModified</code></p></td><td align="left" valign="top"><p><code class="literal">java.util.Date</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.8.2:</strong></span> The last modified timestamp of this object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3Operation</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.18</strong></span>: The operation to perform</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3StorageClass</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.8.4:</strong></span> The storage class of this object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3CannedAcl</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.11.0:</strong></span> The canned acl that will be applied to the object. see
<code class="literal">com.amazonaws.services.s3.model.CannedAccessControlList</code> for allowed
values.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3Acl</code></p></td><td align="left" valign="top"><p><code class="literal">com.amazonaws.services.s3.model.AccessControlList</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.11.0:</strong></span> a well constructed Amazon S3 Access Control List object.
see <code class="literal">com.amazonaws.services.s3.model.AccessControlList</code> for more details</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3Headers</code></p></td><td align="left" valign="top"><p><code class="literal">Map&lt;String,String&gt;</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.15.0</strong></span>: support to get or set custom objectMetadata headers.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ServerSideEncryption</code></p></td><td align="left" valign="top"><p>String</p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.16:</strong></span> Sets the server-side encryption algorithm when encrypting
the object using AWS-managed keys. For example use AES256.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3VersionId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The version Id of the object to be stored or returned from the current operation</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="AWS-S3-MessageheaderssetbytheS3producer"></a>Message headers set by the S3 producer</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Header</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ETag</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The ETag value for the newly uploaded object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3VersionId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The <span class="strong"><strong>optional</strong></span> version ID of the newly uploaded object.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="AWS-S3-MessageheaderssetbytheS3consumer"></a>Message headers set by the S3 consumer</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Header</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3Key</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The key under which this object is stored.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3BucketName</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The name of the bucket in which this object is contained.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ETag</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The hex encoded 128-bit MD5 digest of the associated object according to
RFC 1864. This data is used as an integrity check to verify that the
data received by the caller is the same data that was sent by Amazon S3.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3LastModified</code></p></td><td align="left" valign="top"><p><code class="literal">Date</code></p></td><td align="left" valign="top"><p>The value of the Last-Modified header, indicating the date and time at
which Amazon S3 last recorded a modification to the associated object.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3VersionId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The version ID of the associated Amazon S3 object if available. Version
IDs are only assigned to objects when an object is uploaded to an Amazon
S3 bucket that has object versioning enabled.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The Content-Type HTTP header, which indicates the type of content stored
in the associated object. The value of this header is a standard MIME
type.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentMD5</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The base64 encoded 128-bit MD5 digest of the associated object (content
- not including headers) according to RFC 1864. This data is used as a
message integrity check to verify that the data received by Amazon S3 is
the same data that the caller sent.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentLength</code></p></td><td align="left" valign="top"><p><code class="literal">Long</code></p></td><td align="left" valign="top"><p>The Content-Length HTTP header indicating the size of the associated
object in bytes.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentEncoding</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The <span class="strong"><strong>optional</strong></span> Content-Encoding HTTP header specifying what content
encodings have been applied to the object and what decoding mechanisms
must be applied in order to obtain the media-type referenced by the
Content-Type field.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentDisposition</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The <span class="strong"><strong>optional</strong></span> Content-Disposition HTTP header, which specifies
presentational information such as the recommended filename for the
object to be saved as.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ContentControl</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The <span class="strong"><strong>optional</strong></span> Cache-Control HTTP header which allows the user to
specify caching behavior along the HTTP request/reply chain.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelAwsS3ServerSideEncryption</code></p></td><td align="left" valign="top"><p>String</p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.16:</strong></span> The server-side encryption algorithm when encrypting the
object using AWS-managed keys.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="AWS-S3-AdvancedAmazonS3configuration"></a>Advanced AmazonS3 configuration</h3></div></div></div><p>If your Camel Application is running behind a firewall or if you need to
have more control over the <code class="literal">AmazonS3</code> instance configuration, you can
create your own instance:</p><pre class="programlisting">AWSCredentials awsCredentials = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> BasicAWSCredentials(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myAccessKey"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mySecretKey"</em></strong>);

ClientConfiguration clientConfiguration = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> ClientConfiguration();
clientConfiguration.setProxyHost(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"http://myProxyHost"</em></strong>);
clientConfiguration.setProxyPort(<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">8080</span>);

AmazonS3 client = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> AmazonS3Client(awsCredentials, clientConfiguration);

registry.bind(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"client"</em></strong>, client);</pre><p>and refer to it in your Camel aws-s3 component configuration:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"aws-s3://MyBucket?amazonS3Client=#client&amp;delay=5000&amp;maxMessagesPerPoll=5"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="AWS-S3-Dependencies"></a>Dependencies</h2></div></div></div><p>Maven users will need to add the following dependency to their pom.xml.</p><p><span class="strong"><strong>pom.xml</strong></span></p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-aws<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>${camel-version}<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><p>where <code class="literal">${camel-version</code>} must be replaced by the actual version of Camel
(2.8 or higher).</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="AWS-S3-SeeAlso"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="configuring-camel.html" target="_top">Configuring Camel</a></li><li class="listitem"><a class="link" href="component.html" target="_top">Component</a></li><li class="listitem"><a class="link" href="endpoint.html" target="_top">Endpoint</a></li><li class="listitem"><a class="link" href="getting-started.html" target="_top">Getting Started</a></li><li class="listitem"><a class="link" href="aws.html" target="_top">AWS Component</a></li></ul></div></div></div></body></html>