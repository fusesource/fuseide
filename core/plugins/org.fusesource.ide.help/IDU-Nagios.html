<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Nagios</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-MyBatis.html" title="MyBatis"><link rel="next" href="IDU-NATS.html" title="NATS"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-Nagios"></a>Nagios</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Nagios_HSH_Nagios"></a>Nagios</h2></div></div></div><p><span class="bold"><strong>Available as of Apache Camel 2.3</strong></span>
    </p><p>The <a href="IDU-Nagios.html" class="olink">Nagios</a> component allows you to send passive
      checks to <a class="link" href="http://nagios.org" target="_top">Nagios</a>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Nagios_HSH_URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">nagios://host[:port][?Options]</pre><p>Apache Camel provides two abilities with the <a href="IDU-Nagios.html" class="olink">Nagios</a>
      component. You can send passive check messages by sending a message to its endpoint. Apache Camel
      also provides a <a class="link" href="http://camel.apache.org/camel-jmx.html" target="_top">EventNotifer</a> which allows you to send
      notifications to Nagios.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Nagios_HSH_Options"></a>Options</h2></div></div></div><p>
      
    </p><table id="d0e131568"><tr>
        <th> Name </th>
        <th> Default Value </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">host</code>
        </td>
        <td> none </td>
        <td> This is the address of the <a href="IDU-Nagios.html" class="olink">Nagios</a> host where
          checks should be send. </td>
      </tr><tr>
        <td><code class="literal">port</code>
        </td>
        <td></td>
        <td> The port number of the host. </td>
      </tr><tr>
        <td><code class="literal">password</code>
        </td>
        <td></td>
        <td> Password to be authenticated when sending checks to Nagios. </td>
      </tr><tr>
        <td><code class="literal">connectionTimeout</code>
        </td>
        <td> 5000 </td>
        <td> Connection timeout in millis. </td>
      </tr><tr>
        <td><code class="literal">timeout</code>
        </td>
        <td> 5000 </td>
        <td> Sending timeout in millis. </td>
      </tr><tr>
        <td><code class="literal">nagiosSettings</code>
        </td>
        <td></td>
        <td> To use an already configured <code class="literal">com.googlecode.jsendnsca.core.NagiosSettings</code> object.
          Then any of the other options are not in use, if using this. </td>
      </tr><tr>
        <td><code class="literal">sendSync</code>
        </td>
        <td><code class="literal">true</code>
        </td>
        <td> Whether or not to use synchronous when sending a passive check. Setting it to
            <code class="literal">false</code> will allow Apache Camel to continue routing the message and the
          passive check message will be send asynchronously. </td>
      </tr><tr>
        <td><code class="literal">encryptionMethod</code>
        </td>
        <td><code class="literal">No</code>
        </td>
        <td> *Camel 2.9:* To specify an encryption method. Possible values: <code class="literal">No</code>, <code class="literal">Xor</code>, or <code class="literal">TripleDes</code>. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Nagios_HSH_Headers"></a>Headers</h2></div></div></div><p>
      
    </p><table id="d0e131711"><tr>
        <th> Name </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelNagiosHostName</code>
        </td>
        <td> This is the address of the <a href="IDU-Nagios.html" class="olink">Nagios</a> host where
          checks should be send. This header will override any existing hostname configured on the
          endpoint. </td>
      </tr><tr>
        <td><code class="literal">CamelNagiosLevel</code>
        </td>
        <td> This is the severity level. You can use values <code class="literal">CRITICAL, WARNING,
          OK</code>. Apache Camel will by default use <code class="literal">OK</code>. </td>
      </tr><tr>
        <td><code class="literal">CamelNagiosServiceName</code>
        </td>
        <td> The servie name. Will default use the <a class="link" href="http://camel.apache.org/camelcontext.html" target="_top">CamelContext</a>
          name. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Nagios_HSH_Sendingmessageexamples"></a>Sending message examples</h2></div></div></div><p>You can send a message to Nagios where the message payload contains the message. By
      default it will be <code class="literal">OK</code> level and use the <a class="link" href="http://camel.apache.org/camelcontext.html" target="_top">CamelContext</a> name as the service name. You can overrule these values using headers
      as shown above.</p><p>For example we send the <code class="literal">Hello Nagios</code> message to Nagios as
      follows:</p><pre class="programlisting">    template.sendBody("direct:start", "Hello Nagios");

    from("direct:start").to("nagios:127.0.0.1:5667?password=secret").to("mock:result");</pre><p>To send a <code class="literal">CRITICAL</code> message you can send the headers such as:</p><pre class="programlisting">        Map headers = new HashMap();
        headers.put(NagiosConstants.LEVEL, "CRITICAL");
        headers.put(NagiosConstants.HOST_NAME, "myHost");
        headers.put(NagiosConstants.SERVICE_NAME, "myService");
        template.sendBodyAndHeaders("direct:start", "Hello Nagios", headers);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Nagios_HSH_UsingNagiosEventNotifer"></a>Using NagiosEventNotifer
    </h2></div></div></div><p>The <a href="IDU-Nagios.html" class="olink">Nagios</a> component also provides an <a class="link" href="http://camel.apache.org/camel-jmx.html" target="_top">EventNotifer</a> which you can use to send events to Nagios. For
      example we can enable this from Java as follows:</p><pre class="programlisting">
        NagiosEventNotifier notifier = new NagiosEventNotifier();
        notifier.getConfiguration().setHost("localhost");
        notifier.getConfiguration().setPort(5667);
        notifier.getConfiguration().setPassword("password");

        CamelContext context = ... 
        context.getManagementStrategy().addEventNotifier(notifier);
        return context;

</pre><p>In Spring XML its just a matter of defining a Spring bean with the type
        <code class="literal">EventNotifier</code> and Apache Camel will pick it up as documented here: <a class="link" href="http://camel.apache.org/advanced-configuration-of-camelcontext-using-spring.html" target="_top">Advanced configuration of
        CamelContext using Spring</a>.</p></div></div></body></html>