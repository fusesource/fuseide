<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>DataSet</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-DataFormatComponent.html" title="DataFormat Component"><link rel="next" href="IDU-Direct.html" title="Direct"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-DataSet"></a>DataSet</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-DataSet_HSH_DataSetComponent"></a>DataSet Component</h2></div></div></div><p>The DataSet component (available since 1.3.0) provides a mechanism to easily perform load
      &amp; soak testing of your system. It works by allowing you to create <a class="link" href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/component/dataset/DataSet.html" target="_top">DataSet instances</a> both as a source of messages and as a way to assert that the data
      set is received.</p><p>Apache Camel will use the <a href="IDU-Log.html" class="olink">throughput logger</a> when sending
      dataset's. </p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-DataSet_HSH_URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">dataset:name[?options]</pre><p>Where <span class="bold"><strong>name</strong></span> is used to find the <a class="link" href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/component/dataset/DataSet.html" target="_top">DataSet instance</a> in the Registry
    </p><p>Apache Camel ships with a support implementation of
                <code class="literal">org.apache.camel.component.dataset.DataSet</code>, the
                <code class="literal">org.apache.camel.component.dataset.DataSetSupport</code> class, that can
            be used as a base for implementing your own DataSet. Apache Camel also ships with some
            implementations that can be used for testing: the
                <code class="literal">org.apache.camel.component.dataset.SimpleDataSet</code>,
                <code class="code">org.apache.camel.component.dataset.ListDataSet</code>, and
                <code class="code">org.apache.camel.component.dataset.FileDataSet</code>, all of which extend
                <code class="code">DataSetSupport</code>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-DataSet_HSH_Options"></a>Options</h2></div></div></div><table id="d0e70535"><tr>
        <th> Option </th>
        <th> Default </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">produceDelay</code>
        </td>
        <td> 3 </td>
        <td> Allows a delay in ms to be specified, which causes producers to pause in order to
          simulate slow producers. Uses a minimum of 3 ms delay unless you set this option to -1 to
          force no delay at all. </td>
      </tr><tr>
        <td><code class="literal">consumeDelay</code>
        </td>
        <td> 0 </td>
        <td> Allows a delay in ms to be specified, which causes consumers to pause in order to
          simulate slow consumers. </td>
      </tr><tr>
        <td><code class="literal">preloadSize</code>
        </td>
        <td> 0 </td>
        <td> Sets how many messages should be preloaded (sent) before the route completes its
          initialization. </td>
      </tr><tr>
        <td><code class="literal">initialDelay</code>
        </td>
        <td> 1000 </td>
        <td><span class="bold"><strong>Camel 2.1:</strong></span> Time period in millis to wait before starting sending messages. </td>
      </tr><tr>
        <td><code class="literal">minRate</code>
        </td>
        <td> 0 </td>
        <td> Wait until the DataSet contains at least this number of messages </td>
      </tr><tr>
                <td><code class="literal">dataSetIndex</code>
                </td>
                <td>
                    <code class="code">lenient</code>
                </td>
                <td>
                    <p><span class="bold"><strong>Camel 2.17:</strong></span> Controls the behavior of the
                            <code class="code">CamelDataSetIndex</code> header. The supported values are
                            <code class="code">strict</code>, <code class="code">lenient</code> and <code class="code">off</code>. The
                        default behaviour prior to Camel 2.17 can be restored by setting
                            <code class="code">dataSetIndex=strict</code>.</p>
                    <p>For consumers:</p>
                    <div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">strict</code> or <code class="code">lenient</code></span></dt><dd><p>The <code class="code">CamelDataSetIndex</code> header will always be
                                    set.</p></dd><dt><span class="term"><code class="code">off</code></span></dt><dd><p>The <code class="code">CamelDataSetIndex</code> header will not be
                                    set.</p></dd></dl></div>
                    <p>For producers:</p>
                    <div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">strict</code></span></dt><dd><p>The <code class="code">CamelDataSetIndex</code> header must be present and
                                    the value of the header will be verified.</p></dd><dt><span class="term"><code class="code">lenient</code></span></dt><dd><p>If the <code class="code">CamelDataSetIndex</code> header is present, the
                                    value of the header will be verified. If the header is not
                                    present, it will be set.</p></dd><dt><span class="term"><code class="code">off</code></span></dt><dd><p>If the <code class="code">CamelDataSetIndex</code> header is present, the
                                    value of the header will not be verified. If the header is not
                                    present, it will not be set.</p></dd></dl></div>
                </td>
            </tr></table><p>You can append query options to the URI in the following format,
        <code class="literal">?option=value&amp;option=value&amp;...</code>
    </p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-DataSet_HSH_ConfiguringDataSet"></a>Configuring DataSet</h2></div></div></div><p>Apache Camel will lookup in the Registry for a bean
      implementing the DataSet interface. So you can register your own DataSet as:</p><pre class="programlisting">   &lt;bean id="myDataSet" class="com.mycompany.MyDataSet"&gt;
      &lt;property name="size" value="100"/&gt;
   &lt;/bean&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-DataSet_HSH_Example"></a>Example</h2></div></div></div><p>For example, to test that a set of messages are sent to a queue and then consumed from the
      queue without losing any messages:</p><pre class="programlisting">// send the dataset to a queue
from("dataset:foo").to("activemq:SomeQueue");

// now lets test that the messages are consumed correctly
from("activemq:SomeQueue").to("dataset:foo");</pre><p>The above would look in the Registry to find the <span class="bold"><strong>foo</strong></span> DataSet instance which is used to create the messages.</p><p>Then you create a DataSet implementation, such as using the
        <code class="literal">SimpleDataSet</code> as described below, configuring things like how big the
      data set is and what the messages look like etc.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-DataSet_HSH_PropertiesonSimpleDataSet"></a>Properties on DataSetSupport</h2></div></div></div><table id="d0e70747"><tr><th><p>Property</p></th><th><p>Type</p></th><th><p>Default</p></th><th><p>Description</p></th></tr><tr><td><p><code class="code">defaultHeaders</code></p></td><td><p><code class="code">Map&lt;String,Object&gt;</code></p></td><td><p><code class="code">null</code></p></td><td><p>Specifies the default message body. For SimpleDataSet it is a constant payload; though if you want to create custom payloads per message, create your own derivation of <code class="code">DataSetSupport</code>.</p></td></tr><tr><td><p><code class="code">outputTransformer</code></p></td><td><p><code class="code">org.apache.camel.Processor</code></p></td><td><p>null</p></td><td><p> </p></td></tr><tr><td><p><code class="code">size</code></p></td><td><p><code class="code">long</code></p></td><td><p><code class="code">10</code></p></td><td><p>Specifies how many messages to send/consume.</p></td></tr><tr><td><code class="code">reportCount</code></td><td><code class="code">long</code></td><td><code class="code">-1</code></td><td>Specifies the number of messages to be received before reporting progress. Useful for showing progress of a large load test. If &lt; 0, then <code class="code">size</code> / 5, if is 0 then <code class="code">size</code>, else set to <code class="code">reportCount</code> value.</td></tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e70832"></a>SimpleDataSet</h2></div></div></div><p>The <code class="code">SimpleDataSet</code> extends <code class="code">DataSetSupport</code>, and adds a default body.</p><div class="table"><a name="d0e70843"></a><p class="title"><b>Table&nbsp;14.&nbsp;Additional Properties on SimpleDataSet</b></p><div class="table-contents"><table id="d0e70843"><tbody><tr><th><p>Property</p></th><th><p>Type</p></th><th><p>Default</p></th><th><p>Description</p></th></tr><tr><td><p><code class="code">defaultBody</code></p></td><td><p><code class="code">Object</code></p></td><td><p><code class="code">&lt;hello&gt;world!&lt;/hello&gt;</code></p></td><td><p>Specifies the default message body. For SimpleDataSet it is a constant payload; though if you want to create custom payloads per message, create your own derivation of <code class="code">DataSetSupport</code>.</p></td></tr></tbody></table></div></div><br class="table-break"></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e70879"></a>ListDataSet</h2></div></div></div><p>The List<code class="code">DataSet</code> extends <code class="code">DataSetSupport</code>, and adds a list of default bodies.</p><div class="table"><a name="d0e70890"></a><p class="title"><b>Table&nbsp;15.&nbsp;Additional Properties on ListDataSet</b></p><div class="table-contents"><table id="d0e70890"><tbody><tr><th><p>Property</p></th><th><p>Type</p></th><th><p>Default</p></th><th><p>Description</p></th></tr><tr><td><p><code class="code">defaultBodies</code></p></td><td><p><code class="code">Object</code></p></td><td><p><code class="code">&lt;hello&gt;world!&lt;/hello&gt;</code></p></td><td><p> </p></td></tr><tr><td><p><code class="code">size</code></p></td><td><p><code class="code">long</code></p></td><td><p><code class="code">10</code></p></td><td><p> </p></td></tr></tbody></table></div></div><br class="table-break"></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e70939"></a>FileDataSet</h2></div></div></div><p>The <code class="code">SimpleDataSet</code> extends <code class="code">ListDataSet</code>, and adds support for loading the bodies from a file.</p><div class="table"><a name="d0e70950"></a><p class="title"><b>Table&nbsp;16.&nbsp;Additional Properties on FileDataSet</b></p><div class="table-contents"><table id="d0e70950"><tbody><tr><th><p>Property</p></th><th><p>Type</p></th><th><p>Default</p></th><th><p>Description</p></th></tr><tr><td><p><code class="code">sourceFile</code></p></td><td><p><code class="code">String</code></p></td><td><p>null</p></td><td><p> </p></td></tr><tr><td><p><code class="code">delimiter</code></p></td><td><p><code class="code">String</code></p></td><td><p>\z</p></td><td><p> </p></td></tr></tbody></table></div></div><br class="table-break"></div></div></body></html>