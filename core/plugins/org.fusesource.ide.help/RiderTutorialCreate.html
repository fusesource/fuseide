<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Defining a Route</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="RiderTT.html" title="Part&nbsp;I.&nbsp;Tooling Tutorials"><link rel="prev" href="RiderTutorialSetup.html" title="Setting up your environment"><link rel="next" href="RiderTutorialRun.html" title="Running a Route"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="RiderTutorialCreate"></a>Defining a Route</h2></div></div></div><p>This tutorial walks you through adding and configuring endpoints to a route. Endpoints define the source and sink for messages traveling through the route.
For your <code class="literal">ZooOrderApp</code> project, the starting (source) endpoint is the folder containing the XML message files. The sink (finishing) endpoint is another folder that you specify in your project.</p><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_goals_2"></a>Goals</h2></div></div></div><p>In this tutorial you complete the following tasks:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Add source and sink endpoints to the route</li><li class="listitem">Configure the endpoints</li><li class="listitem">Connect the endpoints</li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_before_you_begin"></a>Before you begin</h2></div></div></div><p>Before you start this tutorial:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">You must set up your workspace environment, as described in the <a class="xref" href="RiderTutorialSetup.html" title="Setting up your environment"><i>Setting up your environment</i></a> tutorial.</li><li class="listitem">In CodeReady Studio, open your <code class="literal">ZooOrderApp</code> project&#8217;s <code class="literal">/src/main/resources/OSGI-INF/blueprint/blueprint.xml</code> file in the <span class="strong"><strong>Editor</strong></span> view.</li><li class="listitem">If needed, click the <span class="strong"><strong>Design</strong></span> tab at the bottom of the <span class="strong"><strong>Editor</strong></span> view to see the graphic display of the initial route, labeled <code class="literal">Route_route1</code>.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sourceEndpoint"></a>Configuring the source endpoint</h2></div></div></div><p>Follow these steps to configure the <code class="literal">src/data</code> folder as the route&#8217;s source endpoint:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">Drag a <span class="strong"><strong>File</strong></span> component (
<span class="inlinemediaobject"><img src="images/file.png" alt="File icon"></span>) from the <span class="strong"><strong>Palette</strong></span>'s
<span class="strong"><strong>Components</strong></span> drawer to the canvas, and drop it in the
<code class="literal">Route_route1</code> container node.</p><p class="simpara">The <span class="strong"><strong>File</strong></span> component changes to a <code class="literal">From _from1</code> node
inside the <code class="literal">Route_route1</code> container node.</p></li><li class="listitem"><p class="simpara">On the canvas, select the <code class="literal">From _from1</code> node.</p><p class="simpara">The <span class="strong"><strong>Properties</strong></span> view, located below the canvas, displays
the node&#8217;s property fields for editing.</p></li><li class="listitem"><p class="simpara">To specify the source directory for the message files, in the <span class="strong"><strong>Properties</strong></span> view, click the
<span class="strong"><strong>Advanced</strong></span> tab:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/FileSysCompProps1Tut.png" alt="FileSysCompProps1Tut"></div></div></li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Directory Name</strong></span> field, enter
<code class="literal"><span class="strong"><strong>src/data</strong></span></code>:</p><div class="informalfigure"><div class="mediaobject"><img src="images/FileSystemCompPropsTut.png" alt="FileSystemCompPropsTut"></div></div><p class="simpara">The path <code class="literal">src/data</code> is relative to the project&#8217;s directory.</p></li><li class="listitem"><p class="simpara">On the <span class="strong"><strong>Consumer</strong></span> tab, enable the <span class="strong"><strong>Noop</strong></span> option by
clicking its check box.</p><p class="simpara">The <span class="strong"><strong>Noop</strong></span> option prevents the
<code class="literal">message#.xml</code> files from being deleted from the
<code class="literal">src/data</code> folder, and it enables
idempotency to ensure that each <code class="literal">message#.xml</code> file is
consumed only once.</p></li><li class="listitem"><p class="simpara">Select the <span class="strong"><strong>Details</strong></span> tab to open the file node&#8217;s
<span class="strong"><strong>Details</strong></span> page.</p><p class="simpara">Notice that the tooling automatically populates the <span class="strong"><strong>Uri</strong></span> field with
the <span class="strong"><strong>Directory Name</strong></span> and <span class="strong"><strong>Noop</strong></span> properties
you configured on the <span class="strong"><strong>Advanced</strong></span> tab. It also populates the
<span class="strong"><strong>Id</strong></span> field with an autogenerated ID (<code class="literal">_from1</code>):</p><div class="informalfigure"><div class="mediaobject"><img src="images/FileSystemCompPropsTut2.png" alt="FileSystemCompPropsTut2"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The tooling prefixes autogenerated ID values with an underscore (_). You can optionally change the ID value. The underscore prefix is not a requirement.</p></td></tr></table></div><p class="simpara">Leave the autogenerated <span class="strong"><strong>Id</strong></span> as is.</p></li><li class="listitem">Select <span class="strong"><strong>File</strong></span> &#8594; <span class="strong"><strong>Save</strong></span> to save the route.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sinkEndpoint"></a>Configuring the sink endpoint</h2></div></div></div><p>To add and configure the route&#8217;s sink (target) endpoint:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">Drag another <span class="strong"><strong>File</strong></span> component from the
<span class="strong"><strong>Palette</strong></span>'s <span class="strong"><strong>Components</strong></span> drawer and
drop it in the <code class="literal">Route_route1</code> container node.</p><p class="simpara">The <span class="strong"><strong>File</strong></span> component changes to a <code class="literal">To_to1</code> node
inside the <code class="literal">Route_route1</code> container node.</p></li><li class="listitem"><p class="simpara">On the canvas, select the <code class="literal">To_to1</code> node.</p><p class="simpara">The <span class="strong"><strong>Properties</strong></span> view, located below the canvas, displays
the node&#8217;s property fields for editing.</p></li><li class="listitem"><p class="simpara">On the <span class="strong"><strong>Details</strong></span> tab:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">In the <span class="strong"><strong>Uri</strong></span> field, type <code class="literal"><span class="strong"><strong>file:target/messages/received</strong></span></code>.</li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Id</strong></span> field, type <code class="literal"><span class="strong"><strong>_Received</strong></span></code>.</p><div class="informalfigure"><div class="mediaobject"><img src="images/FilesysTargetCompPropsTut.png" alt="FilesysTargetCompPropsTut"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The tooling will create the <code class="literal">target/messages/received</code> folder at
runtime.</p></td></tr></table></div></li></ol></div></li><li class="listitem"><p class="simpara">In the <code class="literal">Route_route1</code> container, select the <span class="strong"><strong>From
_from1</strong></span> node and drag its connector arrow (
<span class="inlinemediaobject"><img src="images/ConnectorArrow.jpg" alt="connector arrow icon"></span>) over the <span class="strong"><strong>To_Received</strong></span> node, and then release it:</p><div class="informalfigure"><div class="mediaobject"><img src="images/CompletedRoute1.png" alt="CompletedRoute1"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The two file nodes are connected and aligned on the canvas according to the route editor&#8217;s
layout direction preference setting. The choices are <span class="strong"><strong>Down</strong></span> (the default) and <span class="strong"><strong>Right</strong></span>.</p><p>To access the route editor 's layout preference options:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">On Linux and Windows machines, select <span class="strong"><strong>Windows</strong></span> &#8594; <span class="strong"><strong>Preferences</strong></span> &#8594; <span class="strong"><strong>Fuse Tooling</strong></span> &#8594; <span class="strong"><strong>Editor</strong></span> &#8594; <span class="strong"><strong>Choose the layout direction for the diagram editor</strong></span>.</li><li class="listitem">On OS X, select <span class="strong"><strong>CodeReady Studio</strong></span> &#8594; <span class="strong"><strong>Preferences</strong></span> &#8594; <span class="strong"><strong>Fuse Tooling</strong></span> &#8594; <span class="strong"><strong>Editor</strong></span> &#8594; <span class="strong"><strong>Choose the layout direction for the diagram editor</strong></span>.</li></ul></div></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you do not connect the nodes before you close the project, the tooling
automatically connects them when you reopen it.</p></td></tr></table></div></li><li class="listitem"><span class="strong"><strong>Save</strong></span> the route.</li><li class="listitem"><p class="simpara">Click the <span class="strong"><strong>Source</strong></span> tab at the bottom of the canvas to display the XML for the route:</p><pre class="screen">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0
    https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
    http://camel.apache.org/schema/blueprint
    https://camel.apache.org/schema/blueprint/camel-blueprint.xsd"&gt;

    &lt;camelContext id="_context1" xmlns="http://camel.apache.org/schema/blueprint"&gt;
        &lt;route id="_route1"&gt;
            &lt;from id="_from1" uri="file:src/data?noop=true"/&gt;
            &lt;to id="_Received" uri="file:target/messages/received"/&gt;
        &lt;/route&gt;
    &lt;/camelContext&gt;
&lt;/blueprint&gt;</pre></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_next_steps_2"></a>Next steps</h2></div></div></div><p>Now that you have added and configured endpoints in the route, you can run the route as described in the <a class="xref" href="RiderTutorialRun.html" title="Running a Route"><i>Running a Route</i></a> tutorial.</p></div></div></body></html>