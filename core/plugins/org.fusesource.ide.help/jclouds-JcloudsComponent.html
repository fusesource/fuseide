<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Jclouds Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="JCache-JCache.html" title="JCache Component"><link rel="next" href="JCR-JCRComponent.html" title="JCR Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="jclouds-JcloudsComponent"></a>Jclouds Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-Configuringthecomponent">Configuring the component</a></span></dt><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-Options">Jclouds Options</a></span></dt><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-BlobstoreURIOptions">Blobstore URI Options</a></span></dt><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-BlobstoreUsageSamples">Blobstore Usage Samples</a></span></dt><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-ComputeUsageSamples">Compute Usage Samples</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel 2.9</strong></span></p><p>This component allows interaction with cloud provider key-value engines
(blobstores) and compute services. The component uses
<a class="link" href="http://code.google.com/p/jclouds" target="_top">jclouds</a> which is
 a library that provides abstractions for blobstores and compute
services.</p><p><span class="strong"><strong>ComputeService</strong></span> simplifies the task of managing machines in the cloud.
For example, you can use ComputeService to start 5 machines and install
your software on them.
 <span class="strong"><strong>BlobStore</strong></span> simplifies dealing with key-value providers such as Amazon
S3. For example, BlobStore can give you a simple Map view of a
container.</p><p>The camel jclouds component allows you to use both abstractions, as it
specifes two types of endpoint the JcloudsBlobStoreEndpoint and the
JcloudsComputeEndpoint. You can have both producers and consumers on a
blobstore endpoint but you can only have producers on compute endpoints.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-jclouds<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jclouds-Configuringthecomponent"></a>Configuring the component</h2></div></div></div><p>The camel jclouds component will make use of multiple jclouds blobstores
and compute services as long as they are passed to the component during
initialization. The component accepts a list blobstores and compute
services. Here is how it can be configured.</p><pre class="programlisting">    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"jclouds"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.apache.camel.component.jclouds.JcloudsComponent"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"computeServices"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;list&gt;</strong>
                <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;ref</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">bean</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"computeService"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/list&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/property&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;property</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"blobStores"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;list&gt;</strong>
                <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;ref</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">bean</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"blobStore"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/list&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/property&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>

    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- Creating a blobstore from spring / blueprint xml --&gt;</em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"blobStoreContextFactory"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.jclouds.blobstore.BlobStoreContextFactory"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"blobStoreContext"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-bean</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"blobStoreContextFactory"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"createContext"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constructor-arg</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"provider"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"PROVIDER_NAME"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constructor-arg</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"identity"</span>  <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"IDENTITY"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constructor-arg</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"credential"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"CREDENTIAL"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"blobStore"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-bean</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"blobStoreContext"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"getBlobStore"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>

    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- Creating a compute service from spring / blueprint xml --&gt;</em>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"computeServiceContextFactory"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"org.jclouds.compute.ComputeServiceContextFactory"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"computeServiceContext"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-bean</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"computeServiceContextFactory"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"createContext"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constructor-arg</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"provider"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"PROVIDER_NAME"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constructor-arg</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"identity"</span>  <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"IDENTITY"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constructor-arg</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"credential"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"CREDENTIAL"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"computeService"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-bean</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"computeServiceContext"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"getComputeService"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong></pre><p>As you can see the component is capable of handling multiple blobstores
and compute services. The actual implementation that will be used by
each endpoint is specified by passing the provider inside the URI.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jclouds-Options"></a>Jclouds Options</h2></div></div></div><pre class="programlisting">jclouds:blobstore:[provider id][?options]
jclouds:compute:[provider id][?options]</pre><p>The <span class="strong"><strong>provider id</strong></span> is the name of the cloud provider that provides the
target service (<span class="emphasis"><em>e.g. aws-s3 or aws_ec2</em></span>).</p><p>You can append query options to the URI in the following format,
<code class="literal">?option=value&amp;option=value&amp;&#8230;&#8203;</code></p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jclouds-BlobstoreURIOptions"></a>Blobstore URI Options</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-MessageHeadersforblobstore">Message Headers for blobstore</a></span></dt></dl></div><p>The JClouds component supports 2 options which are listed below.</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="70%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>blobStores</p></td><td align="left" valign="top"><p><code class="literal">List</code></p></td><td align="left" valign="top"><p>To use the given BlobStore which must be configured when using blobstore.</p></td></tr><tr><td align="left" valign="top"><p>computeServices</p></td><td align="left" valign="top"><p><code class="literal">List</code></p></td><td align="left" valign="top"><p>To use the given ComputeService which must be configured when use compute.</p></td></tr></tbody></table></div><p>{% endraw %}</p><p>The JClouds component supports 17 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>command</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">JcloudsCommand</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> What command to execute such as blobstore or compute.</p></td></tr><tr><td align="left" valign="top"><p>providerId</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The name of the cloud provider that provides the target service (e.g. aws-s3 or aws_ec2).</p></td></tr><tr><td align="left" valign="top"><p>bridgeErrorHandler</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler which mean any exceptions occurred while the consumer is trying to pickup incoming messages or the likes will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exceptionHandler</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExceptionHandler</code></p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exchangePattern</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExchangePattern</code></p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr><tr><td align="left" valign="top"><p>blobName</p></td><td align="left" valign="top"><p>blobstore</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The name of the blob.</p></td></tr><tr><td align="left" valign="top"><p>container</p></td><td align="left" valign="top"><p>blobstore</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The name of the blob container.</p></td></tr><tr><td align="left" valign="top"><p>directory</p></td><td align="left" valign="top"><p>blobstore</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>An optional directory name to use</p></td></tr><tr><td align="left" valign="top"><p>group</p></td><td align="left" valign="top"><p>compute</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The group that will be assigned to the newly created node. Values depend on the actual cloud provider.</p></td></tr><tr><td align="left" valign="top"><p>hardwareId</p></td><td align="left" valign="top"><p>compute</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The hardware that will be used for creating a node. Values depend on the actual cloud provider.</p></td></tr><tr><td align="left" valign="top"><p>imageId</p></td><td align="left" valign="top"><p>compute</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The imageId that will be used for creating a node. Values depend on the actual cloud provider.</p></td></tr><tr><td align="left" valign="top"><p>locationId</p></td><td align="left" valign="top"><p>compute</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The location that will be used for creating a node. Values depend on the actual cloud provider.</p></td></tr><tr><td align="left" valign="top"><p>nodeId</p></td><td align="left" valign="top"><p>compute</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The id of the node that will run the script or destroyed.</p></td></tr><tr><td align="left" valign="top"><p>nodeState</p></td><td align="left" valign="top"><p>compute</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>To filter by node status to only select running nodes etc.</p></td></tr><tr><td align="left" valign="top"><p>operation</p></td><td align="left" valign="top"><p>compute</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Specifies the type of operation that will be performed to the blobstore.</p></td></tr><tr><td align="left" valign="top"><p>user</p></td><td align="left" valign="top"><p>compute</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The user on the target node that will run the script.</p></td></tr></tbody></table></div><p>{% endraw %}</p><p>You can have as many of these options as you like.</p><pre class="programlisting">jclouds:blobstore:aws-s3?operation=CamelJcloudsGet&amp;container=mycontainer&amp;blobName=someblob</pre><p>For producer endpoint you can override all of the above URI options by
passing the appropriate headers to the message.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jclouds-MessageHeadersforblobstore"></a>Message Headers for blobstore</h3></div></div></div><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="90%" class="col_2"></colgroup><thead><tr><th align="left" valign="top">Header</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelJcloudsOperation</code></p></td><td align="left" valign="top"><p>The operation to be performed on the blob. The valid options are
* PUT
* GET</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelJcloudsContainer</code></p></td><td align="left" valign="top"><p>The name of the blob container.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelJcloudsBlobName</code></p></td><td align="left" valign="top"><p>The name of the blob.</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jclouds-BlobstoreUsageSamples"></a>Blobstore Usage Samples</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-Example1-Puttingtotheblob">Example 1: Putting to the blob</a></span></dt><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-Example2-GettingReadingfromablob">Example 2: Getting/Reading from a blob</a></span></dt><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-Example3-Consumingablob">Example 3: Consuming a blob</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jclouds-Example1-Puttingtotheblob"></a>Example 1: Putting to the blob</h3></div></div></div><p>This example will show you how you can store any message inside a blob
using the jclouds component.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"jclouds:blobstore:aws-s3"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"?operation=PUT"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&amp;container=mycontainer"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&amp;blobName=myblob"</em></strong>);</pre><p>In the above example you can override any of the URI parameters with
headers on the message.
Here is how the above example would look like using xml to define our
route.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"jclouds:blobstore:aws-s3?operation=PUT&amp;container=mycontainer&amp;blobName=myblob"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jclouds-Example2-GettingReadingfromablob"></a>Example 2: Getting/Reading from a blob</h3></div></div></div><p>This example will show you how you can read the contnet of a blob using
the jclouds component.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"jclouds:blobstore:aws-s3"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"?operation=GET"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&amp;container=mycontainer"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&amp;blobName=myblob"</em></strong>);</pre><p>In the above example you can override any of the URI parameters with
headers on the message.
 Here is how the above example would look like using xml to define our
route.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"jclouds:blobstore:aws-s3?operation=PUT&amp;container=mycontainer&amp;blobName=myblob"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jclouds-Example3-Consumingablob"></a>Example 3: Consuming a blob</h3></div></div></div><p>This example will consume all blob that are under the specified
container. The generated exchange will contain the payload of the blob
as body.</p><pre class="programlisting">    from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"jclouds:blobstore:aws-s3"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"?container=mycontainer"</em></strong>)
        .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:next"</em></strong>);</pre><p>You can achieve the same goal by using xml, as you can see below.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"jclouds:blobstore:aws-s3?operation=GET&amp;container=mycontainer&amp;blobName=myblob"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:next"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><pre class="programlisting">jclouds:compute:aws-ec2?operation=CamelJcloudsCreateNode&amp;imageId=AMI_XXXXX&amp;locationId=eu-west-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1</span>&amp;group=mygroup</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jclouds-ComputeUsageSamples"></a>Compute Usage Samples</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-Example1-Listingtheavailableimages.">Example 1: Listing the available images.</a></span></dt><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-Example2-Createanewnode.">Example 2: Create a new node.</a></span></dt><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-Example3-Runashellscriptonrunningnode.">Example 3: Run a shell script on running node.</a></span></dt><dt><span class="section"><a href="jclouds-JcloudsComponent.html#jclouds-Seealso">See also</a></span></dt></dl></div><p>Below are some examples that demonstrate the use of jclouds compute
producer in java dsl and spring/blueprint xml.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jclouds-Example1-Listingtheavailableimages."></a>Example 1: Listing the available images.</h3></div></div></div><pre class="programlisting">    from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"jclouds:compute:aws-ec2"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&amp;operation=CamelJCloudsListImages"</em></strong>)
        .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:next"</em></strong>);</pre><p>This will create a message that will contain the list of images inside
its body. You can also do the same using xml.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"jclouds:compute:aws-ec2?operation=CamelJCloudsListImages"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:next"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jclouds-Example2-Createanewnode."></a>Example 2: Create a new node.</h3></div></div></div><pre class="programlisting">    from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).
    to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"jclouds:compute:aws-ec2"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"?operation=CamelJcloudsCreateNode"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&amp;imageId=AMI_XXXXX"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&amp;locationId=XXXXX"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&amp;group=myGroup"</em></strong>);</pre><p>This will create a new node on the cloud provider. The out message in
this case will be a set of metadata that contains information about the
newly created node (e.g. the ip, hostname etc). Here is the same using
spring xml.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"jclouds:compute:aws-ec2?operation=CamelJcloudsCreateNode&amp;imageId=AMI_XXXXX&amp;locationId=XXXXX&amp;group=myGroup"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jclouds-Example3-Runashellscriptonrunningnode."></a>Example 3: Run a shell script on running node.</h3></div></div></div><pre class="programlisting">    from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).
    to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"jclouds:compute:aws-ec2"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"?operation=CamelJcloudsRunScript"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"?nodeId=10"</em></strong> +
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"&amp;user=ubuntu"</em></strong>);</pre><p>The sample above will retrieve the body of the in message, which is
expected to contain the shell script to be executed. Once the script is
retrieved, it will be sent to the node for execution under the specified
user (<span class="emphasis"><em>in order case ubuntu</em></span>). The target node is specified using its
nodeId. The nodeId can be retrieved either upon the creation of the
node, it will be part of the resulting metadata or by a executing a
LIST_NODES operation.</p><p><span class="strong"><strong>Note</strong></span> This will require that the compute service that will be passed to
the component, to be initialized with the appropriate jclouds ssh
capable module (<span class="emphasis"><em>e.g. jsch or sshj</em></span>).</p><p>Here is the same using spring xml.</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:start"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"jclouds:compute:aws-ec2?operation=CamelJcloudsListNodes&amp;?nodeId=10&amp;user=ubuntu"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jclouds-Seealso"></a>See also</h3></div></div></div><p>If you want to find out more about jclouds here is list of interesting
resources</p><p><a class="link" href="http://jclouds.incubator.apache.org/documentation/userguide/blobstore-guide/" target="_top">Jclouds
Blobstore wiki</a></p><p><a class="link" href="http://jclouds.incubator.apache.org/documentation/userguide/compute/" target="_top">Jclouds
Compute wiki</a></p></div></div></div></body></html>