<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>To Add Another Route to the CBR Routing Context</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="description" content="This tutorial shows you how to add a second route to the blueprint.xml file in the CBRroute project. The second route:Takes messages directly from the terminal end of the first route's otherwise branchSorts the messages according to customers' countrySends each message to the corresponding CBRroute/target/messages/<country&gt; directory"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="RiderTutorials.html" title="Tutorials"><link rel="prev" href="RiderTutorialCBR.html" title="To Add a Content-Based Router"><link rel="next" href="RiderTutorialDebug.html" title="To Debug a Routing Context"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="RiderTutorialAddRoute"></a>To Add Another Route to the CBR Routing Context</h1></div><div><div class="abstract"><p>This tutorial shows you how to add a second route to the
                    <code class="filename">blueprint.xml</code> file in the <span class="guilabel">CBRroute</span>
                project. The second route:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Takes messages directly from the terminal end of the first route's
                                <span class="italic">otherwise</span> branch</p></li><li class="listitem"><p>Sorts the messages according to customers' country</p></li><li class="listitem"><p>Sends each message to the corresponding
                                <code class="filename">CBRroute/target/messages/&lt;country&gt;</code>
                            directory</p></li></ul></div></div></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e19732"></a>Goals</h2></div></div></div><p>In this tutorial you will:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Reconfigure the existing route for direct connection to a second route</p></li><li class="listitem"><p>Add a second route to your <code class="literal">&lt;camelContext&gt;</code></p></li><li class="listitem"><p>Configure the new route to take messages directly from the otherwise branch of
                    the first route</p></li><li class="listitem"><p>Add a content-based router to the new route</p></li><li class="listitem"><p>Add and configure a message header, logging, and target destination to each
                    output branch of the new route's content-based router</p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e19755"></a>Prerequisites</h2></div></div></div><p>To complete this tutorial you will need the <span class="bold"><strong>CBRroute</strong></span> project you modified in <a href="RiderTutorialCBR.html" class="olink"><i>To Add a Content-Based Router</i></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you skipped any tutorial after <a href="RiderTutorialCreate.html" class="olink"><i>To Create a New Route</i></a>, you can use the
                prefabricated <code class="filename">blueprint5.xml</code> file to work through this tutorial
                (for details, see <a href="RiderTutorialResources.html" class="olink"><i>Using the Fuse Tooling Resource Files</i></a>).</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e19775"></a>Reconfiguring the existing route for direct connection</h2></div></div></div><p>To configure the existing route for direct connection with the new
            route:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Open your <code class="filename">CBRroute/src/main/resources/OSGI-INF/blueprint/blueprint.xml</code> in
                    the route editor.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">Route_route1</span> container to open its properties
                    in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>Scroll down to the <span class="guilabel">Shutdown Route</span> property and select
                <span class="guimenuitem">Default</span> from the
                drop-down menu.</p></li><li class="step"><p>On the canvas, select the terminal file node <span class="guilabel">To_Valid</span> to
                    display its properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Uri</span> field, delete the existing
                    text, and then enter
                        <strong class="userinput"><code>direct:OrderFulfillment</code></strong>.</p></li><li class="step"><p>In the <span class="guilabel">Id</span> field, enter
                    <strong class="userinput"><code>_Fulfill</code></strong>.</p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Instead of repurposing the existing <span class="guilabel">To_Valid</span> terminal file node, you
                could have replaced it with a <span class="guimenu">Components</span> &gt; <span class="guimenuitem">Direct</span> component, configuring it with the same property values as the
                repurposed <span class="guilabel">To_Valid</span> node.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e19848"></a>Adding the second route</h2></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The route editor displays each route in a multiroute routing context in its own
                    <span class="guilabel">Route_</span> container.</p></td></tr></table></div><p>To add a route to the routing context:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Routing</span>
                    drawer and select the <span class="guilabel">Route</span> (<span class="inlinemediaobject"><img src="images/route.png" width="18" alt="Route icon"></span>) pattern.</p></li><li class="step"><p>Drag the <span class="guilabel">Route</span> pattern to the canvas and drop it next to the
                        <span class="guilabel">Route_route1</span> container:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutRte2DropOnCanvas.png" width="456.59999999999997"></div></div><p>The <span class="guilabel">Route</span> pattern becomes the
                        <span class="guilabel">Route_route2</span> container node on the canvas.</p></li><li class="step"><p>Click the <span class="guilabel">Route_route2</span> container node to display its
                    properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>Leave each of the properties as is. </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>As your multiroute routing context grows in complexity, you may want to focus the route editor
                on an individual route while you work on it. To do so, in <span class="guilabel">Project
                    Explorer</span>, double-click the route you want the route editor to display
                on the canvas; for example <span class="guilabel">Route_route2</span>:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutProjExSwitchRtesOnCanvas.png" width="158.6"></div></div><p>To display all routes in the routing context on the canvas, double-click the
                project's <code class="literal">.xml</code> context file entry
                (<code class="literal">src/main/resources/OSGI-INF/...</code>)  at
                the top of the <span class="guilabel">Camel Contexts</span> folder. </p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e19936"></a>Building and configuring the USA branch of the second
            route</h2></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Components</span>
                    drawer and drag a <span class="guilabel">Direct</span> component (<span class="inlinemediaobject"><img src="images/endpoint.png" width="20.4" alt="Direct icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">Route_route2</span> container:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2From2Add.png" width="118.95"></div></div><p>The <span class="guilabel">Route_route2</span> container expands to accommodate the
                        <span class="guilabel">From_from2</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">From_from2</span> node to open its properties in the
                        <span class="guilabel">Properties</span> editor:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2From2Props.png" width="422.5"></div></div></li><li class="step"><p>In the <span class="guilabel">Uri</span> field, replace <em class="replaceable"><code>name</code></em>
                    (following <code class="literal">direct:</code>) with <strong class="userinput"><code>OrderFulfillment</code></strong>, and in the
                        <span class="guilabel">Id</span> field, enter
                        <strong class="userinput"><code>_direct:OrderFulfillment</code></strong>.</p></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Routing</span>
                    drawer and drag a <span class="guilabel">Choice</span> (<span class="inlinemediaobject"><img src="images/choice.png" width="19.200000000000003" alt="Choice icon"></span>) pattern to the canvas and drop it in the
                        <span class="guilabel">Route_route2</span> container.</p><p>The <span class="guilabel">Route_route2</span> container expands to accommodate the
                        <span class="guilabel">Choice_choice2</span> node.</p></li><li class="step"><p>In the <span class="guilabel">Route_route2</span> container, select the
                        <code class="code">direct:OrderFulfillment</code> node and drag its connector arrow over
                    the <span class="guilabel">Choice_choice2</span> node, then release it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2Choice2Added.png" width="171.5"></div></div></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor, leave each of the
                        <span class="guilabel">Choice_choice2</span> node's properties as is.</p></li><li class="step"><p>In the Palette, open the <span class="guilabel">Routing</span> drawer and drag a
                        <span class="guimenuitem">When</span> (<span class="inlinemediaobject"><img src="images/endpointdef.png" width="19.200000000000003" alt="When icon"></span>) pattern to the canvas and drop it in the
                        <span class="guilabel">Choice_choice2</span> container:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2When2Added.png" width="200.2"></div></div><p>The <span class="guilabel">Choice_choice2</span> container expands to accommodate the
                        <span class="guilabel">When_when2</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">When_when2</span> node to open its properties in the
                        <span class="guilabel">Properties</span> editor:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2When2usaProps.png" width="404.25"></div></div></li><li class="step"><p>Set the node's properties this way:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2WhenUSAprops.png" width="382.85"></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select <strong class="userinput"><code>xpath</code></strong> from
                        the <span class="guilabel">Language</span> drop-down
                        menu.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>/order/customer/country = 'USA'</code></strong> in the
                                    <span class="guilabel">Expression</span>
                                field.</p></li><li class="listitem"><p>Leave <span class="guilabel">Trim</span> enabled.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_when/usa</code></strong> in the <span class="guilabel">Id</span> field.</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Once you select the expression <span class="guilabel">Language</span>, the
                            <span class="guilabel">Properties</span> editor displays its properties in an
                        indented list directly below the <span class="guilabel">Language</span> field. The
                            <span class="guilabel">Id</span> property in this list sets the ID of the
                        expression. The <span class="guilabel">Id</span> property following the
                            <span class="guilabel">Description</span> field sets the ID of the
                            <span class="guilabel">When</span> node.</p></td></tr></table></div></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the
                        <span class="guilabel">Transformation</span> drawer and drag the <span class="guimenuitem">Set
                        Header</span> pattern to the canvas and drop on the
                        <span class="guilabel">When_when/usa</span> node:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2SetHeadUSAadd.png" width="229.5"></div></div><p>The <span class="guilabel">When_when/usa</span> container expands to accommodate the
                        <span class="guilabel">SetHeader_setHeader3</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">SetHeader_setHeader3</span> node to open its
                    properties in the <span class="guilabel">Properties</span> editor:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCRErte2SetHead3Props.png" width="452.25"></div></div></li><li class="step"><p>Set the node's properties this way:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCRErte2SetHeadusaProps.png" width="335.40000000000003"></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select <span class="guimenuitem">constant</span> from the
                        <span class="guimenu">Language</span> drop-down menu.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>USA</code></strong> in the
                            <span class="guilabel">Expression</span> field.</p></li><li class="listitem"><p>Leave <span class="guilabel">Trim</span> enabled.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>Destination</code></strong> in the
                                <span class="guilabel">Header Name</span> field.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_setHead_usa</code></strong> in the
                                <span class="guilabel">Id</span> field.</p></li></ul></div></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Components</span>
                    drawer and drag a <span class="guilabel">Log</span> component (<span class="inlinemediaobject"><img src="images/log.png" width="20.4" alt="Log icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">When_when/usa</span> container.</p><p>The <span class="guilabel">When_when/usa</span> container expands to accommodate the
                        <span class="guilabel">Log_log3</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">SetHeader_setHead_usa</span> node and drag its
                    connector arrow over the <span class="guilabel">Log_log3</span> node, then release
                    it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2Log3Added.png" width="200.85"></div></div></li><li class="step"><p>On the canvas, select the <span class="guilabel">Log_log3</span> node to open its properties in the
                        <span class="guilabel">Properties</span> editor:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrteLog3Props.png" width="404.95"></div></div></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2Log3usaAdded.png" width="414.7"></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Enter <strong class="userinput"><code>Valid order - ship animals to USA
                                customer</code></strong> in the <span class="guilabel">Message</span>
                            field.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_usa</code></strong> in the <span class="guilabel">Id</span>
                            field.</p></li><li class="listitem"><p>Leave <span class="guilabel">Logging Level</span>
                            as is.</p></li></ul></div></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Components</span>
                    drawer and drag a <span class="guilabel">File</span> component (<span class="inlinemediaobject"><img src="images/file.png" width="20.4" alt="File icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">When_when/usa</span> container.</p><p>The <span class="guilabel">When_when/usa</span> container expands to accommodate the
                        <span class="guilabel">To_to1</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">Log_usa</span> node and drag its connector arrow over
                    the <span class="guilabel">To_to1</span> node, then release it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2USAtermFile.png" width="200.85"></div></div></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutRte2EndptUSA.png" width="455.6499999999999"></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Replace <em class="replaceable"><code>directoryName</code></em> with
                                <strong class="userinput"><code>target/messages/USA</code></strong> in
                            the <span class="guilabel">Uri</span> field.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_US</code></strong> in the <span class="guilabel">Id</span>
                            field.</p></li></ul></div></li><li class="step"><p>On the menu bar, click <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> to save the routing context file.</p><p>The USA branch of <span class="guilabel">Route_route2</span> should look like
                    this:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutUSAbranchRte2.png" width="133.79999999999998"></div></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e20446"></a>Building and configuring the Great Britain branch of the second
            route</h2></div></div></div><p>With <span class="guilabel">Route_route2</span> displayed on the canvas:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Routing</span>
                    drawer and drag a <span class="guilabel">When</span> pattern (<span class="inlinemediaobject"><img src="images/endpointdef.png" width="20.4" alt="When icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">Choice_choice2</span> container: </p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2WhenGBAdd.png" width="292.05"></div></div><p>The <span class="guilabel">Choice_choice2</span> container expands to accommodate the
                        <span class="guilabel">When_when2</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">When_when2</span> node to open
                   its properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select <strong class="userinput"><code>xpath</code></strong> from
                        the <span class="guilabel">Language</span> drop-down
                        menu.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>/order/customer/country = 'Great Britain'</code></strong> in
                                the <span class="guilabel">Expression</span>
                                field.</p></li><li class="listitem"><p>Leave <span class="guilabel">Trim</span> enabled.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_when/gb</code></strong> in the <span class="guilabel">Id</span> field.</p></li></ul></div></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the
                        <span class="guilabel">Transformation</span> drawer and drag a <span class="guilabel">Set
                        Header</span> pattern (<span class="inlinemediaobject"><img src="images/setHeader.png" width="19.200000000000003" alt="Set Header icon"></span>) to the canvas and drop it on the
                        <span class="guilabel">When_when/gb</span> node:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2SetHeadUKAdd.png" width="301.95000000000005"></div></div><p>The <span class="guilabel">When_when/gb</span> container expands to accommodate the
                        <span class="guilabel">SetHeader_setHeader3</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">SetHeader_setHeader3</span> node to open
                   its properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select <span class="guimenuitem">constant</span> from the
                        <span class="guimenu">Language</span> drop-down menu.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>UK</code></strong> in the
                            <span class="guilabel">Expression</span> field.</p></li><li class="listitem"><p>Leave <span class="guilabel">Trim</span> as is.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>Destination</code></strong> in the 
                            <span class="guilabel">Header Name</span> field.</p></li><li class="listitem"><p>Enter<strong class="userinput"><code>_setHead_uk</code></strong> in the <span class="guilabel">Id</span> field.</p></li></ul></div></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Components</span> drawer and drag
                   a <span class="guilabel">Log</span> pattern (<span class="inlinemediaobject"><img src="images/log.png" width="19.200000000000003" alt="Log icon"></span>) to the canvas and drop it in the
                   <span class="guilabel">When_when/gb</span> container.</p><p>The <span class="guilabel">When_when/gb</span> container expands to accommodate the
                       <span class="guilabel">Log_log3</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">SetHeader_setHead_uk</span> node and drag its
                    connector arrow over the <span class="guilabel">Log_log3</span> node, and then release
                    it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2LogUKAdd.png" width="301.95000000000005"></div></div></li><li class="step"><p>On the canvas, select the <span class="guilabel">Log_log3</span> node to open its
                    properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Enter <strong class="userinput"><code>Valid order - ship animals to
                                    UK customer</code></strong> in the
                                    <span class="guilabel">Message</span> field.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_uk</code></strong> in the <span class="guilabel">Id</span>
                                field.</p></li><li class="listitem"><p>Leave the <span class="guilabel">Logging Level</span> as is.</p></li></ul></div></li><li class="step"><p>From the <span class="guilabel">Components</span> drawer, drag a
                        <span class="guilabel">File</span> pattern (<span class="inlinemediaobject"><img src="images/file.png" width="19.200000000000003" alt="File icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">When_when/gb</span> container.</p><p>The <span class="guilabel">When_when/gb</span> container expands to accommodate the
                    <span class="guilabel">To_to1</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">Log_uk</span> node and drag its connector arrow over
                    the <span class="guilabel">To_to1</span> node, and then release it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2UKtermFile.png" width="301.40000000000003"></div></div></li><li class="step"><p>On the canvas, select the <span class="guilabel">To_to1</span> node to open its properties in the
                        <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Replace
                                    <em class="replaceable"><code>directoryName</code></em>
                                with
                                    <strong class="userinput"><code>target/messages/GreatBritain</code></strong>
                                in the <span class="guilabel">Uri</span> field.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_UK</code></strong> in the <span class="guilabel">Id</span>
                                field.</p></li></ul></div></li><li class="step"><p>On the menu bar, click <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> to save the routing context file.</p><p>The Great Britain branch of <span class="guilabel">Route_route2</span> should look
                    like this:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutUKbranchRte2.png" width="132"></div></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e20808"></a>Building and configuring the Germany branch of the second
        route</h2></div></div></div><p>With <span class="guilabel">Route_route2</span> displayed on the canvas:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Routing</span>
                    drawer and drag a <span class="guilabel">When</span> pattern (<span class="inlinemediaobject"><img src="images/endpointdef.png" width="20.4" alt="When icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">Choice_choice2</span> container: </p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2WhenGERAdd.png" width="425.15000000000003"></div></div><p>The <span class="guilabel">Choice_choice2</span> container expands to accommodate the
                    <span class="guilabel">When_when2</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">When_when2</span> node to open
                its properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select <strong class="userinput"><code>xpath</code></strong> from
                        the <span class="guilabel">Language</span> drop-down
                        menu.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>/order/customer/country = 'Germany'</code></strong> in the
                                    <span class="guilabel">Expression</span> field.</p></li><li class="listitem"><p>Leave <span class="guilabel">Trim</span> enabled.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_when/ger</code></strong> in the <span class="guilabel">Id</span> field.</p></li></ul></div></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the
                        <span class="guilabel">Transformation</span> drawer and drag a <span class="guilabel">Set
                        Header</span> pattern (<span class="inlinemediaobject"><img src="images/setHeader.png" width="19.200000000000003" alt="Set Header icon"></span>) to the canvas and drop it on the
                        <span class="guilabel">When_when/ger</span> node:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2SetHeadGERAdd.png" width="433.9500000000001"></div></div><p>The <span class="guilabel">When_when/ger</span> container expands to accommodate the
                        <span class="guilabel">SetHeader_setHeader3</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">SetHeader_setHeader3</span> node to open
                its properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select <span class="guimenuitem">constant</span> from the
                        <span class="guimenu">Language</span> drop-down menu.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>Germany</code></strong> in the <span class="guilabel">Expression</span> field.</p></li><li class="listitem"><p>Leave <span class="guilabel">Trim</span> as is.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>Destination</code></strong> in the 
                        <span class="guilabel">Header Name</span> field.</p></li><li class="listitem"><p>Enter<strong class="userinput"><code>_setHead_ger</code></strong> in the <span class="guilabel">Id</span> field.</p></li></ul></div></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Components</span> drawer and drag
                    a <span class="guilabel">Log</span> pattern (<span class="inlinemediaobject"><img src="images/log.png" width="19.200000000000003" alt="Log icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">When_when/ger</span> container.</p><p>The <span class="guilabel">When_when/ger</span> container expands to accommodate the
                        <span class="guilabel">Log_log3</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">SetHeader_setHead_ger</span> node and drag its
                    connector arrow over the <span class="guilabel">Log_log3</span> node, and then release
                    it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2LogGERAdd.png" width="433.9500000000001"></div></div></li><li class="step"><p>On the canvas, select the <span class="guilabel">Log_log3</span> node to open its
                    properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Enter <strong class="userinput"><code>Valid order - ship animals to Germany
                                    customer</code></strong> in the <span class="guilabel">Message</span>
                                field.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_ger</code></strong> in the <span class="guilabel">Id</span>
                                field.</p></li><li class="listitem"><p>Leave the <span class="guilabel">Logging Level</span> as is.</p></li></ul></div></li><li class="step"><p>From the <span class="guilabel">Components</span> drawer, drag a
                        <span class="guilabel">File</span> pattern (<span class="inlinemediaobject"><img src="images/file.png" width="19.200000000000003" alt="File icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">When_when/ger</span> container.</p><p>The <span class="guilabel">When_when/ger</span> container expands to accommodate the
                        <span class="guilabel">To_to1</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">Log_ger</span> node and drag its connector arrow over
                    the <span class="guilabel">To_to1</span> node, and then release it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2GERtermFile.png" width="433.4000000000001"></div></div></li><li class="step"><p>On the canvas, select the <span class="guilabel">To_to1</span> node to open its properties in the
                <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Replace <em class="replaceable"><code>directoryName</code></em> with
                                    <strong class="userinput"><code>target/messages/Germany</code></strong> in the
                                    <span class="guilabel">Uri</span> field.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_GER</code></strong> in the <span class="guilabel">Id</span>
                                field.</p></li></ul></div></li><li class="step"><p>On the menu bar, click <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> to save the routing context file.</p><p>The Germany branch of <span class="guilabel">Route_route2</span> should look like
                    this:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutGERbranchRte2.png" width="133.79999999999998"></div></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e21170"></a>Building and configuring the France branch of the second
        route</h2></div></div></div><p>With <span class="guilabel">Route_route2</span> displayed on the canvas:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Routing</span>
                    drawer and drag an <span class="guilabel">Otherwise</span> pattern (<span class="inlinemediaobject"><img src="images/endpointdef.png" width="20.4" alt="Otherwise icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">Choice_choice2</span> container: </p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2OtherFRAdd.png" width="556.6"></div></div><p>The <span class="guilabel">Choice_choice2</span> container expands to accommodate the
                        <span class="guilabel">Otherwise_otherwise1</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">Otherwise_otherwise1</span> node to open its
                    properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor, enter
                        <strong class="userinput"><code>_else/fr</code></strong> in the <span class="guilabel">Id</span> field.</p></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the
                        <span class="guilabel">Transformation</span> drawer and drag a <span class="guilabel">Set
                        Header</span> pattern (<span class="inlinemediaobject"><img src="images/setHeader.png" width="19.200000000000003" alt="Set Header icon"></span>) to the canvas and drop it on the
                        <span class="guilabel">Otherwise_else/fr</span> node:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2SetHeadFRAdd.png" width="565.4000000000001"></div></div><p>The <span class="guilabel">Otherwise_else/fr</span> container expands to accommodate
                    the <span class="guilabel">SetHeader_setHeader3</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">SetHeader_setHeader3</span> node to open
                its properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select <span class="guimenuitem">constant</span> from the
                        <span class="guimenu">Language</span> drop-down menu.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>France</code></strong> in the <span class="guilabel">Expression</span> field.</p></li><li class="listitem"><p>Leave <span class="guilabel">Trim</span> as is.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>Destination</code></strong> in the 
                        <span class="guilabel">Header Name</span> field.</p></li><li class="listitem"><p>Enter<strong class="userinput"><code>_setHead_fr</code></strong> in the <span class="guilabel">Id</span> field.</p></li></ul></div></li><li class="step"><p>In the <span class="guilabel">Palette</span>, open the <span class="guilabel">Components</span> drawer and drag
                    a <span class="guilabel">Log</span> pattern (<span class="inlinemediaobject"><img src="images/log.png" width="19.200000000000003" alt="Log icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">Otherwise_else/fr</span> container.</p><p>The <span class="guilabel">Otherwise_else/fr</span> container expands to accommodate
                    the <span class="guilabel">Log_log3</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">SetHeader_setHead_fr</span> node and drag its
                    connector arrow over the <span class="guilabel">Log_log3</span> node, and then release
                    it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2LogFRAdd.png" width="565.95"></div></div></li><li class="step"><p>On the canvas, select the <span class="guilabel">Log_log3</span> node to open its
                    properties in the <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Enter <strong class="userinput"><code>Valid order - ship animals to France
                                    customer</code></strong> in the <span class="guilabel">Message</span>
                                field.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_fr</code></strong> in the <span class="guilabel">Id</span>
                                field.</p></li><li class="listitem"><p>Leave the <span class="guilabel">Logging Level</span> as is.</p></li></ul></div></li><li class="step"><p>From the <span class="guilabel">Components</span> drawer, drag a
                        <span class="guilabel">File</span> pattern (<span class="inlinemediaobject"><img src="images/file.png" width="19.200000000000003" alt="File icon"></span>) to the canvas and drop it in the
                        <span class="guilabel">Otherwise_else/fr</span> container.</p><p>The <span class="guilabel">Otherwise_else/fr</span> container expands to accommodate
                    the <span class="guilabel">To_to1</span> node.</p></li><li class="step"><p>On the canvas, select the <span class="guilabel">Log_fr</span> node and drag its connector arrow over
                    the <span class="guilabel">To_to1</span> node, and then release it:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2FRtermFile.png" width="567.0500000000001"></div></div></li><li class="step"><p>On the canvas, select the <span class="guilabel">To_to1</span> node to open its properties in the
                <span class="guilabel">Properties</span> editor.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> editor:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Replace <em class="replaceable"><code>directoryName</code></em> with
                                    <strong class="userinput"><code>target/messages/France</code></strong> in the
                                    <span class="guilabel">Uri</span> field.</p></li><li class="listitem"><p>Enter <strong class="userinput"><code>_FR</code></strong> in the <span class="guilabel">Id</span>
                                field.</p></li></ul></div></li><li class="step"><p>On the menu bar, click <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> to save the routing context file.</p><p>The France branch of <span class="guilabel">Route_route2</span> should look like
                    this:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutFRbranchRte2.png" width="133.2"></div></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e21504"></a>Finishing up</h2></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>If needed, on the menu bar, select <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> to save the routing context.</p><p>The routes on the canvas should look like this:</p><div class="figure"><a name="d0e21519"></a><p class="title"><b>Figure&nbsp;2.&nbsp;Completed route1</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject"><img src="./images/tutCBRRte1Completed.png" width="351.65000000000003" alt="Completed first route in the CBRroute routing context"></div></div></div></div><br class="figure-break"><div class="figure"><a name="d0e21529"></a><p class="title"><b>Figure&nbsp;3.&nbsp;Completed route2</b></p><div class="figure-contents"><div class="screenshot"><div class="mediaobject"><img src="./images/tutCBRRte2Completed.png" width="566.5" alt="Completed second route in the CBRroute routing context"></div></div></div></div><br class="figure-break"></li><li class="step"><p>Click the <span class="guilabel">Source</span> tab at the bottom,
                    left of the canvas to display the XML for the route.</p><p>The <code class="sgmltag-element">camelContext</code> element should look like that
                    shown in <a class="xref" href="RiderTutorialAddRoute.html#CBREx011" title="Example&nbsp;4.&nbsp;XML for dual-route content-based router">Example&nbsp;4</a>:</p><div class="example"><a name="CBREx011"></a><p class="title"><b>Example&nbsp;4.&nbsp;XML for dual-route content-based router</b></p><div class="example-contents"><pre class="programlisting"><span xmlns="http://www.w3.org/1999/xhtml" class="hl-directive" style="color: maroon">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
  
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;blueprint</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span>
    <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns:xsi</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.w3.org/2001/XMLSchema-instance"</span> 
    <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xsi:schemaLocation</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://www.osgi.org/xmlns/blueprint/v1.0.0            
    https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd                         
    http://camel.apache.org/schema/blueprint            
    http://camel.apache.org/schema/blueprint/camel-blueprint.xsd"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_context1"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_route1"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">shutdownRoute</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Default"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
          <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_from1"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"file:src/data?noop=true"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
          <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;choice</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_choice1"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;when</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_when1"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;xpath&gt;</strong>/order/orderline/quantity/text() &gt; /order/orderline/maxAllowed/text()<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/xpath&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;log</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_log1"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">message</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"quantity exceeds the maximum allowed - contact customer"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Destination"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_setHeader1"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>InvalidOrders<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_Invalid"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"file:target/messages/invalidOrders"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/when&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;otherwise</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_else2"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;log</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_log2"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">message</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"valid order - process"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Destination"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_setHeader2"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>Dispatcher<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_Fulfill"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:OrderFulfillment"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/otherwise&gt;</strong>
          <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/choice&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_route2"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
          <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_direct:OrderFulfillment"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:OrderFulfillment"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
          <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;choice</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_choice2"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;when</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_when/usa"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;xpath&gt;</strong>/order/customer/country = 'USA'<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/xpath&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Destination"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_setHead_usa"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>USA<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;log</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_usa"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">message</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Valid order - ship to USA customer"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_US"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"file:target/messages/USA"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/when&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;when</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_when/gb"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;xpath&gt;</strong>/order/customer/country = 'Great Britain'<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/xpath&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Destination"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_setHead_uk"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>UK<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;log</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_uk"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">message</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Valid order - ship animals to UK customer"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_UK"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"file:target/messages/GreatBritain"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/when&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;when</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_when/ger"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;xpath&gt;</strong>/order/customer/country = 'Germany'<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/xpath&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Destination"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_setHead_ger"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>Germany<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;log</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_ger"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">message</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Valid order - ship to Germany customer"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_GER"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"file:target/messages/Germany"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/when&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;otherwise</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_else/fr"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Destination"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_setHead_fr"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
                      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>France<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;log</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_fr"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">message</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"Valid order - ship animals to France customer"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
                  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"_FR"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"file:target/messages/France"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
              <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/otherwise&gt;</strong>
          <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/choice&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/blueprint&gt;</strong></pre></div></div><br class="example-break"></li></ol></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>If the tooling added the attribute <code class="literal">shutdownRoute=" "</code> to the second route
                element (<code class="literal">&lt;route id="route2"&gt;</code>), delete that attribute.
                Otherwise, the <code class="filename">CBRroute</code> project might fail to run.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e21574"></a>Next steps</h2></div></div></div><p>You can run the new route as described in <a href="RiderTutorialRun.html#RiderRunRun" class="olink">Running the route</a>.</p><p>Check the end of the Console's output. You should see these
            lines:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/tutCBRrte2Console.png" width="619.1999999999999"></div></div><p>Check the target destinations in <span class="guilabel">Project
                Explorer</span> to verify that the routes executed
            properly:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Select <code class="filename">CBRroute</code>. </p></li><li class="step"><p>Right-click it to open the context menu, then select
                    <span class="guimenuitem">Refresh</span>.</p></li><li class="step"><p>Expand the folder <code class="filename">target/messages/</code> as
                    shown in <a class="xref" href="RiderTutorialAddRoute.html#tutDualCBRTarget" title="Figure&nbsp;4.&nbsp;Target message destinations in Project Explorer">Figure&nbsp;4</a>. The
                        <code class="filename">message*.xml</code> files should be
                    dispersed in your target destinations like this:</p><div class="figure"><a name="tutDualCBRTarget"></a><p class="title"><b>Figure&nbsp;4.&nbsp;Target message destinations in Project Explorer </b></p><div class="figure-contents"><div class="mediaobject"><img src="./images/tutDualCBRrteVerify.png" width="163.79999999999998" alt="message destinations"></div></div></div><br class="figure-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>To view message content, double-click a message to open it in the route editor's XML
                        editor.</p></td></tr></table></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e21629"></a>Further reading</h2></div></div></div><p>To learn more about the <span class="property">direct</span> component
            see the <em class="citetitle">Red Hat JBoss Fuse:
                Apache Camel Component Reference</em> at <a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_JBoss_Fuse/6.3/html/Apache_Camel_Component_Reference/IDU-Direct.html" target="_top">Red Hat JBoss Fuse 6.3 documentation</a></p></div></div></body></html>