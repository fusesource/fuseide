<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Hazelcast Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-HawtDB.html" title="HawtDB"><link rel="next" href="IDU-hbase.html" title="HBase"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-HazelcastComponent"></a>Hazelcast Component</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_HazelcastComponent"></a>Hazelcast Component</h2></div></div></div><p><span class="bold"><strong>Available as of Apache Camel 2.7</strong></span>
    </p><p>The <span class="bold"><strong>hazelcast:</strong></span> component allows you to work with the
        <a class="link" href="http://www.hazelcast.com" target="_top">Hazelcast</a> distributed data grid / cache.
      Hazelcast is a in memory data grid, entirely written in Java (single jar). It offers a great
      palette of different data stores like map, multi map (same key, n values), queue, list and
      atomic number. The main reason to use Hazelcast is its simple cluster support. If you have
      enabled multicast on your network you can run a cluster with hundred nodes with no extra
      configuration. Hazelcast can simply configured to add additional features like n copies
      between nodes (default is 1), cache persistence, network configuration (if needed), near
      cache, enviction and so on. For more information consult the Hazelcast documentation on <a class="link" href="http://www.hazelcast.com/docs.jsp" target="_top">http://www.hazelcast.com/docs.jsp</a>.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
      for this component:</p><pre class="programlisting">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-hazelcast&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">hazelcast:[ map | multimap | queue | topic | seda | set | atomicvalue | instance | list]:cachename[?options]</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-946"></a>Options</h2></div></div></div><table id="d0e96439"><colgroup> </colgroup><tbody><tr>
          <td>
            <p>Name</p>
          </td>
          <td>
            <p>Required</p>
          </td>
          <td>
            <p>Description</p>
          </td>
        </tr><tr>
          <td>
            <p><code class="code">hazelcastInstance</code></p>
          </td>
          <td>
            <p>No</p>
          </td>
          <td>
            <p><span class="bold"><strong>Camel 2.14:</strong></span> The hazelcast instance reference
              which can be used for hazelcast endpoint. If you don't specify the instance reference,
              camel use the default hazelcast instance from the camel-hazelcast instance.</p>
          </td>
        </tr><tr>
          <td>
            <p><code class="code">hazelcastInstanceName</code></p>
          </td>
          <td>
            <p>No</p>
          </td>
          
        </tr><tr>
          <td>
            <p><code class="code">defaultOperation</code></p>
          </td>
          <td>
            <p><code class="code">-1</code></p>
          </td>
          <td>
            <p><span class="bold"><strong>Camel 2.15:</strong></span> To specify a default operation to
              use, if no operation header has been provided.</p>
          </td>
        </tr></tbody></table><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>You have to use the second prefix to define which type of data store you want to
        use.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sections"></a>Sections</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Usage of <a class="link" href="IDU-HazelcastComponent.html#IDU-HazelcastComponent_HSH_UsageofMap" title="Usage of Map">map</a>
        </p></li><li class="listitem"><p>Usage of <a class="link" href="IDU-HazelcastComponent.html#IDU-HazelcastComponent_HSH_UsageofMultiMap" title="Usage of Multi Map">multimap</a>
        </p></li><li class="listitem"><p>Usage of <a class="link" href="IDU-HazelcastComponent.html#IDU-HazelcastComponent_HSH_UsageofQueue" title="Usage of Queue">queue</a></p></li><li class="listitem"><p>Usage of <a class="link" href="IDU-HazelcastComponent.html#IDU-HazelcastComponent_HSH_UsageofTopic" title="Usage of Topic">topic</a></p></li><li class="listitem"><p>Usage of <a class="link" href="IDU-HazelcastComponent.html#IDU-HazelcastComponent_HSH_UsageofList" title="Usage of List">list</a>
        </p></li><li class="listitem"><p>Usage of <a class="link" href="IDU-HazelcastComponent.html#IDU-HazelcastComponent_HSH_UsageofSEDA" title="Usage of SEDA">seda</a>
        </p></li><li class="listitem"><p>Usage of <a class="link" href="IDU-HazelcastComponent.html#IDU-HazelcastComponent_HSH_UsageofAtomicNumber" title="Usage of Atomic Number">atomic
            number</a>
        </p></li><li class="listitem"><p>Usage of <a class="link" href="IDU-HazelcastComponent.html#IDU-HazelcastComponent_HSH_clustersupport" title="Cluster support">cluster</a>
          support (instance)</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_UsageofMap"></a>Usage of Map</h2></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_mapcacheproducertohazelcastmapfoo"></a>map cache producer - to("hazelcast:map:foo")</h2></div></div></div><p>If you want to store a value in a map you can use the map cache producer. The map cache
      producer provides 5 operations (put, get, update, delete, query). For the first 4 you have to
      provide the operation inside the "hazelcast.operation.type" header variable. In Java DSL you
      can use the constants from
        <code class="literal">org.apache.camel.component.hazelcast.HazelcastConstants</code>.</p><p>Header Variables for the request message:</p><table id="d0e96595"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">hazelcast.operation.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> valid values are: put, delete, get, update, query </td>
      </tr><tr>
        <td><code class="literal">hazelcast.objectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the object id to store / find your object inside the cache (not needed for the query
          operation) </td>
      </tr></table><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Header variables have changed in Apache Camel 2.8</p></td></tr></table></div><table id="d0e96640"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelHazelcastOperationType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> valid values are: put, delete, get, update, query <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastObjectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the object id to store / find your object inside the cache (not needed for the query
          operation) <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr></table><p>You can call the samples with:</p><pre class="programlisting">template.sendBodyAndHeader("direct:[put|get|update|delete|query]", "my-foo", HazelcastConstants.OBJECT_ID, "4711");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforput"></a>Sample for put:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:put")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUT_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:put" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;put&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforget"></a>Sample for get:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:get")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX)
.to("seda:out");</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:get" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;get&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
	&lt;to uri="seda:out" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforupdate"></a>Sample for update:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:update")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.UPDATE_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:update" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;update&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Samplefordelete"></a>Sample for delete:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:delete")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DELETE_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:delete" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;delete&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforquery"></a>Sample for query </h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:query")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.QUERY_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX)
.to("seda:out");</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:query" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;query&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
	&lt;to uri="seda:out" /&gt;
&lt;/route&gt;</pre><p>For the query operation Hazelcast offers a SQL like syntax to query your distributed
      map.</p><pre class="programlisting">String q1 = "bar &gt; 1000";
template.sendBodyAndHeader("direct:query", null, HazelcastConstants.QUERY, q1);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_mapcacheconsumerfromhazelcastmapfoo"></a>map cache consumer - from("hazelcast:map:foo")</h2></div></div></div><p>Hazelcast provides event listeners on their data grid. If you want to be notified if a
      cache will be manipulated, you can use the map consumer. There're 4 events: <span class="bold"><strong>put</strong></span>, <span class="bold"><strong>update</strong></span>, <span class="bold"><strong>delete</strong></span> and <span class="bold"><strong>envict</strong></span>. The event type will be
      stored in the "<span class="bold"><strong>hazelcast.listener.action</strong></span>" header variable.
      The map consumer provides some additional information inside these variables:</p><p>Header Variables inside the response message:</p><table id="d0e96783"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.time</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> time of the event in millis </td>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the map consumer sets here "cachelistener" </td>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.action</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> type of event - here <span class="bold"><strong>added</strong></span>, <span class="bold"><strong>updated</strong></span>, <span class="bold"><strong>envicted</strong></span> and <span class="bold"><strong>removed</strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">hazelcast.objectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the oid of the object </td>
      </tr><tr>
        <td><code class="literal">hazelcast.cache.name</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the name of the cache - e.g. "foo" </td>
      </tr><tr>
        <td><code class="literal">hazelcast.cache.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the type of the cache - here map </td>
      </tr></table><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Header variables have changed in Apache Camel 2.8</p></td></tr></table></div><table id="d0e96900"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerTime</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> time of the event in millis <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the map consumer sets here "cachelistener" <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerAction</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> type of event - here <span class="bold"><strong>added</strong></span>, <span class="bold"><strong>updated</strong></span>, <span class="bold"><strong>envicted</strong></span> and <span class="bold"><strong>removed</strong></span>. <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastObjectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the oid of the object <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastCacheName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the name of the cache - e.g. "foo" <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastCacheType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the type of the cache - here map <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr></table><p>The object value will be stored within <span class="bold"><strong>put</strong></span> and <span class="bold"><strong>update</strong></span> actions inside the message body.</p><p>Here's a sample:</p><pre class="programlisting">fromF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX)
.log("object...")
.choice()
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
         .log("...added")
         .to("mock:added")
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ENVICTED))
         .log("...envicted")
         .to("mock:envicted")
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.UPDATED))
         .log("...updated")
         .to("mock:updated")
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
         .log("...removed")
         .to("mock:removed")
    .otherwise()
         .log("fail!");</pre><p><span class="phrase"><a name="IDU-HazelcastComponent_HSH_multimap"></a></span>
    </p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_UsageofMultiMap"></a>Usage of Multi Map</h2></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_multimapcacheproducertohazelcastmultimapfoo"></a>multimap cache producer - to("hazelcast:multimap:foo")</h2></div></div></div><p>A multimap is a cache where you can store n values to one key. The multimap producer
      provides 4 operations (put, get, removevalue, delete).</p><p>Header Variables for the request message:</p><table id="d0e97072"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">hazelcast.operation.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> valid values are: put, get, removevalue, delete </td>
      </tr><tr>
        <td><code class="literal">hazelcast.objectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the object id to store / find your object inside the cache </td>
      </tr></table><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Header variables have changed in Apache Camel 2.8</p></td></tr></table></div><p>Header Variables for the request message in Apache Camel 2.8:</p><table id="d0e97119"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelHazelcastOperationType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> valid values are: put, delete, get, update, query <span class="bold"><strong>Available as of
            Apache Camel 2.8</strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastObjectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the object id to store / find your object inside the cache (not needed for the query
          operation) <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr></table><p>You can call the samples with:</p><pre class="programlisting">template.sendBodyAndHeader("direct:[put|get|update|delete|query]", "my-foo", HazelcastConstants.OBJECT_ID, "4711");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforput2"></a>Sample for put:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:put")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUT_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:put" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;put&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforget2"></a>Sample for get:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:get")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX)
.to("seda:out");</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:get" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;get&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
	&lt;to uri="seda:out" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforupdate2"></a>Sample for update:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:update")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.UPDATE_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:update" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;update&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Samplefordelete2"></a>Sample for delete:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:delete")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DELETE_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:delete" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;delete&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforquery2"></a>Sample for query </h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:query")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.QUERY_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX)
.to("seda:out");</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:query" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;query&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:map:foo" /&gt;
	&lt;to uri="seda:out" /&gt;
&lt;/route&gt;</pre><p>For the query operation Hazelcast offers a SQL like syntax to query your distributed
      map.</p><pre class="programlisting">String q1 = "bar &gt; 1000";
template.sendBodyAndHeader("direct:query", null, HazelcastConstants.QUERY, q1);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_mapcacheconsumerfromhazelcastmapfoo2"></a>map cache consumer - from("hazelcast:map:foo")</h2></div></div></div><p>Hazelcast provides event listeners on their data grid. If you want to be notified if a
      cache will be manipulated, you can use the map consumer. There're 4 events: <span class="bold"><strong>put</strong></span>, <span class="bold"><strong>update</strong></span>, <span class="bold"><strong>delete</strong></span> and <span class="bold"><strong>envict</strong></span>. The event type will be
      stored in the "<span class="bold"><strong>hazelcast.listener.action</strong></span>" header variable.
      The map consumer provides some additional information inside these variables:</p><p>Header Variables inside the response message:</p><table id="d0e97260"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.time</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> time of the event in millis </td>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the map consumer sets here "cachelistener" </td>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.action</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> type of event - here <span class="bold"><strong>added</strong></span>, <span class="bold"><strong>updated</strong></span>, <span class="bold"><strong>envicted</strong></span> and <span class="bold"><strong>removed</strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">hazelcast.objectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the oid of the object </td>
      </tr><tr>
        <td><code class="literal">hazelcast.cache.name</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the name of the cache - e.g. "foo" </td>
      </tr><tr>
        <td><code class="literal">hazelcast.cache.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the type of the cache - here map </td>
      </tr></table><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Header variables have changed in Apache Camel 2.8</p></td></tr></table></div><table id="d0e97377"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerTime</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> time of the event in millis <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the map consumer sets here "cachelistener" <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerAction</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> type of event - here <span class="bold"><strong>added</strong></span>, <span class="bold"><strong>updated</strong></span>, <span class="bold"><strong>envicted</strong></span> and <span class="bold"><strong>removed</strong></span>. <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastObjectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the oid of the object <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastCacheName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the name of the cache - e.g. "foo" <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastCacheType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the type of the cache - here map <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr></table><p>The object value will be stored within <span class="bold"><strong>put</strong></span> and <span class="bold"><strong>update</strong></span> actions inside the message body.</p><p>Here's a sample:</p><pre class="programlisting">fromF("hazelcast:%sfoo", HazelcastConstants.MAP_PREFIX)
.log("object...")
.choice()
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
         .log("...added")
         .to("mock:added")
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ENVICTED))
         .log("...envicted")
         .to("mock:envicted")
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.UPDATED))
         .log("...updated")
         .to("mock:updated")
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
         .log("...removed")
         .to("mock:removed")
    .otherwise()
         .log("fail!");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_UsageofMultiMap2"></a>Usage of Multi Map</h2></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_multimapcacheproducertohazelcastmultimapfoo2"></a>multimap cache producer - to("hazelcast:multimap:foo")</h2></div></div></div><p>A multimap is a cache where you can store n values to one key. The multimap producer
      provides 4 operations (put, get, removevalue, delete).</p><p>Header Variables for the request message:</p><table id="d0e97546"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">hazelcast.operation.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> valid values are: put, get, removevalue, delete </td>
      </tr><tr>
        <td><code class="literal">hazelcast.objectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the object id to store / find your object inside the cache </td>
      </tr></table><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Header variables have changed in Apache Camel 2.8</p></td></tr></table></div><table id="d0e97591"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelHazelcastOperationType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> valid values are: put, get, removevalue, delete <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastObjectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the object id to store / find your object inside the cache <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforput3"></a>Sample for put:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:put")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUT_OPERATION))
.to(String.format("hazelcast:%sbar", HazelcastConstants.MULTIMAP_PREFIX));</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:put" /&gt;
	&lt;log message="put.."/&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;put&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:multimap:foo" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforremovevalue"></a>Sample for removevalue:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:removevalue")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.REMOVEVALUE_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.MULTIMAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:removevalue" /&gt;
	&lt;log message="removevalue..."/&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;removevalue&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:multimap:foo" /&gt;
&lt;/route&gt;</pre><p>To remove a value you have to provide the value you want to remove inside the message
      body. If you have a multimap object <code class="literal">
        </code>} you have to put "my-foo"
      inside the message body to remove the "my-foo" value.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforget3"></a>Sample for get:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:get")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.MULTIMAP_PREFIX)
.to("seda:out");</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:get" /&gt;
	&lt;log message="get.."/&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;get&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:multimap:foo" /&gt;
	&lt;to uri="seda:out" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Samplefordelete3"></a>Sample for delete:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:delete")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DELETE_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.MULTIMAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:delete" /&gt;
	&lt;log message="delete.."/&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;delete&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:multimap:foo" /&gt;
&lt;/route&gt;</pre><p>you can call them in your test class with:</p><pre class="programlisting">template.sendBodyAndHeader("direct:[put|get|removevalue|delete]", "my-foo", HazelcastConstants.OBJECT_ID, "4711");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_multimapcacheconsumerfromhazelcastmultimapfoo"></a>multimap cache consumer - from("hazelcast:multimap:foo")</h2></div></div></div><p>For the multimap cache this component provides the same listeners / variables as for the
      map cache consumer (except the update and enviction listener). The only difference is the
        <span class="bold"><strong>multimap</strong></span> prefix inside the URI. Here is a sample:</p><pre class="programlisting">fromF("hazelcast:%sbar", HazelcastConstants.MULTIMAP_PREFIX)
.log("object...")
.choice()
	.when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
		.log("...added")
                .to("mock:added")
        //.when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ENVICTED))
        //        .log("...envicted")
        //        .to("mock:envicted")
        .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
                .log("...removed")
                .to("mock:removed")
        .otherwise()
                .log("fail!");</pre><p>Header Variables inside the response message:</p><table id="d0e97714"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.time</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> time of the event in millis </td>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the map consumer sets here "cachelistener" </td>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.action</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> type of event - here <span class="bold"><strong>added</strong></span> and <span class="bold"><strong>removed</strong></span> (and soon <span class="bold"><strong>envicted</strong></span>) </td>
      </tr><tr>
        <td><code class="literal">hazelcast.objectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the oid of the object </td>
      </tr><tr>
        <td><code class="literal">hazelcast.cache.name</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the name of the cache - e.g. "foo" </td>
      </tr><tr>
        <td><code class="literal">hazelcast.cache.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the type of the cache - here multimap </td>
      </tr></table><p>Eviction will be added as feature, soon (this is a Hazelcast issue).</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Header variables have changed in Apache Camel 2.8</p></td></tr></table></div><table id="d0e97830"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerTime</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> time of the event in millis <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the map consumer sets here "cachelistener" <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerAction</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> type of event - here <span class="bold"><strong>added</strong></span> and <span class="bold"><strong>removed</strong></span> (and soon <span class="bold"><strong>envicted</strong></span>) <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastObjectId</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the oid of the object <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastCacheName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the name of the cache - e.g. "foo" <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastCacheType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the type of the cache - here multimap <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_UsageofQueue"></a>Usage of Queue</h2></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Queueproducertohazelcastqueuefoo"></a>Queue producer to("hazelcast:queue:foo")</h2></div></div></div><p>The queue producer provides 6 operations (add, put, poll, peek, offer,
      removevalue).</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforadd"></a>Sample for add:</h2></div></div></div><pre class="programlisting">from("direct:add")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.ADD_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.QUEUE_PREFIX);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforput4"></a>Sample for put:</h2></div></div></div><pre class="programlisting">from("direct:put")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUT_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.QUEUE_PREFIX);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforpoll"></a>Sample for poll:</h2></div></div></div><pre class="programlisting">from("direct:poll")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.POLL_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.QUEUE_PREFIX);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforpeek"></a>Sample for peek:</h2></div></div></div><pre class="programlisting">from("direct:peek")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PEEK_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.QUEUE_PREFIX);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforoffer"></a>Sample for offer:</h2></div></div></div><pre class="programlisting">from("direct:offer")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.OFFER_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.QUEUE_PREFIX);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforremovevalue2"></a>Sample for removevalue:</h2></div></div></div><pre class="programlisting">from("direct:removevalue")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.REMOVEVALUE_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.QUEUE_PREFIX);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Queueconsumerfromhazelcastqueuefoo"></a>Queue consumer from("hazelcast:queue:foo")</h2></div></div></div><p>The queue consumer provides 2 operations (add, remove).</p><pre class="programlisting">fromF("hazelcast:%smm", HazelcastConstants.QUEUE_PREFIX)
   .log("object...")
   .choice()
	.when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
        	.log("...added")
		.to("mock:added")
	.when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
		.log("...removed")
		.to("mock:removed")
	.otherwise()
		.log("fail!");</pre><p><span class="phrase"><a name="IDU-HazelcastComponent_HSH_list"></a></span>
    </p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_UsageofTopic"></a>Usage of Topic</h2></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e98033"></a>Topic producer &#8211; to(&#8220;hazelcast:topic:foo&#8221;)</h2></div></div></div><p>The topic producer provides only one operation (publish).</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e98038"></a>Sample for publish</h2></div></div></div><p></p><pre class="programlisting">from("direct:add")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUBLISH_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.PUBLISH_OPERATION);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e98044"></a>Topic consumer &#8211; from(&#8220;hazelcast:topic:foo&#8221;)</h2></div></div></div><p>The topic consumer provides only one operation (received). This component is supposed to
      support multiple consumption as it's expected when it comes to topics so you are free to have
      as much consumers as you need on the same hazelcast topic.</p><pre class="programlisting">fromF("hazelcast:%sfoo", HazelcastConstants.TOPIC_PREFIX)
  .choice()
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.RECEIVED))
      .log("...message received")
    .otherwise()
      .log("...this should never have happened")</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_UsageofList"></a>Usage of List</h2></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Listproducertohazelcastlistfoo"></a>List producer to("hazelcast:list:foo")</h2></div></div></div><p>The list producer provides 4 operations (add, set, get, removevalue).</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforadd2"></a>Sample for add:</h2></div></div></div><pre class="programlisting">from("direct:add")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.ADD_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.LIST_PREFIX);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforget4"></a>Sample for get:</h2></div></div></div><pre class="programlisting">from("direct:get")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.LIST_PREFIX)
.to("seda:out");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforsetvalue"></a>Sample for setvalue:</h2></div></div></div><pre class="programlisting">from("direct:set")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.SETVALUE_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.LIST_PREFIX);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforremovevalue3"></a>Sample for removevalue:</h2></div></div></div><pre class="programlisting">from("direct:removevalue")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.REMOVEVALUE_OPERATION))
.toF("hazelcast:%sbar", HazelcastConstants.LIST_PREFIX);</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Please note that set,get and removevalue and not yet supported by hazelcast, will be
        added in the future..</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Listconsumerfromhazelcastlistfoo"></a>List consumer from("hazelcast:list:foo")</h2></div></div></div><p>The list consumer provides 2 operations (add, remove).</p><pre class="programlisting">fromF("hazelcast:%smm", HazelcastConstants.LIST_PREFIX)
	.log("object...")
	.choice()
		.when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
			.log("...added")
                        .to("mock:added")
		.when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
			.log("...removed")
                        .to("mock:removed")
                .otherwise()
                        .log("fail!");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_UsageofSEDA"></a>Usage of SEDA</h2></div></div></div><p>SEDA component differs from the rest components provided. It implements a work-queue in
      order to support asynchronous SEDA architectures, similar to the core "SEDA" component.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_SEDAproducertohazelcastsedafoo"></a>SEDA producer to("hazelcast:seda:foo")</h2></div></div></div><p>The SEDA producer provides no operations. You only send data to the specified
      queue.</p><table id="d0e98108"><tr>
        <th> Name </th>
        <th> default value </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">transferExchange</code>
        </td>
        <td><code class="literal">false</code>
        </td>
        <td><span class="bold"><strong>Apache Camel 2.8.0:</strong></span> if set to true the whole Exchange will
          be transfered. If header or body contains not serializable objects, they will be skipped.
        </td>
      </tr></table><p>Java DSL :</p><pre class="programlisting">from("direct:foo")
.to("hazelcast:seda:foo");</pre><p>Spring DSL :</p><pre class="programlisting">&lt;route&gt;
   &lt;from uri="direct:start" /&gt;
   &lt;to uri="hazelcast:seda:foo" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_SEDAconsumerfromhazelcastsedafoo"></a>SEDA consumer from("hazelcast:seda:foo")</h2></div></div></div><p>The SEDA consumer provides no operations. You only retrieve data from the specified
      queue.</p><table id="d0e98151"><tr>
        <th> Name </th>
        <th> default value </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">pollInterval</code>
        </td>
        <td><code class="literal">1000</code>
        </td>
        <td> Deprecated since Camel 2.15. Use <code class="code">pollTimeout</code> instead.</td>
      </tr><tr>
        <td><code class="literal">pollTimeout</code>
        </td>
        <td><code class="literal">1000</code>
        </td>
        <td> The timeout used when consuming from the SEDA queue. When a timeout occurs, the
          consumer can check whether it is allowed to continue running. Setting a lower value allows
          the consumer to react more quickly upon shutdown.</td>
      </tr><tr>
        <td><code class="literal">concurrentConsumers</code>
        </td>
        <td><code class="literal">1</code>
        </td>
        <td> To use concurrent consumers polling from the SEDA queue. </td>
      </tr><tr>
        <td><code class="literal">transferExchange</code>
        </td>
        <td><code class="literal">false</code>
        </td>
        <td><span class="bold"><strong>Camel 2.8.0:</strong></span> if set to true the whole Exchange will be
          transfered. If header or body contains not serializable objects, they will be skipped.
        </td>
      </tr><tr>
        <td><code class="literal">transacted</code>
        </td>
        <td><code class="literal">false</code>
        </td>
        <td><span class="bold"><strong>Camel 2.10.4:</strong></span> if set to true then the consumer runs in
          transaction mode, where the messages in the seda queue will only be removed if the
          transaction commits, which happens when the processing is complete. </td>
      </tr></table><p>Java DSL :</p><pre class="programlisting">from("hazelcast:seda:foo")
.to("mock:result");</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
  &lt;from uri="hazelcast:seda:foo" /&gt;
  &lt;to uri="mock:result" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_UsageofAtomicNumber"></a>Usage of Atomic Number</h2></div></div></div><p></p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>There is no consumer for this endpoint\!</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_atomicnumberproducertohazelcastatomicnumberfoo"></a>atomic number producer - to("hazelcast:atomicnumber:foo")</h2></div></div></div><p>An atomic number is an object that simply provides a grid wide number (long). The
      operations for this producer are setvalue (set the number with a given value), get, increase
      (+1), decrease (-1) and destroy.</p><p>Header Variables for the request message:</p><table id="d0e98269"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">hazelcast.operation.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> valid values are: setvalue, get, increase, decrease, destroy </td>
      </tr></table><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Header variables have changed in Apache Camel 2.8</p></td></tr></table></div><table id="d0e98299"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelHazelcastOperationType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> valid values are: setvalue, get, increase, decrease, destroy <span class="bold"><strong>Available as of Apache Camel version 2.8</strong></span>
        </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforset"></a>Sample for set:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:set")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.SETVALUE_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:set" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;setvalue&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:atomicvalue:foo" /&gt;
&lt;/route&gt;</pre><p>Provide the value to set inside the message body (here the value is 10):
        <code class="literal">template.sendBody("direct:set", 10);</code>
    </p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforget5"></a>Sample for get:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:get")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:get" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;get&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:atomicvalue:foo" /&gt;
&lt;/route&gt;</pre><p>You can get the number with <code class="literal">long body = template.requestBody("direct:get", null,
        Long.class);</code>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Sampleforincrement"></a>Sample for increment:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:increment")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.INCREMENT_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:increment" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;increment&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:atomicvalue:foo" /&gt;
&lt;/route&gt;</pre><p>The actual value (after increment) will be provided inside the message body.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Samplefordecrement"></a>Sample for decrement:</h2></div></div></div><p>Java DSL:</p><pre class="programlisting">from("direct:decrement")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DECREMENT_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:decrement" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;decrement&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:atomicvalue:foo" /&gt;
&lt;/route&gt;</pre><p>The actual value (after decrement) will be provided inside the message body.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_Samplefordestroy"></a>Sample for destroy </h2></div></div></div><p></p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>There's a bug inside Hazelcast. So this feature may not work properly. Will be fixed in
        1.9.3.</p></td></tr></table></div><p>Java DSL:</p><pre class="programlisting">from("direct:destroy")
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DESTROY_OPERATION))
.toF("hazelcast:%sfoo", HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
	&lt;from uri="direct:destroy" /&gt;
        &lt;!-- If using version 2.8 and above set headerName to "CamelHazelcastOperationType" --&gt;
	&lt;setHeader headerName="hazelcast.operation.type"&gt;
		&lt;constant&gt;destroy&lt;/constant&gt;
	&lt;/setHeader&gt;
	&lt;to uri="hazelcast:atomicvalue:foo" /&gt;
&lt;/route&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_clustersupport"></a>Cluster support</h2></div></div></div><p></p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>This endpoint provides no producer!</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-HazelcastComponent_HSH_instanceconsumerfromhazelcastinstancefoo"></a>instance consumer - from("hazelcast:instance:foo")</h2></div></div></div><p>Hazelcast makes sense in one single "server node", but it's extremly powerful in a
      clustered environment. The instance consumer fires if a new cache instance will join or leave
      the cluster.</p><p>Here's a sample:</p><pre class="programlisting">fromF("hazelcast:%sfoo", HazelcastConstants.INSTANCE_PREFIX)
.log("instance...")
.choice()
	.when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
		.log("...added")
		.to("mock:added")
	.otherwise()
		.log("...removed")
		.to("mock:removed");</pre><p>Each event provides the following information inside the message header:</p><p>Header Variables inside the response message:</p><table id="d0e98429"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.time</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> time of the event in millis </td>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.type</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the map consumer sets here "instancelistener" </td>
      </tr><tr>
        <td><code class="literal">hazelcast.listener.action</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> type of event - here <span class="bold"><strong>added</strong></span> or <span class="bold"><strong>removed</strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">hazelcast.instance.host</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> host name of the instance </td>
      </tr><tr>
        <td><code class="literal">hazelcast.instance.port</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> port number of the instance </td>
      </tr></table><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="imagesdb/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Header variables have changed in Apache Camel 2.8</p></td></tr></table></div><table id="d0e98525"><tr>
        <th> Name </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerTime</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> time of the event in millis <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerType</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> the map consumer sets here "instancelistener" <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastListenerActionn</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> type of event - here <span class="bold"><strong>added</strong></span> or <span class="bold"><strong>removed</strong></span>. <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastInstanceHost</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> host name of the instance <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr><tr>
        <td><code class="literal">CamelHazelcastInstancePort</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> port number of the instance <span class="bold"><strong>
            <a class="link" href="Version 2.8" target="_top">Version 2.8</a></strong></span>
        </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e98643"></a>Using hazelcast reference</h2></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e98647"></a>By its name</h2></div></div></div><p></p><pre class="programlisting">
&lt;bean id="hazelcastLifecycle" class="com.hazelcast.core.LifecycleService"
      factory-bean="hazelcastInstance" factory-method="getLifecycleService"
      destroy-method="shutdown" /&gt;

&lt;bean id="config" class="com.hazelcast.config.Config"&gt;
    &lt;constructor-arg type="java.lang.String" value="HZ.INSTANCE" /&gt;
&lt;/bean&gt;

&lt;bean id="hazelcastInstance" class="com.hazelcast.core.Hazelcast" factory-method="newHazelcastInstance"&gt;
    &lt;constructor-arg type="com.hazelcast.config.Config" ref="config"/&gt;
&lt;/bean&gt;
&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
    &lt;route id="testHazelcastInstanceBeanRefPut"&gt;
        &lt;from uri="direct:testHazelcastInstanceBeanRefPut"/&gt;
        &lt;setHeader headerName="CamelHazelcastOperationType"&gt;
            &lt;constant&gt;put&lt;/constant&gt;
        &lt;/setHeader&gt;
        &lt;to uri="hazelcast:map:testmap?hazelcastInstanceName=HZ.INSTANCE"/&gt;
    &lt;/route&gt;

    &lt;route id="testHazelcastInstanceBeanRefGet"&gt;
        &lt;from uri="direct:testHazelcastInstanceBeanRefGet" /&gt;
        &lt;setHeader headerName="CamelHazelcastOperationType"&gt;
            &lt;constant&gt;get&lt;/constant&gt;
        &lt;/setHeader&gt;
        &lt;to uri="hazelcast:map:testmap?hazelcastInstanceName=HZ.INSTANCE"/&gt;
        &lt;to uri="seda:out" /&gt;
    &lt;/route&gt;
&lt;/camelContext&gt;
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e98653"></a>By instance</h2></div></div></div><p></p><pre class="programlisting">
&lt;bean id="hazelcastInstance" class="com.hazelcast.core.Hazelcast"
      factory-method="newHazelcastInstance" /&gt;
&lt;bean id="hazelcastLifecycle" class="com.hazelcast.core.LifecycleService"
      factory-bean="hazelcastInstance" factory-method="getLifecycleService"
      destroy-method="shutdown" /&gt;

&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
    &lt;route id="testHazelcastInstanceBeanRefPut"&gt;
        &lt;from uri="direct:testHazelcastInstanceBeanRefPut"/&gt;
        &lt;setHeader headerName="CamelHazelcastOperationType"&gt;
            &lt;constant&gt;put&lt;/constant&gt;
        &lt;/setHeader&gt;
        &lt;to uri="hazelcast:map:testmap?hazelcastInstance=#hazelcastInstance"/&gt;
    &lt;/route&gt;

    &lt;route id="testHazelcastInstanceBeanRefGet"&gt;
        &lt;from uri="direct:testHazelcastInstanceBeanRefGet" /&gt;
        &lt;setHeader headerName="CamelHazelcastOperationType"&gt;
            &lt;constant&gt;get&lt;/constant&gt;
        &lt;/setHeader&gt;
        &lt;to uri="hazelcast:map:testmap?hazelcastInstance=#hazelcastInstance"/&gt;
        &lt;to uri="seda:out" /&gt;
    &lt;/route&gt;
&lt;/camelContext&gt;
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e98659"></a>Publishing hazelcast instance as an OSGI service</h2></div></div></div><p>If operating in an OSGI container and you would want to use one instance of hazelcast across all bundles in the same container. You can publish the instance as an OSGI service and bundles using the cache al need is to reference the service in the hazelcast endpoint.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e98664"></a>Bundle A create an instance and publishes it as an OSGI service</h2></div></div></div><p></p><pre class="programlisting">
&lt;bean id="config" class="com.hazelcast.config.FileSystemXmlConfig"&gt;
    &lt;argument type="java.lang.String" value="${hazelcast.config}"/&gt;
&lt;/bean&gt;

&lt;bean id="hazelcastInstance" class="com.hazelcast.core.Hazelcast" factory-method="newHazelcastInstance"&gt;
    &lt;argument type="com.hazelcast.config.Config" ref="config"/&gt;
&lt;/bean&gt;

&lt;!-- publishing the hazelcastInstance as a service --&gt;
&lt;service ref="hazelcastInstance" interface="com.hazelcast.core.HazelcastInstance" /&gt;
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e98670"></a>Bundle B uses the instance</h2></div></div></div><p></p><pre class="programlisting">
&lt;!-- referencing the hazelcastInstance as a service --&gt;
&lt;reference ref="hazelcastInstance" interface="com.hazelcast.core.HazelcastInstance" /&gt;

&lt;camelContext xmlns="http://camel.apache.org/schema/blueprint"&gt;
    &lt;route id="testHazelcastInstanceBeanRefPut"&gt;
        &lt;from uri="direct:testHazelcastInstanceBeanRefPut"/&gt;
        &lt;setHeader headerName="CamelHazelcastOperationType"&gt;
            &lt;constant&gt;put&lt;/constant&gt;
        &lt;/setHeader&gt;
        &lt;to uri="hazelcast:map:testmap?hazelcastInstance=#hazelcastInstance"/&gt;
    &lt;/route&gt;

    &lt;route id="testHazelcastInstanceBeanRefGet"&gt;
        &lt;from uri="direct:testHazelcastInstanceBeanRefGet" /&gt;
        &lt;setHeader headerName="CamelHazelcastOperationType"&gt;
            &lt;constant&gt;get&lt;/constant&gt;
        &lt;/setHeader&gt;
        &lt;to uri="hazelcast:map:testmap?hazelcastInstance=#hazelcastInstance"/&gt;
        &lt;to uri="seda:out" /&gt;
    &lt;/route&gt;
&lt;/camelContext&gt;
</pre></div></div></body></html>