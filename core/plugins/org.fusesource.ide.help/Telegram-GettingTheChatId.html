<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Getting the Chat ID</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="Telegram-TelegramComponent.html" title="Telegram Component"><link rel="prev" href="Telegram-ReactiveChatBot.html" title="Reactive Chat-Bot Example"><link rel="next" href="IDU-Test.html" title="Test"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="Telegram-GettingTheChatId"></a>Getting the Chat ID</h3></div></div></div><p>If you want to push messages to a specific Telegram chat when an event occurs, you need to
retrieve the corresponding chat ID. The chat ID is not currently shown in the telegram client,
but you can obtain it using a simple route.</p><p>First, add the bot to the chat where you want to push messages, then run a route like the following one.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"telegram:bots/123456789:AAE_dLq5C19xwGjw3yiC2NvEUrZcejK21-Q987654321:AAE_dLq5C19xwOmg5yiC2NvSrkT3wj5Q1-L"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"log:INFO?showHeaders=true"</em></strong>);</pre><p>Any message received by the bot will be dumped to your log together with information about the chat (<code class="literal">CamelTelegramChatId</code>
header).</p><p>Once you get the chat ID, you can use the following sample route to push message to it.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"timer:tick"</em></strong>)
.setBody().constant(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Hello"</em></strong>)
to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"telegram:bots/123456789:AAE_dLq5C19xwGjw3yiC2NvEUrZcejK21-Q987654321:AAE_dLq5C19xwOmg5yiC2NvSrkT3wj5Q1-L?chatId=123456"</em></strong>)</pre><p>Note that the corresponding URI parameter is simply <code class="literal">chatId</code>.</p></div></body></html>