<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>MLLP Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="MINA2-MINA2Component.html" title="MINA 2 Component"><link rel="next" href="MongoDB-CamelMongoDBcomponent.html" title="MongoDB component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="Mllp-MllpComponent"></a>MLLP Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="Mllp-MllpComponent.html#MLLP-MLLPOptions">MLLP Options</a></span></dt><dt><span class="section"><a href="Mllp-MllpComponent.html#MLLP-MLLPConsumer">MLLP Consumer</a></span></dt><dt><span class="section"><a href="Mllp-MllpComponent.html#MLLP-MLLPProducer">MLLP Producer</a></span></dt></dl></div><p><span class="strong"><strong>available as of Camel 2.17</strong></span></p><p>The MLLP component is specifically designed to handle the nuances of the
MLLP protocol and provide&nbsp;the functionality required by Healthcare
providers to communicate with other systems using the MLLP protocol.
&nbsp;The MLLP component &nbsp;provides a simple configuration URI, automated HL7
acknowledgment generation and automatic acknowledgement interrogation.</p><p>The MLLP protocol does not typically use a large number of concurrent
TCP connections - a single active TCP connection is the normal case.
&nbsp;Therefore, the MLLP component uses&nbsp;a simple thread-per-connection model
based an standard Java Sockets. This keeps the implementation simple
and&nbsp;eliminates the dependencies other than Camel itself.</p><p>The component supports the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">A Camel consumer using a TCP Server</li><li class="listitem">A Camel producer using a TCP Client</li></ul></div><p>The MLLP component uses byte[] payloads, and relies on Camel Type
Conversion to convert byte[] to other types. &nbsp;</p><p>Maven users will need to add the following dependency to their pom.xml
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-mllp<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="MLLP-MLLPOptions"></a>MLLP Options</h2></div></div></div><p>The MLLP component has no options.</p><p>The MLLP component supports 24 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>hostname</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Hostname or IP for connection for the TCP connection. The default value is null which means any local IP address</p></td></tr><tr><td align="left" valign="top"><p>port</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Port number for the TCP connection</p></td></tr><tr><td align="left" valign="top"><p>autoAck</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Enable/Disable the automatic generation of a MLLP Acknowledgement MLLP Consumers only</p></td></tr><tr><td align="left" valign="top"><p>bufferWrites</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Enable/Disable the validation of HL7 Payloads If enabled MLLP Payloads are buffered and written to the external system in a single write(byte) operation. If disabled the MLLP payload will not be buffered and three write operations will be used. The first operation will write the MLLP start-of-block character 0x0b (ASCII VT) the second operation will write the HL7 payload and the third operation will writh the MLLP end-of-block character and the MLLP end-of-data character 0x1c 0x0d (ASCII FS CR).</p></td></tr><tr><td align="left" valign="top"><p>hl7Headers</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Enable/Disable the automatic generation of message headers from the HL7 Message MLLP Consumers only</p></td></tr><tr><td align="left" valign="top"><p>keepAlive</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Enable/disable the SO_KEEPALIVE socket option.</p></td></tr><tr><td align="left" valign="top"><p>reuseAddress</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Enable/disable the SO_REUSEADDR socket option.</p></td></tr><tr><td align="left" valign="top"><p>tcpNoDelay</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Enable/disable the TCP_NODELAY socket option.</p></td></tr><tr><td align="left" valign="top"><p>validatePayload</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Enable/Disable the validation of HL7 Payloads If enabled HL7 Payloads received from external systems will be validated (see Hl7Util.generateInvalidPayloadExceptionMessage for details on the validation). If and invalid payload is detected a MllpInvalidMessageException (for consumers) or a MllpInvalidAcknowledgementException will be thrown.</p></td></tr><tr><td align="left" valign="top"><p>bridgeErrorHandler</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler which mean any exceptions occurred while the consumer is trying to pickup incoming messages or the likes will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exceptionHandler</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExceptionHandler</code></p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exchangePattern</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExchangePattern</code></p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td></tr><tr><td align="left" valign="top"><p>backlog</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">5</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>The maximum queue length for incoming connection indications (a request to connect) is set to the backlog parameter. If a connection indication arrives when the queue is full the connection is refused.</p></td></tr><tr><td align="left" valign="top"><p>receiveBufferSize</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>Sets the SO_RCVBUF option to the specified value (in bytes)</p></td></tr><tr><td align="left" valign="top"><p>sendBufferSize</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>Sets the SO_SNDBUF option to the specified value (in bytes)</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr><tr><td align="left" valign="top"><p>charsetName</p></td><td align="left" valign="top"><p>codec</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Set the CamelCharsetName property on the exchange</p></td></tr><tr><td align="left" valign="top"><p>acceptTimeout</p></td><td align="left" valign="top"><p>timeout</p></td><td align="left" valign="top"><p><code class="literal">60000</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>Timeout (in milliseconds) while waiting for a TCP connection TCP Server Only</p></td></tr><tr><td align="left" valign="top"><p>bindRetryInterval</p></td><td align="left" valign="top"><p>timeout</p></td><td align="left" valign="top"><p><code class="literal">5000</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>TCP Server Only - The number of milliseconds to wait between bind attempts</p></td></tr><tr><td align="left" valign="top"><p>bindTimeout</p></td><td align="left" valign="top"><p>timeout</p></td><td align="left" valign="top"><p><code class="literal">30000</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>TCP Server Only - The number of milliseconds to retry binding to a server port</p></td></tr><tr><td align="left" valign="top"><p>connectTimeout</p></td><td align="left" valign="top"><p>timeout</p></td><td align="left" valign="top"><p><code class="literal">30000</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>Timeout (in milliseconds) for establishing for a TCP connection TCP Client only</p></td></tr><tr><td align="left" valign="top"><p>maxReceiveTimeouts</p></td><td align="left" valign="top"><p>timeout</p></td><td align="left" valign="top"><p><code class="literal">-1</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>The maximum number of timeouts (specified by receiveTimeout) allowed before the TCP Connection will be reset.</p></td></tr><tr><td align="left" valign="top"><p>readTimeout</p></td><td align="left" valign="top"><p>timeout</p></td><td align="left" valign="top"><p><code class="literal">500</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>The SO_TIMEOUT value (in milliseconds) used after the start of an MLLP frame has been received</p></td></tr><tr><td align="left" valign="top"><p>receiveTimeout</p></td><td align="left" valign="top"><p>timeout</p></td><td align="left" valign="top"><p><code class="literal">10000</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>The SO_TIMEOUT value (in milliseconds) used when waiting for the start of an MLLP frame</p></td></tr></tbody></table></div><p>{% endraw %}</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="MLLP-MLLPConsumer"></a>MLLP Consumer</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="Mllp-MllpComponent.html#MLLP-MessageHeaders">Message Headers</a></span></dt><dt><span class="section"><a href="Mllp-MllpComponent.html#MLLP-ExchangeProperties">Exchange Properties</a></span></dt></dl></div><p>The MLLP Consumer supports receiving MLLP-framed messages and sending
HL7 Acknowledgements. &nbsp;The MLLP Consumer can automatically generate the
HL7 Acknowledgement (HL7 Application Acknowledgements only - AA, AE and
AR), or the acknowledgement can be specified using
the&nbsp;CamelMllpAcknowledgement exchange property. &nbsp;Additionally, the type
of acknowledgement that will be generated can be controlled by setting
the CamelMllpAcknowledgementType exchange property.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="MLLP-MessageHeaders"></a>Message Headers</h3></div></div></div><p>The MLLP Consumer adds these headers on the Camel message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="34%" class="col_1"><col width="33%" class="col_2"><col width="33%" class="col_3"></colgroup><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>Key</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>MSH field</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Example</strong></span></p></td></tr><tr><td align="left" valign="top"><p>CamelMllpLocalAddress</p></td><td align="left" valign="top"><p>&nbsp;</p></td><td align="left" valign="top"><p>&nbsp;</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpRemoteAddress</p></td><td align="left" valign="top"><p>&nbsp;</p></td><td align="left" valign="top"><p>&nbsp;</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpSendingApplication</p></td><td align="left" valign="top"><p>MSH-3</p></td><td align="left" valign="top"><p>APPA</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpSendingFacility</p></td><td align="left" valign="top"><p>MSH-4</p></td><td align="left" valign="top"><p>FACA</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpReceivingApplication</p></td><td align="left" valign="top"><p>MSH-5</p></td><td align="left" valign="top"><p>CAMEL</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpReceivingFacility</p></td><td align="left" valign="top"><p>MSH-6</p></td><td align="left" valign="top"><p>FACB</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpTimestamp</p></td><td align="left" valign="top"><p>MSH-7</p></td><td align="left" valign="top"><p>20150106235900</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpSecurity</p></td><td align="left" valign="top"><p>MSH-8</p></td><td align="left" valign="top"><p>&nbsp;</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpMessageType</p></td><td align="left" valign="top"><p>MSH-9</p></td><td align="left" valign="top"><p>ADT^A04</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpEventType</p></td><td align="left" valign="top"><p>MSH-9-1</p></td><td align="left" valign="top"><p>AD4</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpTriggerEvent</p></td><td align="left" valign="top"><p>MSH-9-2</p></td><td align="left" valign="top"><p>A04</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpMessageControlId</p></td><td align="left" valign="top"><p>MSH-10</p></td><td align="left" valign="top"><p>12345</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpProcessingId</p></td><td align="left" valign="top"><p>MSH-11</p></td><td align="left" valign="top"><p>P</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpVersionId</p></td><td align="left" valign="top"><p>MSH-12</p></td><td align="left" valign="top"><p>2.3.1</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpCharset</p></td><td align="left" valign="top"><p>MSH-18</p></td><td align="left" valign="top"><p>&nbsp;</p></td></tr></tbody></table></div><p>All headers&nbsp;are&nbsp;String&nbsp;types. If a header value is missing, its value
is&nbsp;null.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="MLLP-ExchangeProperties"></a>Exchange Properties</h3></div></div></div><p>The type of acknowledgment the MLLP Consumer generates can be controlled
by these properties on the Camel exchange:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="34%" class="col_1"><col width="33%" class="col_2"><col width="33%" class="col_3"></colgroup><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>Key</strong></span></p></td><td align="left" valign="top"><p>&nbsp;</p></td><td align="left" valign="top"><p><span class="strong"><strong>Example</strong></span></p></td></tr><tr><td align="left" valign="top"><p>CamelMllpAcknowledgement</p></td><td align="left" valign="top"><p>&nbsp;</p></td><td align="left" valign="top"><p>&nbsp;</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpAcknowledgementType</p></td><td align="left" valign="top"><p>&nbsp;</p></td><td align="left" valign="top"><p>&nbsp;AR</p></td></tr></tbody></table></div><p>All headers&nbsp;are&nbsp;String&nbsp;types. If a header value is missing, its value
is&nbsp;null.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="MLLP-MLLPProducer"></a>MLLP Producer</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="Mllp-MllpComponent.html#MLLP-MessageHeaders.1">Message Headers</a></span></dt></dl></div><p>The MLLP Producer supports sending MLLP-framed messages and receiving
HL7 Acknowledgements. &nbsp;The MLLP Producer interrogates the HL7
Acknowledgments and raises exceptions if a negative acknowledgement is
received. &nbsp;The received acknowledgement is interrogated and an exception
is raised in the event of a negative acknowledgement.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="MLLP-MessageHeaders.1"></a>Message Headers</h3></div></div></div><p>The MLLP Producer adds these headers on the Camel message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="34%" class="col_1"><col width="33%" class="col_2"><col width="33%" class="col_3"></colgroup><tbody><tr><td align="left" valign="top"><p><span class="strong"><strong>Key</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>MSH field</strong></span></p></td><td align="left" valign="top"><p><span class="strong"><strong>Example</strong></span></p></td></tr><tr><td align="left" valign="top"><p>CamelMllpLocalAddress</p></td><td align="left" valign="top"><p>&nbsp;</p></td><td align="left" valign="top"><p>&nbsp;</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpRemoteAddress</p></td><td align="left" valign="top"><p>&nbsp;</p></td><td align="left" valign="top"><p>&nbsp;</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpAcknowledgement</p></td><td align="left" valign="top"><p>&nbsp;</p></td><td align="left" valign="top"><p>&nbsp;</p></td></tr><tr><td align="left" valign="top"><p>CamelMllpAcknowledgementType</p></td><td align="left" valign="top"><p>&nbsp;</p></td><td align="left" valign="top"><p>AA</p></td></tr></tbody></table></div><p>All headers&nbsp;are&nbsp;String&nbsp;types. If a header value is missing, its value
is&nbsp;null.</p></div></div></div></body></html>