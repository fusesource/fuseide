<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Language</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-Kura.html" title="Kura"><link rel="next" href="IDU-LDAP.html" title="LDAP"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-Language"></a>Language</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Language_HSH_Language"></a>Language</h2></div></div></div><p><span class="bold"><strong>Available as of Camel 2.5</strong></span>
        </p><p>The language component allows you to send an <a class="link" href="http://camel.apache.org/exchange.html" target="_top">Exchange</a> to an endpoint which
            executes a script by any of the supported <a class="link" href="http://camel.apache.org/language.html" target="_top">Languages</a> in Camel. By having
            a component to execute language scripts, it allows more dynamic routing capabilities.
            For example by using the <span class="phrase">Routing SlipRouting Slip</span> or <span class="phrase">Dynamic
                RouterDynamic Router</span> EIPs you can send messages to
                <code class="literal">language</code> endpoints where the script is dynamic defined as
            well.</p><p>This component is provided out of the box in <code class="literal">camel-core</code> and hence
            no additional JARs is needed. You only have to include additional Camel components if
            the language of choice mandates it, such as using <a class="link" href="http://camel.apache.org/groovy.html" target="_top">Groovy</a>
            or <a class="link" href="http://camel.apache.org/javascript.html" target="_top">JavaScript</a> languages.</p><p>And from Camel 2.11 onwards you can refer to an external resource for the script using
            same notation as supported by the other <a class="link" href="http://camel.apache.org/languages.html" target="_top">Languages</a> in Camel</p><pre class="programlisting">language://languageName:resource:scheme:location][?options]</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Language_HSH_URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">language://languageName[:script][?options]</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Language_HSH_URIOptions"></a>URI Options</h2></div></div></div><p>The component supports the following options.
            
        </p><table id="d0e119080"><tr>
                <th> Name </th>
                <th> Default Value </th>
                <th> Type </th>
                <th> Description </th>
            </tr><tr>
                <td><code class="literal">languageName</code>
                </td>
                <td><code class="literal">null</code>
                </td>
                <td><code class="literal">String</code>
                </td>
                <td> The name of the <a class="link" href="http://camel.apache.org/language.html" target="_top">Language</a> to use, such as
                        <code class="literal">simple</code>, <code class="literal">groovy</code>,
                        <code class="literal">javascript</code> etc. This option is mandatory. </td>
            </tr><tr>
                <td><code class="literal">script</code>
                </td>
                <td><code class="literal">null</code>
                </td>
                <td><code class="literal">String</code>
                </td>
                <td> The script to execute. </td>
            </tr><tr>
                <td><code class="literal">transform</code>
                </td>
                <td><code class="literal">true</code>
                </td>
                <td><code class="literal">boolean</code>
                </td>
                <td> Whether or not the result of the script should be used as the new message body.
                    By setting to <code class="literal">false</code> the script is executed but the result of
                    the script is discarded. </td>
            </tr><tr>
                <td><code class="literal">contentCache</code>
                </td>
                <td><code class="literal">true</code>
                </td>
                <td><code class="literal">boolean</code>
                </td>
                <td>
                    <p><span class="bold"><strong>Camel 2.9:</strong></span> Whether to cache the script if
                        loaded from a resource. Note: from <span class="bold"><strong>Camel
                            2.10.3</strong></span> a cached script can be forced to reload at runtime via
                        JMX using the clearContentCache operation. </p>
                </td>
            </tr><tr>
                <td><p><code class="code">cacheScript</code></p></td>
                <td><p><code class="code">false</code></p></td>
                <td><p><code class="code">boolean</code></p></td>
                <td><p><span class="emphasis"><em>Camel 2.13/2.12.2/2.11.3:</em></span> Whether to
                        cache the compiled script. Turning this option on can gain performance as
                        the script is only compiled/created once, and reuse when processing Camel
                        messages. But this may cause side-effects with data left from previous
                        evaluation spills into the next, and concurrency issues as well. If the
                        script being evaluated is idempotent then this option can be turned
                    on.</p></td>
            </tr><tr>
                <td><code class="code">binary</code></td>
                <td><code class="code">false</code></td>
                <td><code class="code">boolean</code></td>
                <td><span class="emphasis"><em>Camel 2.14.1:</em></span> Whether the
                    script is binary content. This is intended to be used for loading resources
                    using the Constant language, such as loading binary files.</td>
            </tr></table><p>
            
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Language_HSH_MessageHeaders"></a>Message Headers</h2></div></div></div><p>The following message headers can be used to affect the behavior of the
            component</p><p>
            
        </p><table id="d0e119254"><tr>
                <th> Header </th>
                <th> Description </th>
            </tr><tr>
                <td><code class="literal">CamelLanguageScript</code>
                </td>
                <td> The script to execute provided in the header. Takes precedence over script
                    configured on the endpoint. </td>
            </tr></table><p>
            
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Language_HSH_Examples"></a>Examples</h2></div></div></div><p>For example you can use the <a class="link" href="http://camel.apache.org/simple.html" target="_top">Simple</a> language to
                <span class="phrase">Message TranslatorMessage Translator</span> a message:</p><pre class="programlisting">String script = URLEncoder.encode("Hello ${body}", "UTF-8");
from("direct:start").to("language:simple:" + script).to("mock:result");</pre><p>In case you want to convert the message body type you can do this as well:</p><pre class="programlisting">String script = URLEncoder.encode("${mandatoryBodyAs(String)}", "UTF-8");
from("direct:start").to("language:simple:" + script).to("mock:result");</pre><p>You can also use the <a class="link" href="http://camel.apache.org/groovy.html" target="_top">Groovy</a> language, such as this
            example where the input message will by multiplied with 2:</p><pre class="programlisting">from("direct:start").to("language:groovy:request.body * 2").to("mock:result");
</pre><p>You can also provide the script as a header as shown below. Here we use <a class="link" href="http://camel.apache.org/xpath.html" target="_top">XPath</a> language to extract the text from the
                <code class="literal">&lt;foo&gt;</code> tag.</p><pre class="programlisting">Object out = producer.requestBodyAndHeader("language:xpath", "&lt;foo&gt;Hello World&lt;/foo&gt;", Exchange.LANGUAGE_SCRIPT, "/foo/text()");
assertEquals("Hello World", out);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Language_HSH_Loadingscriptsfromresources"></a>Loading scripts from resources</h2></div></div></div><p><span class="bold"><strong>Available as of Camel 2.9</strong></span>
        </p><p>You can specify a resource uri for a script to load in either the endpoint uri, or in
            the <code class="literal">Exchange.LANGUAGE_SCRIPT</code> header. The uri must start with one of
            the following schemes: file:, classpath:, or http:</p><p>For example to load a script from the classpath:</p><pre class="programlisting">from("direct:start")
    // load the script from the classpath
    .to("language:simple:classpath:org/apache/camel/component/language/mysimplescript.txt")
    .to("mock:result");
</pre><p>By default the script is loaded once and cached. However you can disable the
                <code class="literal">contentCache</code> option and have the script loaded on each
            evaluation. For example if the file myscript.txt is changed on disk, then the updated
            script is used:</p><pre class="programlisting">from("direct:start")
    // the script will be loaded on each message, as we disabled cache
    .to("language:simple:file:target/script/myscript.txt?contentCache=false")
    .to("mock:result");</pre><p>From <span class="bold"><strong>Camel 2.11</strong></span> onwards you can refer to the resource
            similar to the other <a class="link" href="http://camel.apache.org/languages.html" target="_top">Languages</a> in Camel by
            prefixing with <code class="literal">"resource:"</code> as shown below:</p><pre class="programlisting">from("direct:start")
    // load the script from the classpath
    .to("language:simple:resource:classpath:org/apache/camel/component/language/mysimplescript.txt")
    .to("mock:result");</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="http://camel.apache.org/languages.html" target="_top">Languages</a>
                </p></li><li class="listitem"><p><span class="phrase">Routing SlipRouting Slip</span>
                </p></li><li class="listitem"><p><span class="phrase">Dynamic RouterDynamic Router</span>
                </p></li></ul></div></div></div></body></html>