<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chunk</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-Cassandra.html" title="Cassandra"><link rel="next" href="IDU-Class.html" title="Class"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-Chunk"></a>Chunk</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Chunk_HSH_ChunkComponent"></a>Chunk Component</h2></div></div></div><p>
            <span class="bold"><strong>Available as of Camel 2.15</strong></span>
        </p><p>The <span class="bold"><strong>chunk:</strong></span> component allows for processing a message using a <a class="link" href="http://www.x5software.com/chunk/examples/ChunkExample?loc=en_US" target="_top">Chunk</a>
            template. This can be ideal when using <a class="link" href="http://camel.apache.org/templating.html" target="_top">Templating</a> to generate responses for
            requests.</p><p>Maven users will need to add the following dependency to their <code class="code">pom.xml</code> for
            this component:</p><pre class="programlisting">&lt;dependency&gt;
&lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
&lt;artifactId&gt;camel-chunk&lt;/artifactId&gt;
&lt;version&gt;x.x.x&lt;/version&gt; &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e62851"></a>URI format</h2></div></div></div><pre class="programlisting">chunk:templateName[?options]</pre><p>Where <span class="bold"><strong>templateName</strong></span> is the classpath-local URI of the template to
            invoke.</p><p>You can append query options to the URI in the following format,
                <code class="code">?option=value&amp;option=value&amp;...</code></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e62865"></a>Options</h2></div></div></div><table id="d0e62868"><tbody><tr>
                                <th><p>Option</p></th>
                                <th><p>Default</p></th>
                                <th><p>Description</p></th>
                            </tr><tr>
                                <td><p><code class="code">encoding</code></p></td>
                                <td><p><code class="code">null</code></p></td>
                                <td><p>Character encoding of the resource
                                        content.</p></td>
                            </tr><tr>
                                <td><p>themesFolder</p></td>
                                <td><p><code class="code">null</code></p></td>
                                <td><p>Alternative folder to scan for a
                                        template name.</p></td>
                            </tr><tr>
                                <td><p>themeSubfolder</p></td>
                                <td><p><code class="code">null</code></p></td>
                                <td><p>Alternative subfolder to scan for a
                                        template name if themeFolder parameter is set.</p></td>
                            </tr><tr>
                                <td><p><code class="code">themeLayer</code></p></td>
                                <td><p><code class="code">null</code></p></td>
                                <td><p>A specific layer of a template file to
                                        use as template.</p></td>
                            </tr><tr>
                                <td><p><code class="code">extension</code></p></td>
                                <td><p><code class="code">null</code></p></td>
                                <td><p>Alternative extension to scan for a
                                        template name if themeFolder and themeSubfolder are
                                    set.</p></td>
                            </tr></tbody></table><p>Chunk component will look for a specific template in <span class="emphasis"><em>themes</em></span> folder with
            extensions <span class="emphasis"><em>.chtml</em></span> or <span class="emphasis"><em>.cxml. </em></span>If you need to specify a different folder
            or extensions, you will need to use the specific options listed above.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e62973"></a>Chunk Context</h2></div></div></div><p>Camel will provide exchange information in the Chunk context (just a <code class="code">Map</code>).
            The <code class="code">Exchange</code> is transferred as:</p><table id="d0e62984"><tbody><tr>
                                <th><p>key</p></th>
                                <th><p>value</p></th>
                            </tr><tr>
                                <td><p><code class="code">exchange</code></p></td>
                                <td><p>The <code class="code">Exchange</code>
                                    itself.</p></td>
                            </tr><tr>
                                <td><p><code class="code">exchange.properties</code></p></td>
                                <td><p>The <code class="code">Exchange</code>
                                        properties.</p></td>
                            </tr><tr>
                                <td><p><code class="code">headers</code></p></td>
                                <td><p>The headers of the In message.</p></td>
                            </tr><tr>
                                <td><p><code class="code">camelContext</code></p></td>
                                <td><p>The Camel Context.</p></td>
                            </tr><tr>
                                <td><p><code class="code">request</code></p></td>
                                <td><p>The In message.</p></td>
                            </tr><tr>
                                <td><p><code class="code">body</code></p></td>
                                <td><p>The In message body.</p></td>
                            </tr><tr>
                                <td><p><code class="code">response</code></p></td>
                                <td><p>The Out message (only for InOut message
                                        exchange pattern).</p></td>
                            </tr></tbody></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e63079"></a>Dynamic templates</h2></div></div></div><p>Camel provides two headers by which you can define a different resource location for a
            template or the template content itself. If any of these headers is set then Camel uses
            this over the endpoint configured resource. This allows you to provide a dynamic
            template at runtime.</p><table id="d0e63084"><tbody><tr>
                                <th><p>Header</p></th>
                                <th><p>Type</p></th>
                                <th><p>Description</p></th>
                                <th><p>Support Version</p></th>
                            </tr><tr>
                                <td><p>ChunkConstants.CHUNK_RESOURCE_URI</p></td>
                                <td><p>String</p></td>
                                <td><p>A URI for the template resource to use
                                        instead of the endpoint configured.</p></td>
                                <td><p> </p></td>
                            </tr><tr>
                                <td><p>ChunkConstants.CHUNK_TEMPLATE</p></td>
                                <td><p>String</p></td>
                                <td><p>The template to use instead of the
                                        endpoint configured.</p></td>
                                <td><p> </p></td>
                            </tr></tbody></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e63140"></a>Samples</h2></div></div></div><p>For example you could use something like:</p><pre class="programlisting">from("activemq:My.Queue").
to("chunk:template");</pre><p>To use a Chunk template to formulate a response for a message for InOut message exchanges
            (where there is a <code class="code">JMSReplyTo</code> header).</p><p>If you want to use InOnly and consume the message and send it to another destination you
            could use:</p><pre class="programlisting">from("activemq:My.Queue").
to("chunk:template").
to("activemq:Another.Queue");</pre><p>It's possible to specify what template the component should use dynamically via a header,
            so for example:</p><pre class="programlisting">from("direct:in").
setHeader(ChunkConstants.CHUNK_RESOURCE_URI).constant("template").
to("chunk:dummy");</pre><p>An example of Chunk component options use:</p><pre class="programlisting">from("direct:in").
to("chunk:file_example?themeFolder=template&amp;themeSubfolder=subfolder&amp;extension=chunk");</pre><p>In this example Chunk component will look for the file <span class="emphasis"><em>file_example.chunk</em></span> in the
            folder <span class="emphasis"><em>template/subfolder.</em></span></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e63171"></a>The Email Sample</h2></div></div></div><p>In this sample we want to use Chunk templating for an order confirmation email. The email
            template is laid out in Chunk as:</p><pre class="programlisting">Dear {$headers.lastName}, {$headers.firstName}

Thanks for the order of {$headers.item}.

Regards Camel Riders Bookstore
{$body}</pre></div></div></body></html>