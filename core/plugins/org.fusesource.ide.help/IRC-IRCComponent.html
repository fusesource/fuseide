<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>IRC Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="iBATIS-iBATIS.html" title="iBATIS Component"><link rel="next" href="Jasypt-Jasyptcomponent.html" title="Jasypt component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="IRC-IRCComponent"></a>IRC Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="IRC-IRCComponent.html#IRC-URIformat">URI format</a></span></dt><dt><span class="section"><a href="IRC-IRCComponent.html#IRC-Options">Options</a></span></dt><dt><span class="section"><a href="IRC-IRCComponent.html#IRC-SSLSupport">SSL Support</a></span></dt><dt><span class="section"><a href="IRC-IRCComponent.html#IRC-Usingkeys">Using keys</a></span></dt><dt><span class="section"><a href="IRC-IRCComponent.html#_getting_a_list_of_users_of_the_channel">Getting a list of users of the channel</a></span></dt><dt><span class="section"><a href="IRC-IRCComponent.html#IRC-SeeAlso">See Also</a></span></dt></dl></div><p>The <span class="strong"><strong>irc</strong></span> component implements an
<a class="link" href="http://en.wikipedia.org/wiki/Internet_Relay_Chat" target="_top">IRC</a> (Internet Relay
Chat) transport.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-irc<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IRC-URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">irc:nick<em xmlns="http://www.w3.org/1999/xhtml"><span class="hl-annotation" style="color: gray">@host[:port]/#room[?options]</span></em>
irc:nick@host[:port]?channels=#channel1,#channel2,#channel3[?options]</pre><p>You can append query options to the URI in the following format,
<code class="literal">?option=value&amp;option=value&amp;&#8230;&#8203;</code></p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IRC-Options"></a>Options</h2></div></div></div><p>The IRC component has no options.</p><p>The IRC component supports 26 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>hostname</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Hostname for the IRC chat server</p></td></tr><tr><td align="left" valign="top"><p>port</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">6667,6668,6669</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>Port number for the IRC chat server</p></td></tr><tr><td align="left" valign="top"><p>autoRejoin</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Whether to auto re-join when being kicked</p></td></tr><tr><td align="left" valign="top"><p>namesOnJoin</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sends NAMES command to channel after joining it. link onReply has to be true in order to process the result which will have the header value irc.num = '353'.</p></td></tr><tr><td align="left" valign="top"><p>nickname</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The nickname used in chat.</p></td></tr><tr><td align="left" valign="top"><p>persistent</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Use persistent messages.</p></td></tr><tr><td align="left" valign="top"><p>realname</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The IRC user&#8217;s actual name.</p></td></tr><tr><td align="left" valign="top"><p>bridgeErrorHandler</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler which mean any exceptions occurred while the consumer is trying to pickup incoming messages or the likes will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exceptionHandler</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExceptionHandler</code></p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exchangePattern</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExchangePattern</code></p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td></tr><tr><td align="left" valign="top"><p>colors</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Whether or not the server supports color codes.</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr><tr><td align="left" valign="top"><p>onJoin</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Handle user join events.</p></td></tr><tr><td align="left" valign="top"><p>onKick</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Handle kick events.</p></td></tr><tr><td align="left" valign="top"><p>onMode</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Handle mode change events.</p></td></tr><tr><td align="left" valign="top"><p>onNick</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Handle nickname change events.</p></td></tr><tr><td align="left" valign="top"><p>onPart</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Handle user part events.</p></td></tr><tr><td align="left" valign="top"><p>onPrivmsg</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Handle private message events.</p></td></tr><tr><td align="left" valign="top"><p>onQuit</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Handle user quit events.</p></td></tr><tr><td align="left" valign="top"><p>onReply</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Whether or not to handle general responses to commands or informational messages.</p></td></tr><tr><td align="left" valign="top"><p>onTopic</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Handle topic change events.</p></td></tr><tr><td align="left" valign="top"><p>nickPassword</p></td><td align="left" valign="top"><p>security</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Your IRC server nickname password.</p></td></tr><tr><td align="left" valign="top"><p>password</p></td><td align="left" valign="top"><p>security</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The IRC server password.</p></td></tr><tr><td align="left" valign="top"><p>sslContextParameters</p></td><td align="left" valign="top"><p>security</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">SSLContextParameters</code></p></td><td align="left" valign="top"><p>Used for configuring security using SSL. Reference to a org.apache.camel.util.jsse.SSLContextParameters in the Registry. This reference overrides any configured SSLContextParameters at the component level. Note that this setting overrides the trustManager option.</p></td></tr><tr><td align="left" valign="top"><p>trustManager</p></td><td align="left" valign="top"><p>security</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">SSLTrustManager</code></p></td><td align="left" valign="top"><p>The trust manager used to verify the SSL server&#8217;s certificate.</p></td></tr><tr><td align="left" valign="top"><p>username</p></td><td align="left" valign="top"><p>security</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The IRC server user name.</p></td></tr></tbody></table></div><p>{% endraw %}</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IRC-SSLSupport"></a>SSL Support</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="IRC-IRCComponent.html#IRC-UsingtheJSSEConfigurationUtility">Using the JSSE Configuration Utility</a></span></dt><dt><span class="section"><a href="IRC-IRCComponent.html#IRC-Usingthelegacybasicconfigurationoptions">Using the legacy basic configuration options</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="IRC-UsingtheJSSEConfigurationUtility"></a>Using the JSSE Configuration Utility</h3></div></div></div><p>As of Camel 2.9, the IRC component supports SSL/TLS configuration
through the <a class="link" href="camel-configuration-utilities.html" target="_top">Camel JSSE
Configuration Utility</a>.&nbsp; This utility greatly decreases the amount of
component specific code you need to write and is configurable at the
endpoint and component levels.&nbsp; The following examples demonstrate how
to use the utility with the IRC component.</p><p><a name="IRC-Programmaticconfigurationoftheendpoint"></a>Programmatic configuration of the endpoint</p><pre class="programlisting">KeyStoreParameters ksp = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> KeyStoreParameters();
ksp.setResource(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"/users/home/server/truststore.jks"</em></strong>);
ksp.setPassword(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"keystorePassword"</em></strong>);

TrustManagersParameters tmp = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> TrustManagersParameters();
tmp.setKeyStore(ksp);

SSLContextParameters scp = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> SSLContextParameters();
scp.setTrustManagers(tmp);

Registry registry = ...
registry.bind(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"sslContextParameters"</em></strong>, scp);

...

from(...)
    .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"ircs://camel-prd-user@server:6669/#camel-test?nickname=camel-prd&amp;password=password&amp;sslContextParameters=#sslContextParameters"</em></strong>);</pre><p><a name="IRC-SpringDSLbasedconfigurationofendpoint"></a>Spring DSL based configuration of endpoint</p><pre class="programlisting">...
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camel:sslContextParameters</strong>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"sslContextParameters"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camel:trustManagers&gt;</strong>
      <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camel:keyStore</strong>
          <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">resource</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"/users/home/server/truststore.jks"</span>
          <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">password</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"keystorePassword"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camel:keyManagers&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camel:sslContextParameters&gt;</strong>...
...
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"ircs://camel-prd-user@server:6669/#camel-test?nickname=camel-prd&amp;password=password&amp;sslContextParameters=#sslContextParameters"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>...</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="IRC-Usingthelegacybasicconfigurationoptions"></a>Using the legacy basic configuration options</h3></div></div></div><p>You can also connect to an SSL enabled IRC server, as follows:</p><pre class="programlisting">ircs:host[:port]/#room?username=user&amp;password=pass</pre><p>By default, the IRC transport uses
<a class="link" href="http://moepii.sourceforge.net/irclib/javadoc/org/schwering/irc/lib/ssl/SSLDefaultTrustManager.html" target="_top">SSLDefaultTrustManager</a>.
If you need to provide your own custom trust manager, use the
<code class="literal">trustManager</code> parameter as follows:</p><pre class="programlisting">ircs:host[:port]/#room?username=user&amp;password=pass&amp;trustManager=#referenceToMyTrustManagerBean</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IRC-Usingkeys"></a>Using keys</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.2</strong></span></p><p>Some irc rooms requires you to provide a key to be able to join that
channel. The key is just a secret word.</p><p>For example we join 3 channels where as only channel 1 and 3 uses a key.</p><pre class="programlisting">irc:nick@irc.server.org?channels=#chan1,#chan2,#chan3&amp;keys=chan1Key,,chan3key</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_getting_a_list_of_users_of_the_channel"></a>Getting a list of users of the channel</h2></div></div></div><p>Using the <code class="literal">namesOnJoin</code> option one can invoke the IRC-<code class="literal">NAMES</code> command after the component has joined a channel.
The server will reply with <code class="literal">irc.num = 353</code>. So in order to process the result the property <code class="literal">onReply</code> has to be <code class="literal">true</code>.
Furthermore one has to filter the <code class="literal">onReply</code> exchanges in order to get the names.</p><p>For example we want to get all exchanges that contain the usernames of the channel:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"ircs:nick@myserver:1234/#mychannelname?listOnJoin=true&amp;onReply=true"</em></strong>)
	.choice()
		.when(header(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"irc.messageType"</em></strong>).isEqualToIgnoreCase(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"REPLY"</em></strong>))
			.filter(header(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"irc.num"</em></strong>).isEqualTo(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"353"</em></strong>))
			.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>).stop();</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IRC-SeeAlso"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="configuring-camel.html" target="_top">Configuring Camel</a></li><li class="listitem"><a class="link" href="component.html" target="_top">Component</a></li><li class="listitem"><a class="link" href="endpoint.html" target="_top">Endpoint</a></li><li class="listitem"><a class="link" href="getting-started.html" target="_top">Getting Started</a></li></ul></div></div></div></body></html>