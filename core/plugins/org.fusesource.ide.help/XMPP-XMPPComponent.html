<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>XMPP Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="XMLSecuritycomponent-XMLSecuritycomponent.html" title="XML Security component"><link rel="next" href="XQuery-XQuery.html" title="XQuery Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="XMPP-XMPPComponent"></a>XMPP Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="XMPP-XMPPComponent.html#XMPP-URIformat">URI format</a></span></dt><dt><span class="section"><a href="XMPP-XMPPComponent.html#XMPP-Options">Options</a></span></dt><dt><span class="section"><a href="XMPP-XMPPComponent.html#XMPP-HeadersandsettingSubjectorLanguage">Headers and setting Subject or Language</a></span></dt><dt><span class="section"><a href="XMPP-XMPPComponent.html#XMPP-Examples">Examples</a></span></dt><dt><span class="section"><a href="XMPP-XMPPComponent.html#XMPP-SeeAlso">See Also</a></span></dt></dl></div><p>The <span class="strong"><strong>xmpp:</strong></span> component implements an XMPP (Jabber) transport.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-xmpp<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="XMPP-URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">xmpp://[login@]hostname[:port][/participant][?Options]</pre><p>The component supports both room based and private person-person
conversations.
 The component supports both producer and consumer (you can get messages
from XMPP or send messages to XMPP). Consumer mode supports rooms
starting.</p><p>You can append query options to the URI in the following format,
<code class="literal">?option=value&amp;option=value&amp;&#8230;&#8203;</code></p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="XMPP-Options"></a>Options</h2></div></div></div><p>The XMPP component has no options.</p><p>The XMPP component supports 21 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>host</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Hostname for the chat server</p></td></tr><tr><td align="left" valign="top"><p>port</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Port number for the chat server</p></td></tr><tr><td align="left" valign="top"><p>participant</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>JID (Jabber ID) of person to receive messages. room parameter has precedence over participant.</p></td></tr><tr><td align="left" valign="top"><p>login</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Whether to login the user.</p></td></tr><tr><td align="left" valign="top"><p>nickname</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Use nickname when joining room. If room is specified and nickname is not user will be used for the nickname.</p></td></tr><tr><td align="left" valign="top"><p>pubsub</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Accept pubsub packets on input default is false</p></td></tr><tr><td align="left" valign="top"><p>room</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>If this option is specified the component will connect to MUC (Multi User Chat). Usually the domain name for MUC is different from the login domain. For example if you are supermanjabber.org and want to join the krypton room then the room URL is kryptonconference.jabber.org. Note the conference part. It is not a requirement to provide the full room JID. If the room parameter does not contain the symbol the domain part will be discovered and added by Camel</p></td></tr><tr><td align="left" valign="top"><p>serviceName</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The name of the service you are connecting to. For Google Talk this would be gmail.com.</p></td></tr><tr><td align="left" valign="top"><p>testConnectionOnStartup</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Specifies whether to test the connection on startup. This is used to ensure that the XMPP client has a valid connection to the XMPP server when the route starts. Camel throws an exception on startup if a connection cannot be established. When this option is set to false Camel will attempt to establish a lazy connection when needed by a producer and will poll for a consumer connection until the connection is established. Default is true.</p></td></tr><tr><td align="left" valign="top"><p>createAccount</p></td><td align="left" valign="top"><p>common (advanced)</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If true an attempt to create an account will be made. Default is false.</p></td></tr><tr><td align="left" valign="top"><p>resource</p></td><td align="left" valign="top"><p>common (advanced)</p></td><td align="left" valign="top"><p><code class="literal">Camel</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>XMPP resource. The default is Camel.</p></td></tr><tr><td align="left" valign="top"><p>bridgeErrorHandler</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler which mean any exceptions occurred while the consumer is trying to pickup incoming messages or the likes will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>connectionPollDelay</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">10</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>The amount of time in seconds between polls (in seconds) to verify the health of the XMPP connection or between attempts to establish an initial consumer connection. Camel will try to re-establish a connection if it has become inactive. Default is 10 seconds.</p></td></tr><tr><td align="left" valign="top"><p>doc</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Set a doc header on the IN message containing a Document form of the incoming packet; default is true if presence or pubsub are true otherwise false</p></td></tr><tr><td align="left" valign="top"><p>exceptionHandler</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExceptionHandler</code></p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exchangePattern</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExchangePattern</code></p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td></tr><tr><td align="left" valign="top"><p>connectionConfig</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ConnectionConfiguration</code></p></td><td align="left" valign="top"><p>To use an existing connection configuration</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr><tr><td align="left" valign="top"><p>headerFilterStrategy</p></td><td align="left" valign="top"><p>filter</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">HeaderFilterStrategy</code></p></td><td align="left" valign="top"><p>To use a custom HeaderFilterStrategy to filter header to and from Camel message.</p></td></tr><tr><td align="left" valign="top"><p>password</p></td><td align="left" valign="top"><p>security</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Password for login</p></td></tr><tr><td align="left" valign="top"><p>user</p></td><td align="left" valign="top"><p>security</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>User name (without server name). If not specified anonymous login will be attempted.</p></td></tr></tbody></table></div><p>{% endraw %}</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="XMPP-HeadersandsettingSubjectorLanguage"></a>Headers and setting Subject or Language</h2></div></div></div><p>Camel sets the message IN headers as properties on the XMPP message. You
can configure a <code class="literal">HeaderFilterStategy</code> if you need custom filtering of
headers.
The <span class="strong"><strong>Subject</strong></span> and <span class="strong"><strong>Language</strong></span> of the XMPP message are also set if they
are provided as IN headers.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="XMPP-Examples"></a>Examples</h2></div></div></div><p>User <code class="literal">superman</code> to join room <code class="literal">krypton</code> at <code class="literal">jabber</code> server with password,
<code class="literal">secret</code>:</p><pre class="programlisting">xmpp://superman@jabber.org/?room=krypton@conference.jabber.org&amp;password=secret</pre><p>User <code class="literal">superman</code> to send messages to <code class="literal">joker</code>:</p><pre class="programlisting">xmpp://superman@jabber.org/joker@jabber.org?password=secret</pre><p>Routing example in Java:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"timer://kickoff?period=10000"</em></strong>).
setBody(constant(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"I will win!\n Your Superman."</em></strong>)).
to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"xmpp://superman@jabber.org/joker@jabber.org?password=secret"</em></strong>);</pre><p>Consumer configuration, which writes all messages from <code class="literal">joker</code> into the
queue, <code class="literal">evil.talk</code>.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"xmpp://superman@jabber.org/joker@jabber.org?password=secret"</em></strong>).
to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:evil.talk"</em></strong>);</pre><p>Consumer configuration, which listens to room messages:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"xmpp://superman@jabber.org/?password=secret&amp;room=krypton@conference.jabber.org"</em></strong>).
to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:krypton.talk"</em></strong>);</pre><p>Room in short notation (no domain part):</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"xmpp://superman@jabber.org/?password=secret&amp;room=krypton"</em></strong>).
to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:krypton.talk"</em></strong>);</pre><p>When connecting to the Google Chat service, you&#8217;ll need to specify the
<code class="literal">serviceName</code> as well as your credentials:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong>).
  to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"xmpp://talk.google.com:5222/touser@gmail.com?serviceName=gmail.com&amp;user=fromuser&amp;password=secret"</em></strong>).
  to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre><p>&nbsp;</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="XMPP-SeeAlso"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="configuring-camel.html" target="_top">Configuring Camel</a></li><li class="listitem"><a class="link" href="component.html" target="_top">Component</a></li><li class="listitem"><a class="link" href="endpoint.html" target="_top">Endpoint</a></li><li class="listitem"><a class="link" href="getting-started.html" target="_top">Getting Started</a></li></ul></div></div></div></body></html>