<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Log Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="IDU-List.html" title="List Component"><link rel="next" href="Lucene-LuceneIndexerandSearchComponent.html" title="Lucene (Indexer and Search) Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="Log-LogComponent"></a>Log Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="Log-LogComponent.html#Log-URIformat">URI format</a></span></dt><dt><span class="section"><a href="Log-LogComponent.html#Log-Options">Options</a></span></dt><dt><span class="section"><a href="Log-LogComponent.html#Log-Regularloggersample">Regular logger sample</a></span></dt><dt><span class="section"><a href="Log-LogComponent.html#Log-Regularloggerwithformattersample">Regular logger with formatter sample</a></span></dt><dt><span class="section"><a href="Log-LogComponent.html#Log-ThroughputloggerwithgroupSizesample">Throughput logger with groupSize sample</a></span></dt><dt><span class="section"><a href="Log-LogComponent.html#Log-ThroughputloggerwithgroupIntervalsample">Throughput logger with groupInterval sample</a></span></dt><dt><span class="section"><a href="Log-LogComponent.html#Log-Fullcustomizationoftheloggingoutput">Full customization of the logging output</a></span></dt><dt><span class="section"><a href="Log-LogComponent.html#Log-SeeAlso">See Also</a></span></dt></dl></div><p>The <span class="strong"><strong>log:</strong></span> component logs message exchanges to the underlying logging
mechanism.</p><p>Camel uses <a class="link" href="http://www.slf4j.org/" target="_top">sfl4j</a> which allows you to configure
logging via, among others:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="http://logging.apache.org/log4j/" target="_top">Log4j</a></li><li class="listitem"><a class="link" href="http://logback.qos.ch/" target="_top">Logback</a>
*
<a class="link" href="http://java.sun.com/j2se/1.4.2/docs/api/java/util/logging/package-summary.html" target="_top">JDK
Util Logging logging</a></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Log-URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">log:loggingCategory[?options]</pre><p>Where <span class="strong"><strong>loggingCategory</strong></span> is the name of the logging category to use. You
can append query options to the URI in the following format,
<code class="literal">?option=value&amp;option=value&amp;&#8230;&#8203;</code></p><p>INFO:*Using Logger instance from the the Registry*
As of <span class="strong"><strong>Camel 2.12.4/2.13.1</strong></span>, if there&#8217;s single instance
of&nbsp;<code class="literal">org.slf4j.Logger</code> found in the Registry, the <span class="strong"><strong>loggingCategory</strong></span> is no
longer used to create logger instance. The registered instance is used
instead. Also it is possible to reference particular&nbsp;<code class="literal">Logger</code> instance
using&nbsp;<code class="literal">?logger=#myLogger</code> URI parameter. Eventually, if there&#8217;s no
registered and URI&nbsp;<code class="literal">logger</code> parameter, the logger instance is created
using <span class="strong"><strong>loggingCategory</strong></span>.</p><p>For example, a log endpoint typically specifies the logging level using
the <code class="literal">level</code> option, as follows:</p><pre class="programlisting">log:org.apache.camel.example?level=DEBUG</pre><p>The default logger logs every exchange (<span class="emphasis"><em>regular logging</em></span>). But Camel
also ships with the <code class="literal">Throughput</code> logger, which is used whenever the
<code class="literal">groupSize</code> option is specified.</p><p>TIP:*Also a log in the DSL*
There is also a <code class="literal">log</code> directly in the DSL, but it has a different
purpose. Its meant for lightweight and human logs. See more details at
<a class="link" href="logeip.html" target="_top">LogEIP</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Log-Options"></a>Options</h2></div></div></div><p>The Log component supports 1 options which are listed below.</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="70%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>exchangeFormatter</p></td><td align="left" valign="top"><p><code class="literal">ExchangeFormatter</code></p></td><td align="left" valign="top"><p>Sets a custom ExchangeFormatter to convert the Exchange to a String suitable for logging. If not specified we default to DefaultExchangeFormatter.</p></td></tr></tbody></table></div><p>{% endraw %}</p><p>The Log component supports 26 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>loggerName</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The logger name to use</p></td></tr><tr><td align="left" valign="top"><p>groupActiveOnly</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>If true will hide stats when no new messages have been received for a time interval if false show stats regardless of message traffic.</p></td></tr><tr><td align="left" valign="top"><p>groupDelay</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Long</code></p></td><td align="left" valign="top"><p>Set the initial delay for stats (in millis)</p></td></tr><tr><td align="left" valign="top"><p>groupInterval</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Long</code></p></td><td align="left" valign="top"><p>If specified will group message stats by this time interval (in millis)</p></td></tr><tr><td align="left" valign="top"><p>groupSize</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>An integer that specifies a group size for throughput logging.</p></td></tr><tr><td align="left" valign="top"><p>level</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top"><p><code class="literal">INFO</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Logging level to use. The default value is INFO.</p></td></tr><tr><td align="left" valign="top"><p>marker</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>An optional Marker name to use.</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr><tr><td align="left" valign="top"><p>maxChars</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">10000</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>Limits the number of characters logged per line.</p></td></tr><tr><td align="left" valign="top"><p>multiline</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If enabled then each information is outputted on a newline.</p></td></tr><tr><td align="left" valign="top"><p>showAll</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Quick option for turning all options on. (multiline maxChars has to be manually set if to be used)</p></td></tr><tr><td align="left" valign="top"><p>showBody</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Show the message body.</p></td></tr><tr><td align="left" valign="top"><p>showBodyType</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Show the body Java type.</p></td></tr><tr><td align="left" valign="top"><p>showCaughtException</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>f the exchange has a caught exception show the exception message (no stack trace). A caught exception is stored as a property on the exchange (using the key link org.apache.camel.ExchangeEXCEPTION_CAUGHT and for instance a doCatch can catch exceptions.</p></td></tr><tr><td align="left" valign="top"><p>showException</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If the exchange has an exception show the exception message (no stacktrace)</p></td></tr><tr><td align="left" valign="top"><p>showExchangeId</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Show the unique exchange ID.</p></td></tr><tr><td align="left" valign="top"><p>showExchangePattern</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Shows the Message Exchange Pattern (or MEP for short).</p></td></tr><tr><td align="left" valign="top"><p>showFiles</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If enabled Camel will output files</p></td></tr><tr><td align="left" valign="top"><p>showFuture</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If enabled Camel will on Future objects wait for it to complete to obtain the payload to be logged.</p></td></tr><tr><td align="left" valign="top"><p>showHeaders</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Show the message headers.</p></td></tr><tr><td align="left" valign="top"><p>showOut</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If the exchange has an out message show the out message.</p></td></tr><tr><td align="left" valign="top"><p>showProperties</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Show the exchange properties.</p></td></tr><tr><td align="left" valign="top"><p>showStackTrace</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Show the stack trace if an exchange has an exception. Only effective if one of showAll showException or showCaughtException are enabled.</p></td></tr><tr><td align="left" valign="top"><p>showStreams</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Whether Camel should show stream bodies or not (eg such as java.io.InputStream). Beware if you enable this option then you may not be able later to access the message body as the stream have already been read by this logger. To remedy this you will have to use Stream Caching.</p></td></tr><tr><td align="left" valign="top"><p>skipBodyLineSeparator</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Whether to skip line separators when logging the message body. This allows to log the message body in one line setting this option to false will preserve any line separators from the body which then will log the body as is.</p></td></tr><tr><td align="left" valign="top"><p>style</p></td><td align="left" valign="top"><p>formatting</p></td><td align="left" valign="top"><p><code class="literal">Default</code></p></td><td align="left" valign="top"><p><code class="literal">OutputStyle</code></p></td><td align="left" valign="top"><p>Sets the outputs style to use.</p></td></tr></tbody></table></div><p>{% endraw %}</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Log-Regularloggersample"></a>Regular logger sample</h2></div></div></div><p>In the route below we log the incoming orders at <code class="literal">DEBUG</code> level before
the order is processed:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:orders"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"log:com.mycompany.order?level=DEBUG"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bean:processOrder"</em></strong>);</pre><p>Or using Spring XML to define the route:</p><pre class="programlisting">  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"activemq:orders"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"log:com.mycompany.order?level=DEBUG"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"bean:processOrder"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Log-Regularloggerwithformattersample"></a>Regular logger with formatter sample</h2></div></div></div><p>In the route below we log the incoming orders at <code class="literal">INFO</code> level before the
order is processed.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:orders"</em></strong>).
    to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"log:com.mycompany.order?showAll=true&amp;multiline=true"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bean:processOrder"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Log-ThroughputloggerwithgroupSizesample"></a>Throughput logger with groupSize sample</h2></div></div></div><p>In the route below we log the throughput of the incoming orders at
<code class="literal">DEBUG</code> level grouped by 10 messages.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:orders"</em></strong>).
    to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"log:com.mycompany.order?level=DEBUG&amp;groupSize=10"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bean:processOrder"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Log-ThroughputloggerwithgroupIntervalsample"></a>Throughput logger with groupInterval sample</h2></div></div></div><p>This route will result in message stats logged every 10s, with an
initial 60s delay and stats should be displayed even if there isn&#8217;t any
message traffic.</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"activemq:orders"</em></strong>).
to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"log:com.mycompany.order?level=DEBUG&amp;groupInterval=10000&amp;groupDelay=60000&amp;groupActiveOnly=false"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bean:processOrder"</em></strong>);</pre><p>The following will be logged:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"Received: 1000 new messages, with total 2000 so far. Last group took: 10000 millis which is: 100 messages per second. average: 100"</em></strong></pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Log-Fullcustomizationoftheloggingoutput"></a>Full customization of the logging output</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="Log-LogComponent.html#Log-UsingLogcomponentinOSGi">Using Log component in OSGi</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel 2.11</strong></span></p><p>With the options outlined in the <a class="link" href="log.html" target="_top">#Formatting</a> section, you
can control much of the output of the logger. However, log lines will
always follow this structure:</p><pre class="programlisting">Exchange[Id:ID-machine-local-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">50656</span>-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1234567901234</span>-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1</span>-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2</span>, ExchangePattern:InOut,
Properties:{CamelToEndpoint=log:<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//org.apache.camel.component.log.TEST?showAll=true,</em>
CamelCreatedTimestamp=Thu Mar <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">28</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">00</span>:<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">00</span>:<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">00</span> WET <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2013</span>},
Headers:{breadcrumbId=ID-machine-local-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">50656</span>-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1234567901234</span>-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1</span>-<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1</span>}, BodyType:String, Body:Hello World, Out: null]</pre><p>This format is unsuitable in some cases, perhaps because you need to&#8230;&#8203;</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">&#8230;&#8203; filter the headers and properties that are printed, to strike a
balance between insight and verbosity.</li><li class="listitem">&#8230;&#8203; adjust the log message to whatever you deem most readable.</li><li class="listitem">&#8230;&#8203; tailor log messages for digestion by log mining systems, e.g.
Splunk.</li><li class="listitem">&#8230;&#8203; print specific body types differently.</li><li class="listitem">&#8230;&#8203; etc.</li></ul></div><p>Whenever you require absolute customization, you can create a class that
implements the
<a class="link" href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/spi/ExchangeFormatter.html" target="_top"><code class="literal">ExchangeFormatter</code></a>
interface. Within the <code class="literal">format(Exchange)</code> method you have access to the
full Exchange, so you can select and extract the precise information you
need, format it in a custom manner and return it. The return value will
become the final log message.</p><p>You can have the Log component pick up your custom <code class="literal">ExchangeFormatter</code>
in either of two ways:</p><p><span class="strong"><strong>Explicitly instantiating the LogComponent in your Registry:</strong></span></p><pre class="programlisting">&lt;bean name=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"log"</em></strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"org.apache.camel.component.log.LogComponent"</em></strong>&gt;
   &lt;property name=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"exchangeFormatter"</em></strong> ref=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"myCustomFormatter"</em></strong> /&gt;
&lt;/bean&gt;</pre><p><span class="strong"><strong>Convention over configuration:</strong></span></p><p>Simply by registering a bean with the name <code class="literal">logFormatter</code>; the Log
Component is intelligent enough to pick it up automatically.</p><pre class="programlisting">&lt;bean name=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"logFormatter"</em></strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"com.xyz.MyCustomExchangeFormatter"</em></strong> /&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>the <code class="literal">ExchangeFormatter</code> gets applied to <span class="strong"><strong>all Log endpoints within
that Camel Context</strong></span>. If you need different ExchangeFormatters for
different endpoints, just instantiate the LogComponent as many times as
needed, and use the relevant bean name as the endpoint prefix.</p></td></tr></table></div><p>From <span class="strong"><strong>Camel 2.11.2/2.12</strong></span> onwards when using a custom log formatter, you
can specify parameters in the log uri, which gets configured on the
custom log formatter. Though when you do that you should define the
"logFormatter" as prototype scoped so its not shared if you have
different parameters, eg:</p><pre class="programlisting">&lt;bean name=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"logFormatter"</em></strong> <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"com.xyz.MyCustomExchangeFormatter"</em></strong> scope=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"prototype"</em></strong>/&gt;</pre><p>And then we can have Camel routes using the log uri with different
options:</p><pre class="programlisting">&lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"log:foo?param1=foo&amp;amp;param2=100"</em></strong>/&gt;
...
&lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"log:bar?param1=bar&amp;amp;param2=200"</em></strong>/&gt;</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="Log-UsingLogcomponentinOSGi"></a>Using Log component in OSGi</h3></div></div></div><p><span class="strong"><strong>Improvement as of Camel 2.12.4/2.13.1</strong></span></p><p>When using&nbsp;Log component inside OSGi (e.g., in Karaf), the underlying
logging mechanisms are provided by PAX logging. It searches for a bundle
which invokes&nbsp;<code class="literal">org.slf4j.LoggerFactory.getLogger()</code> method and
associates the bundle with the logger instance. Without specifying
custom&nbsp;<code class="literal">org.sfl4j.Logger</code> instance, the logger created by Log component
is associated with <code class="literal">camel-core</code> bundle.</p><p>In some scenarios it is required that the bundle associated with logger
should be the bundle which contains route definition. To do this, either
register single instance of&nbsp;<code class="literal">org.slf4j.Logger</code> in the Registry or
reference it using&nbsp;<code class="literal">logger</code> URI parameter.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Log-SeeAlso"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="configuring-camel.html" target="_top">Configuring Camel</a></li><li class="listitem"><a class="link" href="component.html" target="_top">Component</a></li><li class="listitem"><a class="link" href="endpoint.html" target="_top">Endpoint</a></li><li class="listitem"><a class="link" href="getting-started.html" target="_top">Getting Started</a></li><li class="listitem"><a class="link" href="tracer.html" target="_top">Tracer</a></li><li class="listitem"><a class="link" href="how-do-i-use-log4j.html" target="_top">How do I use log4j</a></li><li class="listitem"><a class="link" href="how-do-i-use-java-14-logging.html" target="_top">How do I use Java 1.4 logging</a></li><li class="listitem"><a class="link" href="logeip.html" target="_top">LogEIP</a> for using <code class="literal">log</code> directly in the DSL for human
logs.</li></ul></div></div></div></body></html>