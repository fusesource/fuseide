<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Debugging Routing Contexts</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat Fuse Tooling"><link rel="up" href="RiderUG.html" title="Part&nbsp;II.&nbsp;Fuse Tooling User Guide"><link rel="prev" href="RiderDevPart.html" title="Developing Applications"><link rel="next" href="RiderDebugPart.html" title="Monitoring and Testing Applications"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="RiderCamelDebugger"></a>Debugging Routing Contexts</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="RiderCamelDebugger.html#setBreakpoints">Setting Breakpoints</a></span></dt><dt><span class="section"><a href="RiderCamelDebugger.html#startDebugger">Running the Camel Debugger</a></span></dt><dt><span class="section"><a href="RiderCamelDebugger.html#stopDebugger">Stopping the Camel Debugger</a></span></dt><dt><span class="section"><a href="RiderCamelDebugger.html#editVariables">Changing Variable Values</a></span></dt><dt><span class="section"><a href="RiderCamelDebugger.html#addWatchList">Adding Variables to the Watch List</a></span></dt><dt><span class="section"><a href="RiderCamelDebugger.html#disableBreakpoints">Disabling Breakpoints in a Running Context</a></span></dt></dl></div><p>The Camel debugger includes many features for debugging locally and remotely running
routing contexts:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Setting conditional and unconditional breakpoints on nodes in the route
editor</li><li class="listitem">Autolaunching the debugger and switching to the <span class="strong"><strong>Debug</strong></span>
perspective</li><li class="listitem"><p class="simpara">Interacting with the running routing context:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">Switch between breakpoints to quickly compare variable values of
message instances</li><li class="listitem">Examine and change the value of variables of interest</li><li class="listitem">Add variables of interest to the watch list to track them
throughout the debug session</li><li class="listitem">Disable and re-enable breakpoints on-the-fly</li><li class="listitem">Track message flow graphically in the routing context
runtime</li><li class="listitem">Examine console logs to track Camel and debugger actions</li></ul></div></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Before you can run the Camel debugger, you must set breakpoints on the nodes of interest
displayed on the route editor&#8217;s canvas. Then you can run the Camel debugger on a
project&#8217;s routing context <code class="literal">.xml</code> file to find the logic errors in
it and fix them. Invoking the Camel debugger runs the routing context in debug mode
and opens the <a class="link" href="DebugPerspective.html" title="Debug Perspective">Debug Perspective</a>.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="setBreakpoints"></a>Setting Breakpoints</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_overview_22"></a>Overview</h3></div></div></div><p>To set breakpoints, your project&#8217;s routing context <code class="literal">.xml</code> file must
be open in the route editor&#8217;s <span class="strong"><strong>Design</strong></span> tab.</p><p>The Camel debugger supports two types of breakpoints:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Unconditional breakpoints&#8201;&#8212;&#8201;triggered whenever one is encountered during a
debugging session</li><li class="listitem">Conditional breakpoints&#8201;&#8212;&#8201;triggered only when the breakpoint&#8217;s specified
condition is met during a debugging session</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You cannot set breakpoints on consumer endpoints or on <code class="literal">when</code> or
<code class="literal">otherwise</code> nodes.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_setting_unconditional_breakpoints"></a>Setting unconditional breakpoints</h3></div></div></div><p>With your routing context displayed on the canvas in the <span class="strong"><strong>Design</strong></span>
tab:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Select a node whose state you want to examine during the debugging
session.</li><li class="listitem">Click its
<span class="inlinemediaobject"><img src="./images/red-dot.png" alt="red dot"></span> icon to set an unconditional breakpoint.</li><li class="listitem">Repeat these steps for each node on which you want to set an unconditional
breakpoint.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_setting_conditional_breakpoints"></a>Setting conditional breakpoints</h3></div></div></div><p>With your routing context displayed on the canvas in the <span class="strong"><strong>Design</strong></span>
tab:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a name="condBpFirst"></a>Select a node whose state you want to examine during the debugging
session.</li><li class="listitem"><p class="simpara">Click its
<span class="inlinemediaobject"><img src="./images/yellow-dot.png" alt="yellow dot"></span> icon to set a conditional breakpoint and to open the
<span class="strong"><strong>Edit the condition and language of your breakpoint&#8230;&#8203;</strong></span>
dialog:</p><div class="informalfigure"><div class="mediaobject"><img src="images/debug_CondBPCnfg.png" alt="debug CondBPCnfg"></div></div></li><li class="listitem"><p class="simpara">Click the <span class="strong"><strong>Language</strong></span> drop-down menu and select the
expression language to use to create the condition that will trigger the
breakpoint.</p><p class="simpara">Fuse Tooling supports twenty-four expression languages. Some of these
languages provide variables for creating conditional expressions, while others
do not.</p></li><li class="listitem"><p class="simpara"><a name="condBpLast"></a>Click <span class="strong"><strong>Variables</strong></span> to display a list of the selected
language&#8217;s supported variables.</p><p class="simpara">If a list appears, select in sequence one or more of the variables to create
the condition for triggering the breakpoint. The variables you select appear in
the <span class="strong"><strong>Condition</strong></span> text box.</p><p class="simpara">If
<span class="inlinemediaobject"><img src="./images/expressLangNoVars.png" alt="expressLangNoVars"></span> appears, enter the expression directly into the
<span class="strong"><strong>Condition</strong></span> text box.</p></li><li class="listitem">Repeat steps <a class="xref" href="RiderCamelDebugger.html#condBpFirst">[condBpFirst]</a> through <a class="xref" href="RiderCamelDebugger.html#condBpLast">[condBpLast]</a> for each node on which you want to set a conditional breakpoint.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="REdisableBP"></a>Disabling breakpoints</h3></div></div></div><p>You can temporarily disable a breakpoint, leaving it in place, then enable it again
later. The
<span class="inlinemediaobject"><img src="./images/resume_co.png" alt="resume co"></span> button skips over disabled breakpoints during debugging
sessions.</p><p>To disable a breakpoint, select the node on the canvas and click its
<span class="inlinemediaobject"><img src="./images/gray-dot.png" alt="gray dot"></span> icon. The breakpoint turns gray, indicating that it has been
disabled.</p><p>To enable a disabled breakpoint, select the node on the canvas and click its
<span class="inlinemediaobject"><img src="./images/green-dot.png" alt="green dot"></span> icon. Depending on whether the disabled breakpoint is conditional
or unconditional, it turns yellow or red, respectively, to indicate that it has been
re-enabled.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can also disable and re-enable breakpoints during debugging sessions. For
details, see <a class="xref" href="RiderCamelDebugger.html#disableBreakpoints" title="Disabling Breakpoints in a Running Context">Disabling Breakpoints in a Running Context</a>.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="REdeleteBP"></a>Deleting breakpoints</h3></div></div></div><p>You can delete individual breakpoints or all breakpoints.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">To delete individual breakpoints&#8201;&#8212;&#8201;in a route container, select the node
whose breakpoint you want to delete, and click its
<span class="inlinemediaobject"><img src="./images/delete_bp.png" alt="delete bp"></span> icon.</li><li class="listitem">To delete all breakpoints in a particular route&#8201;&#8212;&#8201;right-click the target
route&#8217;s container, and select <code class="literal"><span class="inlinemediaobject"><img src="./images/gray-dot.png" alt="gray dot"></span>Delete all breakpoints</code>.</li><li class="listitem">To delete all breakpoints in all routes&#8201;&#8212;&#8201;right-click the canvas, and
select <code class="literal"><span class="inlinemediaobject"><img src="./images/gray-dot.png" alt="gray dot"></span>Delete all breakpoints</code>.</li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_related_topics_7"></a>Related topics</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderCamelDebugger.html#startDebugger" title="Running the Camel Debugger">Running the Camel Debugger</a></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="startDebugger"></a>Running the Camel Debugger</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="RiderCamelDebugger.html#localDebug">Debugging a locally running routing context</a></span></dt><dt><span class="section"><a href="RiderCamelDebugger.html#remoteDebug">Debugging a remotely running routing context</a></span></dt></dl></div><p>You can run the Camel debugger on locally running routing contexts and on remotely
running routing contexts. The same basic features and functionality are available in both
debugging modes.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="RiderCamelDebugger.html#localDebug" title="Debugging a locally running routing context">Local debugging</a>&#8201;&#8212;&#8201;Runs the debugger on the routing
context running in the same JVM with Fuse Tooling. This mode is activated by
selecting the project&#8217;s routing context in the <span class="strong"><strong>Project Explorer</strong></span>
view and selecting <span class="strong"><strong>Debug As</strong></span> &#8594; <span class="strong"><strong>Local Camel Context</strong></span> from the context menu.</li><li class="listitem"><a class="link" href="RiderCamelDebugger.html#remoteDebug" title="Debugging a remotely running routing context">Remote debugging</a>&#8201;&#8212;&#8201;Runs the debugger on a routing
context running in a separate JVM either on the local machine or on a remote
machine. This mode requires a supported runtime server installed on the local
machine or on an accessible remote machine. It is activated by creating and running
a debug launch configuration that specifies the remote runtime&#8217;s connection
details.</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If your project contains Java code, you can use the standard Eclipse Java debugging tools to
debug it. For local debugging, it is automatically available. For remote debugging, you
need to use the <span class="strong"><strong>Remote Camel Context and Java</strong></span> launch option
(see <a class="xref" href="RiderCamelDebugger.html#remoteDebug" title="Debugging a remotely running routing context">Debugging a remotely running routing context</a>).</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You must set breakpoints in your routing context file before you can start the
Camel debugger.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="localDebug"></a>Debugging a locally running routing context</h3></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_procedure_16"></a>Procedure</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">In the <span class="strong"><strong>Project Explorer</strong></span> view, select the routing context
file you want to debug.</li><li class="listitem"><p class="simpara">Right-click the selected file to open the context menu, and then select <span class="strong"><strong>Debug As</strong></span> &#8594; <span class="strong"><strong>Local Camel Context</strong></span>.</p><p class="simpara">Fuse Tooling builds the Camel route, starts Apache Camel, starts the routing
context, enables JMX, starts the route(s) in the routing context, adds the
breakpoints to the nodes, and enables the Camel debugger.</p><p class="simpara">The Camel debugger suspends execution of the routing context at the first
breakpoint hit (received a message), and prompts you to indicate whether you
want it to open the <span class="strong"><strong>Debug</strong></span> perspective.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/DBCnfrmSwitchToDBView.png" alt="DBCnfrmSwitchToDBView"></div></div></li><li class="listitem"><p class="simpara">Click <span class="strong"><strong>Yes</strong></span> to open the <span class="strong"><strong>Debug</strong></span>
perspective.</p><p class="simpara">The <span class="strong"><strong>Debug</strong></span> perspective opens with the routing context
suspended at the first breakpoint encountered in the running routing
context.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Breakpoints are held for a maximum of five minutes, after which debugging
automatically resumes, moving on to the next breakpoint or to the end of
the routing context.</p></td></tr></table></div><div class="informalfigure"><div class="mediaobject"><img src="./images/openDBPerspective.png" alt="openDBPerspective"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>To see the console output, open the <span class="strong"><strong>Console</strong></span> view if
it was not open when you switched perspectives.</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>By default, the <span class="strong"><strong>Debug</strong></span> perspective displays the
<span class="strong"><strong>Outline</strong></span> view, which provides the means to
switch between separate routes in a running routing context. If your
routing context contains a single route, closing the
<span class="strong"><strong>Outline</strong></span> view frees space to expand the other
views, making it easier to access and examine debugger output.</p></td></tr></table></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_watching_message_exchanges_progress_through_the_routing_context"></a>Watching message exchanges progress through the routing context</h4></div></div></div><p>Click
<span class="inlinemediaobject"><img src="./images/stepover_co.png" alt="stepover co"></span> (Step Over) to jump to the next node of execution in the routing
context. Click
<span class="inlinemediaobject"><img src="./images/resume_co.png" alt="resume co"></span> (Resume) to continue execution at the next active breakpoint in the
routing context.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/debug_StateChange.png" alt="debug StateChange"></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="remoteDebug"></a>Debugging a remotely running routing context</h3></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_prerequisites_13"></a>Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">Access to a Fuse runtime in one of the following ways:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">Install a Fuse server on your local machine and edit its
<code class="literal">Fuse_HOME/etc/users.properties</code>
file to activate the <code class="literal">admin</code> user. For details,
see <a class="xref" href="RiderDeployPart.html#FIDEAddServer" title="Adding a Server">Adding a Server</a>.</li><li class="listitem">Be able to access a Fuse server that is installed on a
remote machine. You must know its connection details, including
the credentials of the <code class="literal">admin</code> user.</li></ul></div></li><li class="listitem"><p class="simpara">Create a new Fuse Integration project, see <a class="xref" href="RiderNewProject.html#nfpProjBasics" title="Specifying the project name and workspace">Specifying the project name and workspace</a>. In the Fuse Integration project:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">Select the Camel version that matches the version of the JBoss
Fuse server runtime.</li><li class="listitem"><p class="simpara">Create an empty Blueprint DSL project or use one of the JBoss
Fuse pre-defined templates with Blueprint DSL.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Though not a requirement, it is a good idea to verify that
you can run the project&#8217;s routing context successfully as a
<code class="literal">Local Camel Context</code>. For
details, see <a class="xref" href="RiderRunning.html#RiderRunningProfile" title="Running routes as a local Camel context">Running routes as a local Camel context</a>.</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The examples in <a class="xref" href="RiderCamelDebugger.html#setuoRemoteDebugging" title="Setting up and starting remote debugging">Setting up and starting remote debugging</a> are based on the <span class="strong"><strong>Fuse</strong></span> &#8594; <span class="strong"><strong>Content Based Router</strong></span> pre-defined template and a Red Hat Fuse 6.3.0 runtime.</p></td></tr></table></div></li></ul></div></li><li class="listitem"><p class="simpara">In Red Hat CodeReady Studio:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">Add the Fuse server to the <span class="strong"><strong>Servers</strong></span>
view. For details, see <a class="xref" href="RiderDeployPart.html#FIDEAddServer" title="Adding a Server">Adding a Server</a>.</li><li class="listitem">Start the Fuse server. For details, see <a class="xref" href="RiderDeployPart.html#FIDEStartServer" title="Starting a Server">Starting a Server</a>.</li><li class="listitem"><p class="simpara">Publish your project to the Fuse Runtime server. For
details, see <a class="xref" href="RiderDeployPart.html#autoPublish" title="Publishing Fuse projects automatically when resources change">Publishing Fuse projects automatically when resources change</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You cannot deploy a Fuse Integration project to a JBoss
Fuse server running on a remote host from inside JBoss
Developer Studio. Instead, you deploy the project&#8217;s bundle
directly on the remote host using one of two supported
deployment methods (for details, see ).</p></td></tr></table></div></li><li class="listitem">Verify that the project&#8217;s bundle is deployed and active. For
details, see <a class="xref" href="RiderDeployPart.html#verifyPublished" title="Verifying the project was published to the server">Verifying the project was published to the server</a>.</li><li class="listitem">Stop the Fuse Runtime server. For details, see <a class="xref" href="RiderDeployPart.html#FIDEStopServer" title="Stopping a Server">Stopping a Server</a>.</li></ul></div></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="setuoRemoteDebugging"></a>Setting up and starting remote debugging</h4></div></div></div><p>With the project deployed on Fuse and the server stopped, you need to set up
and start remote debugging as follows:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Start Fuse in debug mode outside of Red Hat CodeReady Studio.</li><li class="listitem">In Developer Studio, set breakpoints on nodes in the project&#8217;s routing context, which is
open in the route editor.</li><li class="listitem">Create a remote Camel context debug configuration and run it.</li><li class="listitem">Connect to Fuse runtime in the <span class="strong"><strong>JMX Navigator</strong></span> view.</li><li class="listitem">Drop test messages in the <span class="strong"><strong>JMX Navigator</strong></span> view on the input node of the
Camel route running inside the Fuse runtime.</li><li class="listitem">Use any of the Camel debugger&#8217;s tools for debugging routes.</li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="_procedure_17"></a>Procedure</h4></div></div></div><p>To set up and start remote debugging:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">Open a terminal outside of Red Hat CodeReady Studio, and enter</p><pre class="screen">$ [{prodname}_HOME]/bin/{prodname} debug</pre></li><li class="listitem">Wait for the Fuse splash screen to appear, and then return to the
<span class="strong"><strong>Fuse Integration</strong></span> perspective in JBoss Developer
Studio.</li><li class="listitem">In the tooling&#8217;s route editor, with the project&#8217;s routing context open in
the <span class="strong"><strong>Design</strong></span> tab, set breakpoints on the nodes of
interest. For details, see <a class="xref" href="RiderCamelDebugger.html#setBreakpoints" title="Setting Breakpoints">Setting Breakpoints</a>.</li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Project Explorer</strong></span> view, right-click the project&#8217;s
root and select <span class="strong"><strong>Debug As</strong></span> &#8594; <span class="strong"><strong>Debug Configurations</strong></span> to open the <span class="strong"><strong>Debug Configurations</strong></span> wizard:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/NewRemoteDBLaunchCnfg.png" alt="NewRemoteDBLaunchCnfg"></div></div></li><li class="listitem"><p class="simpara">In the configuration type pane, select either <span class="strong"><strong>Remote Camel
Context</strong></span> or <span class="strong"><strong>Remote Camel Context and
Java</strong></span> , and then click
<span class="inlinemediaobject"><img src="./images/NewRunConfigButton.jpg" alt="New Configuration"></span>:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CCJdbNewLaunchCnfg.png" alt="CCJdbNewLaunchCnfg"></div></div><p class="simpara">For both the <span class="strong"><strong>Remote Camel Context</strong></span> and
<span class="strong"><strong>Remote Camel Context and Java</strong></span> options, you
need to specify configuration details on the <span class="strong"><strong>Camel</strong></span> and
<span class="strong"><strong>JMX</strong></span> tabs.</p><p class="simpara">For the <span class="strong"><strong>Remote Camel Context and Java</strong></span> option
only, you also need to specify configuration details on the
<span class="strong"><strong>Connect</strong></span> tab.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Unless your project contains Java code that you want to debug using the standard Eclipse Java
debugging tools, select the <span class="strong"><strong>Remote Camel
Context</strong></span> option.</p></td></tr></table></div></li><li class="listitem">In the <span class="strong"><strong>Name</strong></span> field, enter a name for the new launch
configuration.</li><li class="listitem"><p class="simpara">On the <span class="strong"><strong>Camel</strong></span> tab, click the
<span class="strong"><strong>Browse</strong></span> button to locate the project&#8217;s routing
context <code class="literal">.xml</code> file in the <span class="strong"><strong>Open
Resources</strong></span> dialog:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CCdbSelCamelCntxt.png" alt="CCdbSelCamelCntxt"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>When you select a file in the <span class="strong"><strong>Matching items</strong></span> pane, the tooling displays
the file&#8217;s location, relative to the project root, at the bottom of the
pane.</p></td></tr></table></div></li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Matching items</strong></span> pane, select your project&#8217;s
routing context file from the list, and then click
<span class="strong"><strong>OK</strong></span>.</p><p class="simpara">The tooling inserts the file&#8217;s path into the <span class="strong"><strong>Select Camel
Context</strong></span> file field:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CCJDbugCamelTabNew.png" alt="CCJDbugCamelTabNew"></div></div></li><li class="listitem"><p class="simpara">Click the <span class="strong"><strong>JMX</strong></span> tab:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/RemoteDBJMXtabDefaults.png" alt="RemoteDBJMXtabDefaults"></div></div><p class="simpara">Edit the JMX connection details as follows:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara"><span class="strong"><strong>JMX Uri</strong></span>&#8201;&#8212;&#8201;change
<code class="literal">:9011/jmxrmi</code> to
<code class="literal">:1099/karaf-root</code></p><p class="simpara">If the Fuse server is running on a remote host, replace
<code class="literal">localhost</code> with the DNS name or IP address
of the remote host.</p></li><li class="listitem"><span class="strong"><strong>JMX User</strong></span>&#8201;&#8212;&#8201;enter
<code class="literal">admin</code>.</li><li class="listitem"><p class="simpara"><span class="strong"><strong>JMX Password</strong></span>&#8201;&#8212;&#8201;enter
<code class="literal">admin</code>.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>The values shown for <span class="strong"><strong>JMX User</strong></span> and <span class="strong"><strong>JMX Password</strong></span> are
the Fuse <span class="strong"><strong>admin</strong></span> user defaults,
stored in the
<code class="literal">Fuse_HOME/etc/users.properties</code>
file. If your setup is different, enter the values specific to it.</p></td></tr></table></div><p class="simpara">If you are creating a <span class="strong"><strong>Remote Camel
Context</strong></span> debug launch configuration, you are done. Skip to
<a class="xref" href="RiderCamelDebugger.html#debugCfgGo">[debugCfgGo]</a>.</p></li></ul></div></li><li class="listitem"><p class="simpara">Click the <span class="strong"><strong>Connect</strong></span> tab:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/RemoteDBConnectTabDefaults.png" alt="RemoteDBConnectTabDefaults"></div></div><p class="simpara">Change the <span class="strong"><strong>Port</strong></span> value from <code class="literal">8000</code> to
<code class="literal">5005</code>. Leave each of the
other properties as is.</p></li><li class="listitem"><a name="debugCfgGo"></a>Click <span class="strong"><strong>Apply</strong></span> and then click <span class="strong"><strong>Debug</strong></span>.</li><li class="listitem">In the <span class="strong"><strong>JMX Navigator</strong></span> view, double-click
<span class="strong"><strong>Fuse [xxx] [Disconnected]</strong></span> to connect to it,
and then expand its tree.</li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Project Explorer</strong></span> view, drag a test message from
<code class="literal">src/test/resources/data</code> and drop it on the
<code class="literal">cbr-example-context/Endpoints/file/work/cbr/input</code>
folder in the <span class="strong"><strong>JMX Navigator</strong></span> view.</p><p class="simpara">When the message hits the first breakpoint that is set in the routing
context, the tooling asks you to switch to the <span class="strong"><strong>Debug</strong></span>
perspective:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/DBCnfrmSwitchToDBView.png" alt="DBCnfrmSwitchToDBView"></div></div></li><li class="listitem"><p class="simpara">Click <span class="strong"><strong>Yes</strong></span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/RemoteDBPerspOpen.png" alt="RemoteDBPerspOpen"></div></div><p class="simpara">At this point, you can use any of the Camel debugger&#8217;s tools to debug your
routing context.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>In remote debugging sessions, the <span class="strong"><strong>Console</strong></span> view does not display log
output.</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>When one message reaches the end of the routing context, the debugger is suspended. To
continue debugging, switch back to the <span class="strong"><strong>Fuse
Integration</strong></span> perspective and drop another message on the
input node in the <span class="strong"><strong>JMX Navigator</strong></span> view. Each time you
do so, the tooling asks you to confirm the switch to the
<span class="strong"><strong>Debug</strong></span> perspective.</p></td></tr></table></div></li></ol></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_related_topics_8"></a>Related topics</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderCamelDebugger.html#stopDebugger" title="Stopping the Camel Debugger">Stopping the Camel Debugger</a></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stopDebugger"></a>Stopping the Camel Debugger</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_overview_23"></a>Overview</h3></div></div></div><p>The way to stop the Camel debugger depends on the mode in which it is running:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">Local debugging (<a class="xref" href="RiderCamelDebugger.html#localDebug" title="Debugging a locally running routing context">Debugging a locally running routing context</a>)</p><p class="simpara">To stop the Camel debugger, click
<span class="inlinemediaobject"><img src="./images/terminate_co.png" alt="Terminate button"></span> on the menu bar once if the debugging session has ended.
Otherwise, click
<span class="inlinemediaobject"><img src="./images/terminate_co.png" alt="Terminate button"></span> twice: once to terminate the currently running node thread
and once to terminate the <code class="literal">Camel Context</code> thread (both
displayed in the <span class="strong"><strong>Debug</strong></span> view).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Terminating the Camel debugger also terminates the console but does not
clear its output. To clear the output, click
<span class="inlinemediaobject"><img src="./images/clear_co.png" alt="clear co"></span> (Clear Console) on the <span class="strong"><strong>Console</strong></span>
view&#8217;s menu bar.</p></td></tr></table></div></li><li class="listitem"><p class="simpara">Remote debugging (<a class="xref" href="RiderCamelDebugger.html#remoteDebug" title="Debugging a remotely running routing context">Debugging a remotely running routing context</a>)</p><p class="simpara">To stop the Camel debugger, select the <code class="literal">[Remote Camel
Context]</code> thread or the <code class="literal">[Remote Camel Context and
Java]</code> thread in the <span class="strong"><strong>Debug</strong></span> view, and then
click
<span class="inlinemediaobject"><img src="./images/terminate_co.png" alt="Terminate button"></span> on the menu bar.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Terminating the Camel debugger does not close the connection to the remote
runtime server in the <span class="strong"><strong>Servers</strong></span> view nor in the
<span class="strong"><strong>JMX Navigator</strong></span> view.</p></td></tr></table></div></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_closing_the_camel_debugger"></a>Closing the Camel debugger</h3></div></div></div><p>After you have finished debugging your project, you may want to close the
<span class="strong"><strong>Debug</strong></span> perspective to make more space for your workbench.</p><p>To do so, right-click
<span class="inlinemediaobject"><img src="./images/camelDebug_Icon.png" alt="Debug perspective icon"></span> on the right side of the Developer Studio toolbar, and then
select <span class="strong"><strong>Close</strong></span>.</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_related_topics_9"></a>Related topics</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderCamelDebugger.html#startDebugger" title="Running the Camel Debugger">Running the Camel Debugger</a></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="editVariables"></a>Changing Variable Values</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_overview_24"></a>Overview</h3></div></div></div><p>When the Camel debugger hits a breakpoint, the <span class="strong"><strong>Variables</strong></span> view
displays the values of all variables available at that point in the routing context.
Some variables are editable, allowing you to change their value. This enables you to see
how the application handles changes in program state.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Not all variables are editable. The context menu of editable variables displays the
<span class="strong"><strong>Change Value&#8230;&#8203;</strong></span> option.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_procedure_18"></a>Procedure</h3></div></div></div><p>To change the value of a variable:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If necessary, start the debugger. See <a class="xref" href="RiderCamelDebugger.html#startDebugger" title="Running the Camel Debugger">Running the Camel Debugger</a>.</li><li class="listitem"><p class="simpara">In the <span class="strong"><strong>Variables</strong></span> view, select a variable whose value you want to change,
and then click its <span class="strong"><strong>Value</strong></span> field.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/editBPvars1.png" alt="editBPvars1"></div></div><p class="simpara">The variable&#8217;s <span class="strong"><strong>value</strong></span> field turns a lighter
shade of blue, indicating that it is in edit mode.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Alternatively, you can right-click the variable to open its context menu, and select
<span class="strong"><strong>Change Value&#8230;&#8203;</strong></span> to edit its value.</p></td></tr></table></div></li><li class="listitem"><p class="simpara">Enter the new value and then click <span class="strong"><strong>Enter</strong></span>.</p><p class="simpara">The <span class="strong"><strong>Console</strong></span> view displays an <code class="literal">INFO</code> level log
entry noting the change in the variable&#8217;s value (for example,
<code class="literal">Breakpoint at node to1 is updating message header on exchangeId:
ID-dhcp-97-16-bos-redhat-com-52574-1417298894070-0-2 with header:
Destination and value: UNITED KINGDOM</code>).</p></li><li class="listitem">Continue stepping through the breakpoints and check whether the message is processed as
expected. At each step, check the <span class="strong"><strong>Debug</strong></span> view, the
<span class="strong"><strong>Variables</strong></span> view, and the <span class="strong"><strong>Console</strong></span>
output.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_related_topics_10"></a>Related topics</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderCamelDebugger.html#disableBreakpoints" title="Disabling Breakpoints in a Running Context">Disabling Breakpoints in a Running Context</a></li><li class="listitem"><a class="xref" href="RiderCamelDebugger.html#addWatchList" title="Adding Variables to the Watch List">Adding Variables to the Watch List</a></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="addWatchList"></a>Adding Variables to the Watch List</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_overview_25"></a>Overview</h3></div></div></div><p>By adding variables to the watch list, you can focus on particular variables to see
whether their values change as expected as they flow through the routing context.</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_procedure_19"></a>Procedure</h3></div></div></div><p>To add a variable to the watch list:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If necessary, start the debugger. See <a class="xref" href="RiderCamelDebugger.html#startDebugger" title="Running the Camel Debugger">Running the Camel Debugger</a>.</li><li class="listitem"><p class="simpara"><a name="watch1"></a>In the <span class="strong"><strong>Variables</strong></span> view, right-click a variable you want to track to open
the context menu.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/UGaddVarWatchList.png" alt="UGaddVarWatchList"></div></div></li><li class="listitem"><p class="simpara"><a name="watch2"></a>Select <span class="strong"><strong>Watch</strong></span>.</p><p class="simpara">A new view, <span class="strong"><strong>Expressions</strong></span>, opens next to the
<span class="strong"><strong>Breakpoints</strong></span> view. The <span class="strong"><strong>Expressions</strong></span>
view displays the name of the variable being watched and its current value, for
example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/UGwatchList.png" alt="UGwatchList"></div></div></li><li class="listitem"><p class="simpara">Repeat <a class="xref" href="RiderCamelDebugger.html#watch1">[watch1]</a> and <a class="xref" href="RiderCamelDebugger.html#watch2">[watch2]</a> to add additional
variables to the watch list.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The variables you add remain in the watch list until you remove them. To stop watching a
variable, right-click it in the list to open the context menu, and then
click <span class="strong"><strong>Remove</strong></span>.</p></td></tr></table></div></li><li class="listitem">With the <span class="strong"><strong>Expressions</strong></span> view open, step through the routing context to track
how the value of each variable in the watch list changes as it reaches each step
in the route.</li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_related_topics_11"></a>Related topics</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="xref" href="RiderCamelDebugger.html#editVariables" title="Changing Variable Values">Changing Variable Values</a></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="disableBreakpoints"></a>Disabling Breakpoints in a Running Context</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_overview_26"></a>Overview</h3></div></div></div><p>You can disable and re-enable breakpoints in a running routing context in the
<span class="strong"><strong>Breakpoints</strong></span> view.</p><p>When a breakpoint is disabled, the
<span class="inlinemediaobject"><img src="./images/resume_co.png" alt="resume co"></span> button causes the debugger to skip over it during the debugging
session.</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="_disabling_and_enabling_breakpoints_in_breakpoints_view"></a>Disabling and enabling breakpoints in Breakpoints view</h3></div></div></div><p>The <span class="strong"><strong>Breakpoints</strong></span> view opens with all set breakpoints
enabled.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/BPviewEnabled.png" alt="BPviewEnabled"></div></div><p>To disable a breakpoint, clear its check box.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/BPviewDisabled.png" alt="BPviewDisabled"></div></div><p>For each breakpoint you disable, the <span class="strong"><strong>Console</strong></span> view displays an
<code class="literal">INFO</code> level log entry noting that it has been disabled (for example,
<code class="literal">Removing breakpoint log2</code>). Likewise, for each breakpoint you
re-enable, the <span class="strong"><strong>Console</strong></span> view displays an <code class="literal">INFO</code> level log entry noting
that it has been enabled (for example, <code class="literal">Adding breakpoint
log2</code>).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>To re-enable a disabled breakpoint, click its check box. The <span class="strong"><strong>Console</strong></span> view
displays an <code class="literal">INFO</code> level log entry noting that the breakpoint has been
added to the selected node.</p></td></tr></table></div></div></div></div></body></html>