<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Openshift</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-Olingo2.html" title="Olingo2"><link rel="next" href="IDU-Paho.html" title="Paho"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-Openshift"></a>Openshift</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Openshift_HSH_OpenshiftComponent"></a>Openshift Component</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.14</strong></span></p><p>The <span class="strong"><strong>openshift</strong></span> component is a component for managing
            your <a class="link" href="https://www.openshift.com/" target="_top">OpenShift</a> applications.</p><p>Maven users will need to add the following dependency to their <code class="code">pom.xml</code>
            for this component:</p><div class="informalexample"><pre class="programlisting">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-openshift&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</pre></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-208"></a>URI format</h2></div></div></div><div class="informalexample"><pre class="programlisting">openshift:clientId[?options]</pre></div><p>You can append query options to the URI in the following format,
                    <code class="code">?option=value&amp;option=value&amp;...</code></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-209"></a>Options</h2></div></div></div><table class="confluenceTable" id="d0e139038"><tbody><tr>
                    <th class="confluenceTh"><p> Name </p></th>
                    <th class="confluenceTh"><p> Default Value </p></th>
                    <th class="confluenceTh"><p> Description </p></th>
                </tr><tr>
                    <td class="confluenceTd"><p> <code class="code">domain</code>  </p></td>
                    <td class="confluenceTd"><p> <code class="code">null</code> </p></td>
                    <td class="confluenceTd"><p> Domain name. If not specified then the default domain is used. </p></td>
                </tr><tr>
                    <td class="confluenceTd"><p> <code class="code">username</code>  </p></td>
                    <td class="confluenceTd"><p> </p></td>
                    <td class="confluenceTd"><p> <span class="emphasis"><em>Mandatory</em></span>: The username to login to openshift server. </p></td>
                </tr><tr>
                    <td class="confluenceTd"><p> <code class="code">password</code>  </p></td>
                    <td class="confluenceTd"><p> </p></td>
                    <td class="confluenceTd"><p> <span class="emphasis"><em>Mandatory:</em></span> The password for login to openshift server. </p></td>
                </tr><tr>
                    <td class="confluenceTd"><p> <code class="code">server</code>  </p></td>
                    <td class="confluenceTd"><p> </p></td>
                    <td class="confluenceTd"><p> Url to the openshift server. If not specified then the default value from the local openshift configuration file <code class="code">~/.openshift/express.conf</code> is used. And if that fails as well then "openshift.redhat.com" is used. </p></td>
                </tr><tr>
                    <td class="confluenceTd"><p> <code class="code">delay</code> </p></td>
                    <td class="confluenceTd"><p> <code class="code">10s</code> </p></td>
                    <td class="confluenceTd"><p> <span class="emphasis"><em>Consumer only:</em></span> How frequent to poll for state changes for the applications. By default we poll every 10 seconds. </p></td>
                </tr><tr>
                    <td class="confluenceTd"><p> <code class="code">operation</code>  </p></td>
                    <td class="confluenceTd"><p> <code class="code">list</code> </p></td>
                    <td class="confluenceTd"><p>
                            <span class="emphasis"><em>Producer only</em></span>: The operation to perform which can
                            be: <code class="code">list</code>, <code class="code">start</code>, <code class="code">stop</code>,
                                <code class="code">restart</code>, and <code class="code">state</code>. The <code class="code">list</code>
                            operation returns information about all the applications in json format.
                            The <code class="code">state</code> operation returns the state such as: started,
                            stopped etc. The other operations do not return any value.</p>
                        <p><span class="bold"><strong>Camel 2.16:</strong></span> adds the following
                            operations:</p>
                        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">getStandaloneCartridge</code> return the display name of
                                    the standalone cartridge.</p></li><li class="listitem"><p><code class="code">getEmbeddedCartridges</code> returns the list of the
                                    installed embedded cartridge.</p></li><li class="listitem"><p><code class="code">addEmbeddedCartridge</code> operation adds the latest
                                    version of an embeddable cartridge by specifying its name with
                                    the interface <code class="code">IEmbeddableCartridge</code> in the header
                                        <code class="code">CamelOpenShiftEmbeddedCartridgeName</code> and return
                                    the cartridge display name.</p></li><li class="listitem"><p><code class="code">removeEmbeddedCartridge</code> operation remove an
                                    embedded cartridge by specifying its name with the interface
                                        <code class="code">IEmbeddableCartridge</code> in the header
                                        <code class="code">CamelOpenShiftEmbeddedCartridgeName</code> and return
                                    the cartridge display name.</p></li></ul></div></td>
                </tr><tr>
                    <td class="confluenceTd"><p> <code class="code">application</code>  </p></td>
                    <td class="confluenceTd"><p> </p></td>
                    <td class="confluenceTd"><p> <span class="emphasis"><em>Producer only</em></span>: The application name to <code class="code">start</code>, <code class="code">stop</code>, <code class="code">restart</code>, or get the <code class="code">state</code>. </p></td>
                </tr><tr>
                    <td class="confluenceTd"><p> <code class="code">mode</code> </p></td>
                    <td class="confluenceTd"><p> </p></td>
                    <td class="confluenceTd"><p> <span class="emphasis"><em>Producer only</em></span>: Whether to output the message body as a pojo or json. For pojo the message is a <code class="code">List&lt;com.openshift.client.IApplication&gt;</code> type. </p></td>
                </tr></tbody></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-210"></a>Examples</h2></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-211"></a>Listing all applications</h2></div></div></div><div class="informalexample"><pre class="programlisting">// sending route
from("direct:apps")
    .to("openshift:myClient?username=foo&amp;password=secret&amp;operation=list");
    .to("log:apps");</pre></div><p>In this case the information about all the applications is returned as pojo.
                    If you want a json response, then set mode=json.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-212"></a>Stopping an application</h2></div></div></div><div class="informalexample"><pre class="programlisting">// stopping the foobar application
from("direct:control")
    .to("openshift:myClient?username=foo&amp;password=secret&amp;operation=stop&amp;application=foobar");</pre></div><p>In the example above we stop the application named foobar.</p><p>Polling for gear state changes</p><p>The consumer is used for polling state changes in gears. Such as when a new
                    gear is added/removed/ or its lifecycle is changed, eg started, or stopped
                    etc.</p><div class="informalexample"><pre class="programlisting">// trigger when state changes on our gears
from("openshift:myClient?username=foo&amp;password=secret&amp;delay=30s")
    .log("Event ${header.CamelOpenShiftEventType} on application ${body.name} changed state to ${header.CamelOpenShiftEventNewState}");</pre></div><p>When the consumer emits an Exchange then the body contains the
                        <code class="code">com.openshift.client.IApplication</code> as the message body. And the
                    following headers is included.</p><table id="d0e139327"><colgroup> </colgroup><thead><tr>
                            <td>
                                <p>Header</p>
                            </td>
                            <td>
                                <p>May be null</p>
                            </td>
                            <td>
                                <p>Description</p>
                            </td>
                        </tr></thead><tbody><tr>
                            <td>
                                <p>CamelOpenShiftEventType</p>
                            </td>
                            <td>
                                <p>No</p>
                            </td>
                            <td>
                                <p>The type of the event which can be one of: added, removed or
                                    changed.</p>
                            </td>
                        </tr><tr>
                            <td>
                                <p>CamelOpenShiftEventOldState</p>
                            </td>
                            <td>
                                <p>Yes</p>
                            </td>
                            <td>
                                <p>The old state, when the event type is changed.</p>
                            </td>
                        </tr><tr>
                            <td>
                                <p>CamelOpenShiftEventNewState</p>
                            </td>
                            <td>
                                <p>No</p>
                            </td>
                            <td>
                                <p>The new state, for any of the event types</p>
                            </td>
                        </tr></tbody></table></div></div></body></html>