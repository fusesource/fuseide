<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Twitter</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-Timer.html" title="Timer"><link rel="next" href="IDU-Undertow.html" title="Undertow"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-Twitter"></a>Twitter</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_Twitter"></a>Twitter</h2></div></div></div><p><span class="bold"><strong>Available as of Camel 2.10</strong></span>
    </p><p>The Twitter component enables the most useful features of the Twitter API by encapsulating <a class="link" href="http://twitter4j.org/" target="_top">Twitter4J</a>. It allows direct, polling, or event-driven consumption of timelines, users, trends, and direct messages. Also, it supports producing messages as status updates or direct messages.</p><p>Twitter now requires the use of OAuth for all client application authentication.  In order to use camel-twitter with your account, you'll need to create a new application within Twitter at https://dev.twitter.com/apps/new and grant the application access to your account. Finally, generate your access token and secret.</p><p>Maven users will need to add the following dependency to their pom.xml for this component:</p><pre class="programlisting">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-twitter&lt;/artifactId&gt;
    &lt;version&gt;${camel-version}&lt;/version&gt;
&lt;/dependency&gt;</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_URIformat"></a>URI format</h2></div></div></div><p></p><pre class="programlisting">twitter://endpoint[?options]</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_TwitterComponent"></a>TwitterComponent:</h2></div></div></div><p>The twitter component can be configured with the Twitter account settings which is mandatory to configure before using.
You can also configure these options directly in the endpoint.

    </p><table id="d0e172390"><tr>
        <th> Option </th>
        <th> Description </th>
      </tr><tr>
        <td>
          <code class="code">consumerKey</code>
        </td>
        <td> The consumer key </td>
      </tr><tr>
        <td>
          <code class="code">consumerSecret</code>
        </td>
        <td> The consumer secret </td>
      </tr><tr>
        <td>
          <code class="code">accessToken</code>
        </td>
        <td> The access token </td>
      </tr><tr>
        <td>
          <code class="code">accessTokenSecret</code>
        </td>
        <td> The access token secret </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_ConsumerEndpoints"></a>Consumer Endpoints:</h2></div></div></div><p>Rather than the endpoints returning a <code class="code">List</code> through one single route exchange,
        <code class="code">camel-twitter</code> creates one route exchange per returned object. As an example, if
        <code class="code">timeline/home</code> results in five statuses, the route will be executed five times
      (once for each <code class="code">Status</code>). 
    </p><table id="d0e172463"><tr>
        <th> Endpoint </th>
        <th> Context </th>
        <th> Body Type </th>
        <th> Notice </th>
      </tr><tr>
        <td>
          <code class="code">directmessage</code>
        </td>
        <td> direct, polling </td>
        <td>
          <code class="code">twitter4j.DirectMessage</code>
        </td>
        <td></td>
      </tr><tr>
        <td>
          <code class="code">search</code>
        </td>
        <td> direct, polling </td>
        <td>
                    <code class="code">twitter4j.Status</code></td>
        <td></td>
      </tr><tr>
        <td>
                    <code class="code">streaming/filter</code></td>
        <td> event, polling </td>
        <td>
          <code class="code">twitter4j.Status</code></td>
        <td></td>
      </tr><tr>
        <td>
                    <code class="code">streaming/sample</code></td>
        <td> event, polling </td>
        <td>
          <code class="code">twitter4j.Status</code></td>
        <td></td>
      </tr><tr>
                <td>
                    <code class="code">streaming/user</code></td>
                <td> event, polling </td>
                <td>
                    <p><code class="code">twitter4j.Status</code></p>
                    <p><code class="code">twitter4j.DirectMessage</code></p>
                    <p><code class="code">twitter4j.UserList</code></p>
                </td>
                <td>
                    <p><span class="bold"><strong>Camel 2.16:</strong></span> To receive tweets from
                        protected users and accounts.</p>
                    <p><span class="bold"><strong>Camel 2.17:</strong></span> DirectMessages, Favorites,
                        Lists, Following events are now supported </p>
                </td>
            </tr><tr>
        <td>
          <code class="code">timeline/home</code>
        </td>
        <td> direct, polling </td>
        <td>
          <code class="code">twitter4j.Status</code></td>
        <td></td>
      </tr><tr>
        <td>
          <code class="code">timeline/mentions</code>
        </td>
        <td> direct, polling </td>
        <td>
          <code class="code">twitter4j.Status</code></td>
        <td></td>
      </tr><tr>
        <td>
          <code class="code">timeline/retweetsofme</code>
        </td>
        <td> direct, polling </td>
        <td>
          <code class="code">twitter4j.Status</code></td>
        <td></td>
      </tr><tr>
        <td>
          <code class="code">timeline/user</code>
        </td>
        <td> direct, polling </td>
        <td>
          <code class="code">twitter4j.Status</code></td>
        <td></td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_ProducerEndpoints"></a>Producer Endpoints:</h2></div></div></div><p></p><table id="d0e172664"><tr>
        <th> Endpoint </th>
        <th> Body Type </th>
      </tr><tr>
        <td>
          <code class="code">directmessage</code>
        </td>
        <td>
          <code class="code">String</code>
        </td>
      </tr><tr>
        <td>
          <code class="code">search</code>
        </td>
        <td>
                    <code class="code">List&lt;twitter4j.Status&gt;</code>
                </td>
      </tr><tr>
        <td>
          <code class="code">timeline/user </code></td>
        <td>
          <code class="code">String</code>
        </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_URIOptions"></a>URI Options</h2></div></div></div><p></p><table id="d0e172719"><tr>
        <th> Name </th>
        <th> Default Value </th>
        <th> Description </th>
      </tr><tr>
        <td>
          <code class="code">type</code>
        </td>
        <td><code class="literal">direct</code>
        </td>
        <td> direct, event, or polling </td>
      </tr><tr>
        <td>
                    <code class="code">delay</code>
                </td>
        <td> </td>
        <td>Delay between polls. The value is 60 seconds by default. The value is in seconds for
                        <span class="bold"><strong>Camel 2.16</strong></span> or older. And in milliseconds
                    from <span class="bold"><strong>Camel 2.17</strong></span> onwards.</td>
      </tr><tr>
        <td>
                    <code class="code">consumerKey</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Consumer Key. Can also be configured on the <code class="literal">TwitterComponent</code> level instead. </td>
      </tr><tr>
        <td>
                    <code class="code">consumerSecret</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Consumer Secret. Can also be configured on the <code class="literal">TwitterComponent</code> level instead. </td>
      </tr><tr>
        <td>
                    <code class="code">accessToken</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Access Token. Can also be configured on the <code class="literal">TwitterComponent</code> level instead. </td>
      </tr><tr>
        <td>
                    <code class="code">accessTokenSecret</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Access Token Secret. Can also be configured on the <code class="literal">TwitterComponent</code> level instead. </td>
      </tr><tr>
        <td>
                    <code class="code">user</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Username, used for user timeline consumption, direct message production, etc. </td>
      </tr><tr>
        <td>
                    <code class="code">locations</code></td>
        <td><code class="literal">null</code>
        </td>
        <td> 'lat,lon;lat,lon;...' Bounding boxes, created by pairs of lat/lons.  Can be used for streaming/filter </td>
      </tr><tr>
        <td>
                    <code class="code">keywords</code></td>
        <td><code class="literal">null</code>
        </td>
        <td> 'foo1,foo2,foo3...' Can be used for search and streaming/filter. See <a class="link" href="https://support.twitter.com/articles/71577" target="_top">Advanced search</a> for keywords syntax for searching with for example OR. </td>
      </tr><tr>
        <td>
                    <code class="code">userIds</code></td>
        <td><code class="literal">null</code>
        </td>
        <td> 'username,username...' Can be used for streaming/filter </td>
      </tr><tr>
        <td>
                    <code class="code">filterOld</code>
                </td>
        <td><code class="literal">true</code>
        </td>
        <td> Filter out old tweets, that has previously been polled. This state is stored in memory only, and based on last tweet id. <span class="bold"><strong>Since Camel 2.11.0</strong></span> The search producer supports this option </td>
      </tr><tr>
        <td>
                    <code class="code">sinceId</code>
                </td>
        <td><code class="literal">1</code>
        </td>
        <td><span class="bold"><strong>Camel 2.11.0:</strong></span> The last tweet id which will be used for pulling the tweets. It is useful when the camel route is restarted after a long running.</td>
      </tr><tr>
        <td>
                    <code class="code">lang</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td><span class="bold"><strong>Camel 2.11.0:</strong></span> The lang string <a class="link" href="http://en.wikipedia.org/wiki/ISO_639-1" target="_top">ISO_639-1</a> which will be used for searching </td>
      </tr><tr>
        <td>
                    <code class="code">count</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td><span class="bold"><strong>Camel 2.11.0:</strong></span> Limiting number of results per page. </td>
      </tr><tr>
        <td>
                    <code class="code">numberOfPages</code>
                </td>
        <td><code class="literal">1</code>
        </td>
        <td><span class="bold"><strong>Camel 2.11.0:</strong></span> The number of pages result which you want camel-twitter to consume. </td>
      </tr><tr>
            <td>
                <p><code class="code">httpProxyHost</code></p>
            </td>
            <td>
                <p><code class="code">null</code></p>
            </td>
            <td>
                <p><span class="strong"><strong>Camel 2.12.3:</strong></span> The http proxy
                    host which can be used for the camel-twitter.</p>
            </td>
        </tr><tr>
            <td>
                <p><code class="code">httpProxyPort</code></p>
            </td>
            <td>
                <p><code class="code">null</code></p>
            </td>
            <td>
                <p><span class="strong"><strong>Camel 2.12.3:</strong></span> The http proxy
                    port which can be used for the camel-twitter.</p>
            </td>
        </tr><tr>
            <td>
                <p><code class="code">httpProxyUser</code></p>
            </td>
            <td>
                <p><code class="code">null</code></p>
            </td>
            <td>
                <p><span class="strong"><strong>Camel 2.12.3:</strong></span> The http proxy
                    user which can be used for the camel-twitter.</p>
            </td>
        </tr><tr>
            <td>
                <p><code class="code">httpProxyPassword</code></p>
            </td>
            <td>
                <p><code class="code">null</code></p>
            </td>
            <td>
                <p><span class="strong"><strong>Camel 2.12.3:</strong></span> The http proxy
                    password which can be used for the camel-twitter.</p>
            </td>
        </tr><tr>
                <td>
                    <p><code class="code">latitude</code></p>
                </td>
                <td>
                    <p></p>
                </td>
                <td>
                    <p><span class="bold"><strong>Camel 2.16:</strong></span> Used by the non-stream
                        geography search to search by latitude. You need to configure all the
                        following options: <code class="code">longitude</code>, <code class="code">latitude</code>,
                            <code class="code">radius</code>, and <code class="code">distanceMetric</code>.</p>
                </td>
            </tr><tr>
                <td>
                    <p><code class="code">longitude</code></p>
                </td>
                <td>
                    <p></p>
                </td>
                <td>
                    <p><span class="bold"><strong>Camel 2.16:</strong></span> Used by the non-stream
                        geography search to search by longitude. You need to configure all the
                        following options: <code class="code">longitude</code>, <code class="code">latitude</code>,
                            <code class="code">radius</code>, and <code class="code">distanceMetric</code>.</p>
                </td>
            </tr><tr>
                <td>
                    <p><code class="code">radius</code></p>
                </td>
                <td>
                    <p></p>
                </td>
                <td>
                    <p><span class="bold"><strong>Camel 2.16:</strong></span> Used by the non-stream
                        geography search to search by radius. You need to configure all the
                        following options: <code class="code">longitude</code>, <code class="code">latitude</code>,
                            <code class="code">radius</code>, and <code class="code">distanceMetric</code>.</p>
                </td>
            </tr><tr>
                <td>
                    <p><code class="code">distanceMetric</code></p>
                </td>
                <td>
                    <p><code class="code">km</code></p>
                </td>
                <td>
                    <p><span class="bold"><strong>Camel 2.16:</strong></span> Used by the non-stream
                        geography search, to search by radius using the configured metrics. The unit
                        can either be <code class="code">mi</code> for miles, or <code class="code">km</code> for kilometers.
                        You need to configure all the following options: <code class="code">longitude</code>,
                            <code class="code">latitude</code>, <code class="code">radius</code>, and
                            <code class="code">distanceMetric</code>.</p>
                </td>
            </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_Messageheader"></a>Message header</h2></div></div></div><p></p><p>
      
    </p><table id="d0e173250"><tr>
        <th> Name </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelTwitterKeywords</code>
        </td>
        <td>This header is used by the search producer to change the search key words dynamically.</td>
      </tr><tr>
        <td><code class="literal">CamelTwitterSearchLanguage</code>
        </td>
        <td><span class="bold"><strong>Camel 2.11.0:</strong></span> This header can override the option of <code class="literal">lang</code> which set the search language for the search endpoint dynamically</td>
      </tr><tr>
        <td><code class="literal">CamelTwitterCount</code>
        </td>
        <td><span class="bold"><strong>Camel 2.11.0</strong></span> This header can override the option of <code class="literal">count</code> which sets the max twitters that will be returned.</td>
      </tr><tr>
        <td><code class="literal">CamelTwitterNumberOfPages</code>
        </td>
        <td><span class="bold"><strong>Camel 2.11.0</strong></span> This header can converrid the option of <code class="literal">numberOfPages</code> which sets how many pages we want to twitter returns.</td>
      </tr><tr>
                <td><code class="literal">CamelTwitterNumberOfPages</code>
                </td>
                <td><span class="bold"><strong>Camel 2.17.0:</strong></span> The type of event received (see
                        <code class="code">org.apache.camel.component.twitter.consumer.TwitterEventType</code>).</td>
            </tr><tr>
                <td><code class="literal">CamelTwitterNumberOfPages</code>
                </td>
                <td><span class="bold"><strong>Camel 2.17.0:</strong></span> Identifies a party.</td>
            </tr><tr>
                <td><code class="literal">CamelTwitterNumberOfPages</code>
                </td>
                <td><span class="bold"><strong>Camel 2.17.0:</strong></span> Identifies a party role.</td>
            </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_Messagebody"></a>Message body</h2></div></div></div><p>All message bodies utilize objects provided by the Twitter4J API.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e173359"></a>API rate limits</h2></div></div></div><p>Twitter REST APIs encapsulated by <a class="link" href="http://twitter4j.org/" target="_top">Twitter4J</a> are subjected to <a class="link" href="https://dev.twitter.com/rest/public/rate-limiting" target="_top">API Rate
            Limiting</a>. You can find the per method limits in the <a class="link" href="https://dev.twitter.com/rest/public/rate-limits" target="_top">API Rate Limits</a>
            documentation. Note that endpoints/resources not listed in that page are default to 15
            requests per allotted user per window.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_TocreateastatusupdatewithinyourTwitterprofilesendthisproduceraStringbody."></a>To create a status update within your Twitter profile, send this producer a String body.</h2></div></div></div><p></p><pre class="programlisting">from("direct:foo")
  .to("twitter://timeline/user?consumerKey=[s]&amp;consumerSecret=[s]&amp;accessToken=[s]&amp;accessTokenSecret=[s]);</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_Topollevery5sec.allstatusesonyourhometimeline"></a>To poll, every 60 sec., all statuses on your home timeline:</h2></div></div></div><p></p><pre class="programlisting">from("twitter://timeline/home?type=polling&amp;delay=60&amp;consumerKey=[s]&amp;consumerSecret=[s]&amp;accessToken=[s]&amp;accessTokenSecret=[s]")
  .to("bean:blah");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_Tosearchforallstatuseswiththekeywordcamel"></a>To search for all statuses with the keyword 'camel':</h2></div></div></div><p></p><pre class="programlisting">from("twitter://search?type=direct&amp;keywords=camel&amp;consumerKey=[s]&amp;consumerSecret=[s]&amp;accessToken=[s]&amp;accessTokenSecret=[s]")
  .to("bean:blah");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_Searchingusingaproducerwithstatickeywords"></a>Searching using a producer with static keywords</h2></div></div></div><p></p><pre class="programlisting">from("direct:foo")
  .to("twitter://search?keywords=camel&amp;consumerKey=[s]&amp;consumerSecret=[s]&amp;accessToken=[s]&amp;accessTokenSecret=[s]");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_Searchingusingaproducerwithdynamickeywordsfromheader"></a>Searching using a producer with dynamic keywords from header</h2></div></div></div><p>In the bar header we have the keywords we want to search, so we can assign this value to the <code class="literal">CamelTwitterKeywords</code> header.</p><pre class="programlisting">from("direct:foo")
  .setHeader("CamelTwitterKeywords", header("bar"))
  .to("twitter://search?consumerKey=[s]&amp;consumerSecret=[s]&amp;accessToken=[s]&amp;accessTokenSecret=[s]");</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Twitter_HSH_Example"></a>Example</h2></div></div></div><p>See also the <a class="link" href="http://camel.apache.org/twitter-websocket-example.html" target="_top">Twitter Websocket Example</a>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="link" href="http://camel.apache.org/twitter-websocket-example.html" target="_top">Twitter Websocket Example</a>
        </p></li></ul></div></div></div></body></html>