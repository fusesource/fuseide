<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Hazelcast Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="HawtDB-HawtDB.html" title="HawtDB Component"><link rel="next" href="hbase-HBaseComponent.html" title="HBase Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="HazelcastComponent-HazelcastComponent"></a>Hazelcast Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-URIformat">URI format</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Options">Options</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Sections">Sections</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-UsageofMap">Usage of Map</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-mapcacheconsumer-from-map">Map cache consumer - from("hazelcast:map:foo")</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-UsageofMultiMap">Usage of Multi Map</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-UsageofQueue">Usage of Queue</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-UsageofTopic">Usage of Topic</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-UsageofList">Usage of List</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-UsageofSEDA">Usage of SEDA</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-UsageofAtomicNumber">Usage of Atomic Number</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-clustersupport">cluster support</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-instanceconsumer-from">instance consumer - from("hazelcast:instance:foo")</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Usinghazelcastreference">Using hazelcast reference</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-PublishinghazelcastinstanceasanOSGIservice">Publishing hazelcast instance as an OSGI service</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-UsageofReplicatedmap">Usage of Replicated map</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-UsageofRingbuffer">Usage of Ringbuffer</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel 2.7</strong></span></p><p>The <span class="strong"><strong>hazelcast:</strong></span> component allows you to work with the
<a class="link" href="http://www.hazelcast.com" target="_top">Hazelcast</a> distributed data grid / cache.
Hazelcast is a in memory data grid, entirely written in Java (single
jar). It offers a great palette of different data stores like map, multi
map (same key, n values), queue, list and atomic number. The main reason
to use Hazelcast is its simple cluster support. If you have enabled
multicast on your network you can run a cluster with hundred nodes with
no extra configuration. Hazelcast can simply configured to add
additional features like n copies between nodes (default is 1), cache
persistence, network configuration (if needed), near cache, enviction
and so on. For more information consult the Hazelcast documentation on
<a class="link" href="http://www.hazelcast.com/docs.jsp" target="_top">http://www.hazelcast.com/docs.jsp</a>.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-hazelcast<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">hazelcast:[ map | multimap | queue | topic | seda | set | atomicvalue | instance | list | ringbuffer]:cachename[?options]</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Topic support is available as of Camel 2.15.&nbsp;*</li><li class="listitem">RingBuffer support is available as of Camel 2.16.&nbsp;*</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-Options"></a>Options</h2></div></div></div><p>The Hazelcast component supports 1 options which are listed below.</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="70%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>hazelcastInstance</p></td><td align="left" valign="top"><p><code class="literal">HazelcastInstance</code></p></td><td align="left" valign="top"><p>The hazelcast instance reference which can be used for hazelcast endpoint. If you don&#8217;t specify the instance reference camel use the default hazelcast instance from the camel-hazelcast instance.</p></td></tr></tbody></table></div><p>{% endraw %}</p><p>The Hazelcast component supports 13 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>command</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">HazelcastCommand</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> What operation to perform.</p></td></tr><tr><td align="left" valign="top"><p>cacheName</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The name of the cache</p></td></tr><tr><td align="left" valign="top"><p>defaultOperation</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>To specify a default operation to use if no operation header has been provided.</p></td></tr><tr><td align="left" valign="top"><p>hazelcastInstance</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">HazelcastInstance</code></p></td><td align="left" valign="top"><p>The hazelcast instance reference which can be used for hazelcast endpoint.</p></td></tr><tr><td align="left" valign="top"><p>hazelcastInstanceName</p></td><td align="left" valign="top"><p>common</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The hazelcast instance reference name which can be used for hazelcast endpoint. If you don&#8217;t specify the instance reference camel use the default hazelcast instance from the camel-hazelcast instance.</p></td></tr><tr><td align="left" valign="top"><p>bridgeErrorHandler</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler which mean any exceptions occurred while the consumer is trying to pickup incoming messages or the likes will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exceptionHandler</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExceptionHandler</code></p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exchangePattern</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExchangePattern</code></p></td><td align="left" valign="top"><p>Sets the exchange pattern when the consumer creates an exchange.</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr><tr><td align="left" valign="top"><p>concurrentConsumers</p></td><td align="left" valign="top"><p>seda</p></td><td align="left" valign="top"><p><code class="literal">1</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>To use concurrent consumers polling from the SEDA queue.</p></td></tr><tr><td align="left" valign="top"><p>pollTimeout</p></td><td align="left" valign="top"><p>seda</p></td><td align="left" valign="top"><p><code class="literal">1000</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>The timeout used when consuming from the SEDA queue. When a timeout occurs the consumer can check whether it is allowed to continue running. Setting a lower value allows the consumer to react more quickly upon shutdown.</p></td></tr><tr><td align="left" valign="top"><p>transacted</p></td><td align="left" valign="top"><p>seda</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If set to true then the consumer runs in transaction mode where the messages in the seda queue will only be removed if the transaction commits which happens when the processing is complete.</p></td></tr><tr><td align="left" valign="top"><p>transferExchange</p></td><td align="left" valign="top"><p>seda</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>If set to true the whole Exchange will be transfered. If header or body contains not serializable objects they will be skipped.</p></td></tr></tbody></table></div><p>{% endraw %}</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-Sections"></a>Sections</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Usage of <a class="link" href="hazelcast-component.html" target="_top">#map</a></li><li class="listitem">Usage of <a class="link" href="hazelcast-component.html" target="_top">#multimap</a></li><li class="listitem">Usage of <a class="link" href="hazelcast-component.html" target="_top">#queue</a></li><li class="listitem">Usage of <a class="link" href="hazelcast-component.html" target="_top">#topic</a></li><li class="listitem">Usage of <a class="link" href="hazelcast-component.html" target="_top">#list</a></li><li class="listitem">Usage of <a class="link" href="hazelcast-component.html" target="_top">#seda</a></li><li class="listitem">Usage of <a class="link" href="hazelcast-component.html" target="_top">atomic number</a></li><li class="listitem">Usage of <a class="link" href="hazelcast-component.html" target="_top">#cluster</a> support (instance)</li><li class="listitem">Usage of <a class="link" href="hazelcast-component.html" target="_top">#replicatedmap</a>&nbsp;</li><li class="listitem">Usage of&nbsp;<a class="link" href="hazelcast-component.html" target="_top">#ringbuffer</a>&nbsp;</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-UsageofMap"></a>Usage of Map</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-mapcacheproducer-to-map">Map cache producer - to("hazelcast:map:foo")</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-mapcacheproducer-to-map"></a>Map cache producer - to("hazelcast:map:foo")</h3></div></div></div><p>If you want to store a value in a map you can use the map cache
producer.</p><p>The map cache producer provides follow operations specified by <span class="strong"><strong>CamelHazelcastOperationType</strong></span> header:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">put</li><li class="listitem">putIfAbsent</li><li class="listitem">get</li><li class="listitem">getAll</li><li class="listitem">keySet</li><li class="listitem">containsKey</li><li class="listitem">containsValue</li><li class="listitem">delete</li><li class="listitem">update</li><li class="listitem">query</li><li class="listitem">clear</li><li class="listitem">evict</li><li class="listitem">evictAll</li></ul></div><p>All operations are provide the inside the "hazelcast.operation.type" header variable. In Java
DSL you can use the constants from <code class="literal">org.apache.camel.component.hazelcast.HazelcastConstants</code>.</p><p>Header Variables for the request message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastOperationType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>as already described.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastObjectId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the object id to store / find your object inside the cache (not needed for the query operation)</p></td></tr></tbody></table></div><p><span class="strong"><strong>put</strong></span> and <span class="strong"><strong>putIfAbsent</strong></span> operations provide an eviction mechanism:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastObjectTtlValue</code></p></td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>value of TTL.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastObjectTtlUnit</code></p></td><td align="left" valign="top"><p><code class="literal">java.util.concurrent.TimeUnit</code></p></td><td align="left" valign="top"><p>value of time unit ( DAYS / HOURS / MINUTES / &#8230;&#8203;.</p></td></tr></tbody></table></div><p>You can call the samples with:</p><pre class="programlisting">template.sendBodyAndHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:[put|get|update|delete|query|evict]"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"my-foo"</em></strong>, HazelcastConstants.OBJECT_ID, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"4711"</em></strong>);</pre><p><a name="HazelcastComponent-Sampleforput"></a>Sample for <span class="strong"><strong>put</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUT_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;put&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:map:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p>Sample for <span class="strong"><strong>put</strong></span> with eviction:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUT_OPERATION))
.setHeader(HazelcastConstants.TTL_VALUE, constant(Long.valueOf(<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1</span>)))
.setHeader(HazelcastConstants.TTL_UNIT, constant(TimeUnit.MINUTES))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;put&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"HazelcastConstants.TTL_VALUE"</em></strong>&gt;
        &lt;simple resultType=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"java.lang.Long"</em></strong>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">1</span>&lt;/simple&gt;
    &lt;/setHeader&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"HazelcastConstants.TTL_UNIT"</em></strong>&gt;
        &lt;simple resultType=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"java.util.concurrent.TimeUnit"</em></strong>&gt;TimeUnit.MINUTES&lt;/simple&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:map:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p><a name="HazelcastComponent-Sampleforget"></a>Sample for <span class="strong"><strong>get</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.MAP_PREFIX)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong>);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;get&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:map:foo"</em></strong> /&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong> /&gt;
&lt;/route&gt;</pre><p><a name="HazelcastComponent-Sampleforupdate"></a>Sample for <span class="strong"><strong>update</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:update"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.UPDATE_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:update"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;update&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:map:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p><a name="HazelcastComponent-Samplefordelete"></a>Sample for <span class="strong"><strong>delete</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:delete"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DELETE_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.MAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:delete"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;delete&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:map:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p><a name="HazelcastComponent-Sampleforquery"></a>Sample for <span class="strong"><strong>query</strong></span></p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:query"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.QUERY_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.MAP_PREFIX)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong>);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:query"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;query&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:map:foo"</em></strong> /&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong> /&gt;
&lt;/route&gt;</pre><p>For the query operation Hazelcast offers a SQL like syntax to query your
distributed map.</p><pre class="programlisting">String q1 = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bar &gt; 1000"</em></strong>;
template.sendBodyAndHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:query"</em></strong>, null, HazelcastConstants.QUERY, q1);</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-mapcacheconsumer-from-map"></a>Map cache consumer - from("hazelcast:map:foo")</h2></div></div></div><p>Hazelcast provides event listeners on their data grid. If you want to be
notified if a cache will be manipulated, you can use the map consumer.
There&#8217;re 4 events: <span class="strong"><strong>put</strong></span>, <span class="strong"><strong>update</strong></span>, <span class="strong"><strong>delete</strong></span> and <span class="strong"><strong>envict</strong></span>. The event
type will be stored in the "<span class="strong"><strong>hazelcast.listener.action</strong></span>" header
variable. The map consumer provides some additional information inside
these variables:</p><p>Header Variables inside the response message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerTime</code></p></td><td align="left" valign="top"><p><code class="literal">Long</code></p></td><td align="left" valign="top"><p>time of the event in millis</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the map consumer sets here "cachelistener"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerAction</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>type of event - here <span class="strong"><strong>added</strong></span>, <span class="strong"><strong>updated</strong></span>, <span class="strong"><strong>envicted</strong></span> and <span class="strong"><strong>removed</strong></span>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastObjectId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the oid of the object</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastCacheName</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the name of the cache - e.g. "foo"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastCacheType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the type of the cache - here map</p></td></tr></tbody></table></div><p>The object value will be stored within <span class="strong"><strong>put</strong></span> and <span class="strong"><strong>update</strong></span> actions inside
the message body.</p><p>Here&#8217;s a sample:</p><pre class="programlisting">fromF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.MAP_PREFIX)
.log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"object..."</em></strong>)
.choice()
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
         .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...added"</em></strong>)
         .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:added"</em></strong>)
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ENVICTED))
         .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...envicted"</em></strong>)
         .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:envicted"</em></strong>)
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.UPDATED))
         .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...updated"</em></strong>)
         .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:updated"</em></strong>)
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
         .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...removed"</em></strong>)
         .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:removed"</em></strong>)
    .otherwise()
         .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"fail!"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-UsageofMultiMap"></a>Usage of Multi Map</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-multimapcacheproducer-to-multimap">multimap cache producer - to("hazelcast:multimap:foo")</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-multimapcacheconsumer-from-multimap">multimap cache consumer - from("hazelcast:multimap:foo")</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-multimapcacheproducer-to-multimap"></a>multimap cache producer - to("hazelcast:multimap:foo")</h3></div></div></div><p>A multimap is a cache where you can store n values to one key. The
multimap producer provides 4 operations (put, get, removevalue, delete).</p><p>Header Variables for the request message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastOperationType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>valid values are: put, get, removevalue, delete <span class="strong"><strong>From Camel 2.16:</strong></span> clear.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastObjectId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the object id to store / find your object inside the cache</p></td></tr></tbody></table></div><p><a name="HazelcastComponent-Sampleforput-1"></a>Sample for <span class="strong"><strong>put</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUT_OPERATION))
.to(String.format(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.MULTIMAP_PREFIX));</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong> /&gt;
    &lt;log message=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"put.."</em></strong>/&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;put&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:multimap:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p><a name="HazelcastComponent-Sampleforremovevalue"></a>Sample for <span class="strong"><strong>removevalue</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:removevalue"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.REMOVEVALUE_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.MULTIMAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:removevalue"</em></strong> /&gt;
    &lt;log message=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"removevalue..."</em></strong>/&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;removevalue&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:multimap:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p>To remove a value you have to provide the value you want to remove
inside the message body. If you have a multimap object
\{<code class="literal">key: "4711" values: { "my-foo", "my-bar"</code>}} you have to put "my-foo"
inside the message body to remove the "my-foo" value.</p><p><a name="HazelcastComponent-Sampleforget-1"></a>Sample for <span class="strong"><strong>get</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.MULTIMAP_PREFIX)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong>);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong> /&gt;
    &lt;log message=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"get.."</em></strong>/&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;get&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:multimap:foo"</em></strong> /&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong> /&gt;
&lt;/route&gt;</pre><p><a name="HazelcastComponent-Samplefordelete-1"></a>Sample for <span class="strong"><strong>delete</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:delete"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DELETE_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.MULTIMAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:delete"</em></strong> /&gt;
    &lt;log message=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"delete.."</em></strong>/&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;delete&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:multimap:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p>you can call them in your test class with:</p><pre class="programlisting">template.sendBodyAndHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:[put|get|removevalue|delete]"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"my-foo"</em></strong>, HazelcastConstants.OBJECT_ID, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"4711"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-multimapcacheconsumer-from-multimap"></a>multimap cache consumer - from("hazelcast:multimap:foo")</h3></div></div></div><p>For the multimap cache this component provides the same listeners /
variables as for the map cache consumer (except the update and enviction
listener). The only difference is the <span class="strong"><strong>multimap</strong></span> prefix inside the URI.
Here is a sample:</p><pre class="programlisting">fromF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.MULTIMAP_PREFIX)
.log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"object..."</em></strong>)
.choice()
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
        .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...added"</em></strong>)
                .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:added"</em></strong>)
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//.when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ENVICTED))</em>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//        .log("...envicted")</em>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//        .to("mock:envicted")</em>
        .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
                .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...removed"</em></strong>)
                .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:removed"</em></strong>)
        .otherwise()
                .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"fail!"</em></strong>);</pre><p>Header Variables inside the response message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerTime</code></p></td><td align="left" valign="top"><p><code class="literal">Long</code></p></td><td align="left" valign="top"><p>time of the event in millis</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the map consumer sets here "cachelistener"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerAction</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>type of event - here <span class="strong"><strong>added</strong></span> and <span class="strong"><strong>removed</strong></span> (and soon <span class="strong"><strong>envicted</strong></span>)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastObjectId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the oid of the object</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastCacheName</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the name of the cache - e.g. "foo"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastCacheType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the type of the cache - here multimap</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-UsageofQueue"></a>Usage of Queue</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Queueproducer">Queue producer &#8211; to(&#8220;hazelcast:queue:foo&#8221;)</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Queueconsumer">Queue consumer &#8211; from(&#8220;hazelcast:queue:foo&#8221;)</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-Queueproducer"></a>Queue producer &#8211; to(&#8220;hazelcast:queue:foo&#8221;)</h3></div></div></div><p>The queue producer provides 6 operations (add, put, poll, peek, offer,
removevalue).</p><p><a name="HazelcastComponent-Sampleforadd"></a>Sample for <span class="strong"><strong>add</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:add"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.ADD_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.QUEUE_PREFIX);</pre><p><a name="HazelcastComponent-Sampleforput-2"></a>Sample for <span class="strong"><strong>put</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUT_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.QUEUE_PREFIX);</pre><p><a name="HazelcastComponent-Sampleforpoll"></a>Sample for <span class="strong"><strong>poll</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:poll"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.POLL_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.QUEUE_PREFIX);</pre><p><a name="HazelcastComponent-Sampleforpeek"></a>Sample for <span class="strong"><strong>peek</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:peek"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PEEK_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.QUEUE_PREFIX);</pre><p><a name="HazelcastComponent-Sampleforoffer"></a>Sample for <span class="strong"><strong>offer</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:offer"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.OFFER_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.QUEUE_PREFIX);</pre><p><a name="HazelcastComponent-Sampleforremovevalue-1"></a>Sample for <span class="strong"><strong>removevalue</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:removevalue"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.REMOVEVALUE_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.QUEUE_PREFIX);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-Queueconsumer"></a>Queue consumer &#8211; from(&#8220;hazelcast:queue:foo&#8221;)</h3></div></div></div><p>The queue consumer provides 2 operations (add, remove).</p><pre class="programlisting">fromF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%smm"</em></strong>, HazelcastConstants.QUEUE_PREFIX)
   .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"object..."</em></strong>)
   .choice()
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
            .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...added"</em></strong>)
        .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:added"</em></strong>)
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
        .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...removed"</em></strong>)
        .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:removed"</em></strong>)
    .otherwise()
        .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"fail!"</em></strong>);</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-UsageofTopic"></a>Usage of Topic</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Topicproducer">Topic producer &#8211; to(&#8220;hazelcast:topic:foo&#8221;)</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Topicconsumer">Topic consumer &#8211; from(&#8220;hazelcast:topic:foo&#8221;)</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-Topicproducer"></a>Topic producer &#8211; to(&#8220;hazelcast:topic:foo&#8221;)</h3></div></div></div><p>The topic producer provides only one operation (publish).</p><p><a name="HazelcastComponent-Sampleforpublish"></a>Sample for&nbsp;<span class="strong"><strong>publish</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:add"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUBLISH_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.PUBLISH_OPERATION);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-Topicconsumer"></a>Topic consumer &#8211; from(&#8220;hazelcast:topic:foo&#8221;)</h3></div></div></div><p>The topic consumer provides only one operation (received). This
component is supposed to support multiple consumption as it&#8217;s expected
when it comes to topics so you are free to have as much consumers as you
need on the same hazelcast topic.</p><pre class="programlisting">fromF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.TOPIC_PREFIX)
  .choice()
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.RECEIVED))
      .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...message received"</em></strong>)
    .otherwise()
      .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...this should never have happened"</em></strong>)</pre><p>&nbsp;</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-UsageofList"></a>Usage of List</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Listproducer">List producer &#8211; to(&#8220;hazelcast:list:foo&#8221;)</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Thelistconsumerprovides2operationsListconsumer">The list consumer provides 2 operations (add, remove).List consumer &#8211; from(&#8220;hazelcast:list:foo&#8221;)</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-Listproducer"></a>List producer &#8211; to(&#8220;hazelcast:list:foo&#8221;)</h3></div></div></div><p>The list producer provides 4 operations (add, addAll, set, get,
removevalue, removeAll, clear).</p><p><a name="HazelcastComponent-Sampleforadd-1"></a>Sample for <span class="strong"><strong>add</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:add"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.ADD_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.LIST_PREFIX);</pre><p><a name="HazelcastComponent-Sampleforget-2"></a>Sample for <span class="strong"><strong>get</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.LIST_PREFIX)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong>);</pre><p><a name="HazelcastComponent-Sampleforsetvalue"></a>Sample for <span class="strong"><strong>setvalue</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:set"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.SETVALUE_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.LIST_PREFIX);</pre><p><a name="HazelcastComponent-Sampleforremovevalue-2"></a>Sample for <span class="strong"><strong>removevalue</strong></span>:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:removevalue"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.REMOVEVALUE_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.LIST_PREFIX);</pre><p>Note that&nbsp;<span class="strong"><strong>CamelHazelcastObjectIndex</strong></span> header is used for indexing
purpose.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-Thelistconsumerprovides2operationsListconsumer"></a>The list consumer provides 2 operations (add, remove).List consumer &#8211; from(&#8220;hazelcast:list:foo&#8221;)</h3></div></div></div><pre class="programlisting">fromF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%smm"</em></strong>, HazelcastConstants.LIST_PREFIX)
    .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"object..."</em></strong>)
    .choice()
        .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
            .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...added"</em></strong>)
                        .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:added"</em></strong>)
        .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
            .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...removed"</em></strong>)
                        .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:removed"</em></strong>)
                .otherwise()
                        .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"fail!"</em></strong>);</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-UsageofSEDA"></a>Usage of SEDA</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-SEDAproducer">SEDA producer &#8211; to(&#8220;hazelcast:seda:foo&#8221;)</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-SEDAconsumer">SEDA consumer &#8211; from(&#8220;hazelcast:seda:foo&#8221;)</a></span></dt></dl></div><p>SEDA component differs from the rest components provided. It implements
a work-queue in order to support asynchronous SEDA architectures,
similar to the core "SEDA" component.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-SEDAproducer"></a>SEDA producer &#8211; to(&#8220;hazelcast:seda:foo&#8221;)</h3></div></div></div><p>The SEDA producer provides no operations. You only send data to the
specified queue.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default value</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">transferExchange</code></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p>if set to true the whole Exchange will be transfered. If
header or body contains not serializable objects, they will be skipped.</p></td></tr></tbody></table></div><p>Java DSL :</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:foo"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:seda:foo"</em></strong>);</pre><p>Spring DSL :</p><pre class="programlisting">&lt;route&gt;
   &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:start"</em></strong> /&gt;
   &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:seda:foo"</em></strong> /&gt;
&lt;/route&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-SEDAconsumer"></a>SEDA consumer &#8211; from(&#8220;hazelcast:seda:foo&#8221;)</h3></div></div></div><p>The SEDA consumer provides no operations. You only retrieve data from
the specified queue.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Default value</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">pollInterval</code></p></td><td align="left" valign="top"><p><code class="literal">1000</code></p></td><td align="left" valign="top"><p>The timeout used when consuming from the SEDA queue. When a timeout
occurs, the consumer can check whether it is allowed to continue
running. Setting a lower value allows the consumer to react more quickly
upon shutdown. (<span class="strong"><strong>deprecated</strong></span> from Camel 2.15 onwards, use pollTimeout
instead).</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">pollTimeout</code></p></td><td align="left" valign="top"><p>1000</p></td><td align="left" valign="top"><p>The timeout used when consuming from the SEDA queue. When
a timeout occurs, the consumer can check whether it is allowed to
continue running. Setting a lower value allows the consumer to react
more quickly upon shutdown.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">concurrentConsumers</code></p></td><td align="left" valign="top"><p><code class="literal">1</code></p></td><td align="left" valign="top"><p>To use concurrent consumers polling from the SEDA queue.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">transferExchange</code></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p>if set to true the whole Exchange will be transfered. If
header or body contains not serializable objects, they will be skipped.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">transacted</code></p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p>if set to true then the consumer runs in transaction
mode, where the messages in the seda queue will only be removed if the
transaction commits, which happens when the processing is complete.</p></td></tr></tbody></table></div><p>Java DSL :</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:seda:foo"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong>);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
  &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:seda:foo"</em></strong> /&gt;
  &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:result"</em></strong> /&gt;
&lt;/route&gt;</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-UsageofAtomicNumber"></a>Usage of Atomic Number</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-atomicnumberproducer">atomic number producer - to("hazelcast:atomicnumber:foo")</a></span></dt></dl></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">There is no consumer for this endpoint! *</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-atomicnumberproducer"></a>atomic number producer - to("hazelcast:atomicnumber:foo")</h3></div></div></div><p>An atomic number is an object that simply provides a grid wide number
(long). The operations for this producer are setvalue (set the number
with a given value), get, increase (+1), decrease (-1) and destroy.</p><p>Header Variables for the request message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastOperationType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>valid values are: setvalue, get, increase, decrease, destroy</p></td></tr></tbody></table></div><p><a name="HazelcastComponent-Sampleforset"></a>Sample for <span class="strong"><strong>set</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:set"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.SETVALUE_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:set"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;setvalue&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:atomicvalue:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p>Provide the value to set inside the message body (here the value is 10):
<code class="literal">template.sendBody("direct:set", 10);</code></p><p><a name="HazelcastComponent-Sampleforget-3"></a>Sample for <span class="strong"><strong>get</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;get&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:atomicvalue:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p>You can get the number with
<code class="literal">long body = template.requestBody("direct:get", null, Long.class);</code>.</p><p><a name="HazelcastComponent-Sampleforincrement"></a>Sample for <span class="strong"><strong>increment</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:increment"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.INCREMENT_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:increment"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;increment&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:atomicvalue:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p>The actual value (after increment) will be provided inside the message
body.</p><p><a name="HazelcastComponent-Samplefordecrement"></a>Sample for <span class="strong"><strong>decrement</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:decrement"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DECREMENT_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:decrement"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;decrement&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:atomicvalue:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p>The actual value (after decrement) will be provided inside the message
body.</p><p><a name="HazelcastComponent-Samplefordestroy"></a>Sample for <span class="strong"><strong>destroy</strong></span></p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:destroy"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DESTROY_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.ATOMICNUMBER_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:destroy"</em></strong> /&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;destroy&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:atomicvalue:foo"</em></strong> /&gt;
&lt;/route&gt;</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-clustersupport"></a>cluster support</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">This endpoint provides no producer! *</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-instanceconsumer-from"></a>instance consumer - from("hazelcast:instance:foo")</h2></div></div></div><p>Hazelcast makes sense in one single "server node", but it&#8217;s extremly
powerful in a clustered environment. The instance consumer fires if a
new cache instance will join or leave the cluster.</p><p>Here&#8217;s a sample:</p><pre class="programlisting">fromF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sfoo"</em></strong>, HazelcastConstants.INSTANCE_PREFIX)
.log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"instance..."</em></strong>)
.choice()
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
        .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...added"</em></strong>)
        .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:added"</em></strong>)
    .otherwise()
        .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...removed"</em></strong>)
        .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:removed"</em></strong>);</pre><p>Each event provides the following information inside the message header:</p><p>Header Variables inside the response message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerTime</code></p></td><td align="left" valign="top"><p><code class="literal">Long</code></p></td><td align="left" valign="top"><p>time of the event in millis</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the map consumer sets here "instancelistener"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerAction</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>type of event - here <span class="strong"><strong>added</strong></span> or <span class="strong"><strong>removed</strong></span>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastInstanceHost</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>host name of the instance</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastInstancePort</code></p></td><td align="left" valign="top"><p><code class="literal">Integer</code></p></td><td align="left" valign="top"><p>port number of the instance</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-Usinghazelcastreference"></a>Using hazelcast reference</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Byitsname">By its name</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-Byinstance">By instance</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-Byitsname"></a>By its name</h3></div></div></div><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcastLifecycle"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.core.LifecycleService"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-bean</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcastInstance"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"getLifecycleService"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">destroy-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"shutdown"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"config"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.config.Config"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constructor-arg</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">type</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"java.lang.String"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"HZ.INSTANCE"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcastInstance"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.core.Hazelcast"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"newHazelcastInstance"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constructor-arg</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">type</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.config.Config"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"config"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/spring"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"testHazelcastInstanceBeanRefPut"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:testHazelcastInstanceBeanRefPut"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"CamelHazelcastOperationType"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>put<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcast:map:testmap?hazelcastInstanceName=HZ.INSTANCE"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"testHazelcastInstanceBeanRefGet"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:testHazelcastInstanceBeanRefGet"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"CamelHazelcastOperationType"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>get<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcast:map:testmap?hazelcastInstanceName=HZ.INSTANCE"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"seda:out"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-Byinstance"></a>By instance</h3></div></div></div><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcastInstance"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.core.Hazelcast"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"newHazelcastInstance"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcastLifecycle"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.core.LifecycleService"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-bean</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcastInstance"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"getLifecycleService"</span>
      <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">destroy-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"shutdown"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/spring"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"testHazelcastInstanceBeanRefPut"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:testHazelcastInstanceBeanRefPut"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"CamelHazelcastOperationType"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>put<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcast:map:testmap?hazelcastInstance=#hazelcastInstance"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"testHazelcastInstanceBeanRefGet"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:testHazelcastInstanceBeanRefGet"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"CamelHazelcastOperationType"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>get<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcast:map:testmap?hazelcastInstance=#hazelcastInstance"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"seda:out"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-PublishinghazelcastinstanceasanOSGIservice"></a>Publishing hazelcast instance as an OSGI service</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-BundleAcreateaninstanceandpublishesitasanOSGIservice">Bundle A create an instance and publishes it as an OSGI service</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-BundleBusestheinstance">Bundle B uses the instance</a></span></dt></dl></div><p>If operating in an OSGI container and you would want to use one instance
of hazelcast across all bundles in the same container. You can publish
the instance as an OSGI service and bundles using the cache al need is
to reference the service in the hazelcast endpoint.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-BundleAcreateaninstanceandpublishesitasanOSGIservice"></a>Bundle A create an instance and publishes it as an OSGI service</h3></div></div></div><p>&nbsp;</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"config"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.config.FileSystemXmlConfig"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;argument</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">type</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"java.lang.String"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">value</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"${hazelcast.config}"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;bean</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcastInstance"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">class</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.core.Hazelcast"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">factory-method</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"newHazelcastInstance"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;argument</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">type</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.config.Config"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"config"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/bean&gt;</strong>

<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- publishing the hazelcastInstance as a service --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;service</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcastInstance"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">interface</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.core.HazelcastInstance"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-BundleBusestheinstance"></a>Bundle B uses the instance</h3></div></div></div><pre class="programlisting"><em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- referencing the hazelcastInstance as a service --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;reference</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcastInstance"</span> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">interface</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"com.hazelcast.core.HazelcastInstance"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>

<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;camelContext</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">xmlns</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"http://camel.apache.org/schema/blueprint"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"testHazelcastInstanceBeanRefPut"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:testHazelcastInstanceBeanRefPut"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"CamelHazelcastOperationType"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>put<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcast:map:testmap?hazelcastInstance=#hazelcastInstance"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>

    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">id</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"testHazelcastInstanceBeanRefGet"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:testHazelcastInstanceBeanRefGet"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;setHeader</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">headerName</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"CamelHazelcastOperationType"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&gt;</strong>
            <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;constant&gt;</strong>get<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/constant&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/setHeader&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"hazelcast:map:testmap?hazelcastInstance=#hazelcastInstance"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
        <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"seda:out"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/camelContext&gt;</strong></pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-UsageofReplicatedmap"></a>Usage of Replicated map</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-replicatedmapcacheproducer">replicatedmap cache producer</a></span></dt><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-replicatedmapcacheconsumer">replicatedmap cache consumer</a></span></dt></dl></div><p><span class="strong"><strong>Avalaible from Camel 2.16</strong></span></p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-replicatedmapcacheproducer"></a>replicatedmap cache producer</h3></div></div></div><p>A replicated map is a weakly consistent, distributed key-value data
structure with no data partition. The replicatedmap producer provides 4
operations (put, get, delete, clear).</p><p>Header Variables for the request message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastOperationType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>valid values are: put, get, removevalue, delete</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastObjectId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the object id to store / find your object inside the cache</p></td></tr></tbody></table></div><p><a name="HazelcastComponent-Sampleforput-3"></a>Sample for&nbsp;<span class="strong"><strong>put</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.PUT_OPERATION))
.to(String.format(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.REPLICATEDMAP_PREFIX));</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong> /&gt;
    &lt;log message=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"put.."</em></strong>/&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;put&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:replicatedmap:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p><a name="HazelcastComponent-Sampleforget-4"></a>Sample for&nbsp;<span class="strong"><strong>get</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.GET_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.REPLICATEDMAP_PREFIX)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong>);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong> /&gt;
    &lt;log message=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"get.."</em></strong>/&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;get&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:replicatedmap:foo"</em></strong> /&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong> /&gt;
&lt;/route&gt;</pre><p><a name="HazelcastComponent-Samplefordelete-2"></a>Sample for&nbsp;<span class="strong"><strong>delete</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:delete"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.DELETE_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.REPLICATEDMAP_PREFIX);</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:delete"</em></strong> /&gt;
    &lt;log message=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"delete.."</em></strong>/&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;delete&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:replicatedmap:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p>you can call them in your test class with:</p><pre class="programlisting">template.sendBodyAndHeader(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:[put|get|delete|clear]"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"my-foo"</em></strong>, HazelcastConstants.OBJECT_ID, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"4711"</em></strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-replicatedmapcacheconsumer"></a>replicatedmap cache consumer</h3></div></div></div><p>For the multimap cache this component provides the same listeners /
variables as for the map cache consumer (except the update and enviction
listener). The only difference is the&nbsp;<span class="strong"><strong>multimap</strong></span>&nbsp;prefix inside the URI.
Here is a sample:</p><pre class="programlisting">fromF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.MULTIMAP_PREFIX)
.log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"object..."</em></strong>)
.choice()
    .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ADDED))
        .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...added"</em></strong>)
                .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:added"</em></strong>)
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//.when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.ENVICTED))</em>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//        .log("...envicted")</em>
        <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//        .to("mock:envicted")</em>
        .when(header(HazelcastConstants.LISTENER_ACTION).isEqualTo(HazelcastConstants.REMOVED))
                .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"...removed"</em></strong>)
                .to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"mock:removed"</em></strong>)
        .otherwise()
                .log(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"fail!"</em></strong>);</pre><p>Header Variables inside the response message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerTime</code></p></td><td align="left" valign="top"><p><code class="literal">Long</code></p></td><td align="left" valign="top"><p>time of the event in millis</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the map consumer sets here "cachelistener"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastListenerAction</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>type of event - here <span class="strong"><strong>added</strong></span> and <span class="strong"><strong>removed</strong></span> (and soon <span class="strong"><strong>envicted</strong></span>)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastObjectId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the oid of the object</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastCacheName</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the name of the cache - e.g. "foo"</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastCacheType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the type of the cache - here replicatedmap</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="HazelcastComponent-UsageofRingbuffer"></a>Usage of Ringbuffer</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="HazelcastComponent-HazelcastComponent.html#HazelcastComponent-ringbuffercacheproducer">ringbuffer cache producer</a></span></dt></dl></div><p><span class="strong"><strong>Avalaible from Camel 2.16</strong></span></p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="HazelcastComponent-ringbuffercacheproducer"></a>ringbuffer cache producer</h3></div></div></div><p>Ringbuffer is a distributed data structure where the data is stored in a
ring-like structure. You can think of it as a circular array with a
certain capacity.&nbsp;The ringbuffer producer provides 5 operations (add,
readonceHead, readonceTail, remainingCapacity, capacity).</p><p>Header Variables for the request message:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastOperationType</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>valid values are: put, get, removevalue, delete</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">CamelHazelcastObjectId</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>the object id to store / find your object inside the cache</p></td></tr></tbody></table></div><p><a name="HazelcastComponent-Sampleforput-4"></a>Sample for&nbsp;<span class="strong"><strong>put</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.ADD_OPERATION))
.to(String.format(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.RINGBUFFER_PREFIX));</pre><p>Spring DSL:</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:put"</em></strong> /&gt;
    &lt;log message=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"put.."</em></strong>/&gt;
        &lt;!-- If using version <span xmlns="http://www.w3.org/1999/xhtml" class="hl-number">2.8</span> and above set headerName to <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"CamelHazelcastOperationType"</em></strong> --&gt;
    &lt;setHeader headerName=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast.operation.type"</em></strong>&gt;
        &lt;constant&gt;add&lt;/constant&gt;
    &lt;/setHeader&gt;
    &lt;to uri=<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:ringbuffer:foo"</em></strong> /&gt;
&lt;/route&gt;</pre><p><a name="HazelcastComponent-Sampleforreadoncefromhead"></a>Sample for&nbsp;<span class="strong"><strong>readonce from head</strong></span>:</p><p>Java DSL:</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:get"</em></strong>)
.setHeader(HazelcastConstants.OPERATION, constant(HazelcastConstants.READ_ONCE_HEAD_OPERATION))
.toF(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"hazelcast:%sbar"</em></strong>, HazelcastConstants.RINGBUFFER_PREFIX)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"seda:out"</em></strong>);</pre></div></div></div></body></html>