<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>ElasticSearch Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="EJB-EJBComponent.html" title="EJB Component"><link rel="next" href="ElSql-ElSqlComponent.html" title="ElSql Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="ElasticSearch-ElasticSearchComponent"></a>ElasticSearch Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ElasticSearch-ElasticSearchComponent.html#ElasticSearch-URIformat">URI format</a></span></dt><dt><span class="section"><a href="ElasticSearch-ElasticSearchComponent.html#ElasticSearch-EndpointOptions">Endpoint Options</a></span></dt><dt><span class="section"><a href="ElasticSearch-ElasticSearchComponent.html#ElasticSearch-MessageOperations">Message Operations</a></span></dt><dt><span class="section"><a href="ElasticSearch-ElasticSearchComponent.html#ElasticSearch-IndexExample">Index Example</a></span></dt><dt><span class="section"><a href="ElasticSearch-ElasticSearchComponent.html#ElasticSearch-Formoreinformation">For more information, see these resources</a></span></dt><dt><span class="section"><a href="ElasticSearch-ElasticSearchComponent.html#ElasticSearch-SeeAlso">See Also</a></span></dt></dl></div><p><span class="strong"><strong>Available as of Camel 2.11</strong></span></p><p>The ElasticSearch component allows you to interface with an
<a class="link" href="http://elasticsearch.org" target="_top">ElasticSearch</a> server.</p><p>Maven users will need to add the following dependency to their <code class="literal">pom.xml</code>
for this component:</p><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;dependency&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;groupId&gt;</strong>org.apache.camel<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/groupId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;artifactId&gt;</strong>camel-elasticsearch<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/artifactId&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;version&gt;</strong>x.x.x<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/version&gt;</strong>
    <em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">&lt;!-- use the same version as your Camel core version --&gt;</em>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ElasticSearch-URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">elasticsearch:<em xmlns="http://www.w3.org/1999/xhtml" class="hl-comment" style="color: silver">//clusterName[?options]</em></pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="imagesdb/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you want to run against a local (in JVM/classloader) ElasticSearch
server, just set the clusterName value in the URI to "local". See the
<a class="link" href="http://www.elasticsearch.org/guide/reference/java-api/client.html" target="_top">client
guide</a> for more details.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ElasticSearch-EndpointOptions"></a>Endpoint Options</h2></div></div></div><p>The Elasticsearch component supports 1 options which are listed below.</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="11%" class="col_2"><col width="70%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>client</p></td><td align="left" valign="top"><p><code class="literal">Client</code></p></td><td align="left" valign="top"><p>To use an existing configured Elasticsearch client instead of creating a client per endpoint.</p></td></tr></tbody></table></div><p>{% endraw %}</p><p>The Elasticsearch component supports 12 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>clusterName</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> Name of cluster or use local for local mode</p></td></tr><tr><td align="left" valign="top"><p>clientTransportSniff</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Is the client allowed to sniff the rest of the cluster or not (default true). This setting map to the client.transport.sniff setting.</p></td></tr><tr><td align="left" valign="top"><p>consistencyLevel</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top"><p><code class="literal">DEFAULT</code></p></td><td align="left" valign="top"><p><code class="literal">WriteConsistencyLevel</code></p></td><td align="left" valign="top"><p>The write consistency level to use with INDEX and BULK operations (can be any of ONE QUORUM ALL or DEFAULT)</p></td></tr><tr><td align="left" valign="top"><p>data</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Boolean</code></p></td><td align="left" valign="top"><p>Is the node going to be allowed to allocate data (shards) to it or not. This setting map to the node.data setting.</p></td></tr><tr><td align="left" valign="top"><p>indexName</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The name of the index to act against</p></td></tr><tr><td align="left" valign="top"><p>indexType</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The type of the index to act against</p></td></tr><tr><td align="left" valign="top"><p>ip</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The TransportClient remote host ip to use</p></td></tr><tr><td align="left" valign="top"><p>operation</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>What operation to perform</p></td></tr><tr><td align="left" valign="top"><p>pathHome</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top"><p><code class="literal">${user.home}/.elasticsearch</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The path.home property of ElasticSearch configuration. You need to provide a valid path otherwise the default $user.home/.elasticsearch will be used.</p></td></tr><tr><td align="left" valign="top"><p>port</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top"><p><code class="literal">9300</code></p></td><td align="left" valign="top"><p><code class="literal">int</code></p></td><td align="left" valign="top"><p>The TransportClient remote port to use (defaults to 9300)</p></td></tr><tr><td align="left" valign="top"><p>transportAddresses</p></td><td align="left" valign="top"><p>producer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Comma separated list with ip:port formatted remote transport addresses to use. The ip and port options must be left blank for transportAddresses to be considered instead.</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr></tbody></table></div><p>{% endraw %}</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ElasticSearch-MessageOperations"></a>Message Operations</h2></div></div></div><p>The following ElasticSearch operations are currently supported. Simply
set an endpoint URI option or exchange header with a key of "operation"
and a value set to one of the following. Some operations also require
other parameters or the message body to be set.</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">operation</th><th align="left" valign="top">message body</th><th align="left" valign="top">description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>INDEX</p></td><td align="left" valign="top"><p>Map, String, byte[] or XContentBuilder content to index</p></td><td align="left" valign="top"><p>adds content to an index and returns the content&#8217;s indexId in the body.
<span class="strong"><strong>Camel 2.15,</strong></span> you can set the indexId by setting the message header with
the key "indexId".</p></td></tr><tr><td align="left" valign="top"><p>GET_BY_ID</p></td><td align="left" valign="top"><p>index id of content to retrieve</p></td><td align="left" valign="top"><p>retrieves the specified index and returns a GetResult object in the body</p></td></tr><tr><td align="left" valign="top"><p>DELETE</p></td><td align="left" valign="top"><p>index id of content to delete</p></td><td align="left" valign="top"><p>deletes the specified indexId and returns a DeleteResult object in the
body</p></td></tr><tr><td align="left" valign="top"><p>BULK_INDEX</p></td><td align="left" valign="top"><p>a&nbsp;<span class="strong"><strong>List</strong></span>&nbsp;or <span class="strong"><strong>Collection</strong></span> of any type that is already accepted
(XContentBuilder, Map, byte[], String)</p></td><td align="left" valign="top"><p>*Camel 2.14,*adds content to an index and return a&nbsp;List of the id&nbsp;of the
successfully indexed documents in the body</p></td></tr><tr><td align="left" valign="top"><p>BULK</p></td><td align="left" valign="top"><p>a&nbsp;<span class="strong"><strong>List</strong></span>&nbsp;or <span class="strong"><strong>Collection</strong></span> of any type that is already accepted
(XContentBuilder, Map, byte[], String)</p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.15:</strong></span> Adds content to an index and returns the BulkResponse
object in the body</p></td></tr><tr><td align="left" valign="top"><p>SEARCH</p></td><td align="left" valign="top"><p>Map or SearchRequest Object</p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.15:</strong></span>&nbsp;search the content with the map of query string</p></td></tr><tr><td align="left" valign="top"><p>MULTIGET</p></td><td align="left" valign="top"><p>List of MultigetRequest.Item object</p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.17:</strong></span>&nbsp;retrieves the specified indexes, types etc. in
MultigetRequest and returns a MultigetResponse object in the body</p></td></tr><tr><td align="left" valign="top"><p>MULTISEARCH</p></td><td align="left" valign="top"><p>List of SearchRequest object</p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.17:</strong></span> search for parameters specified in MultiSearchRequest and
returns a MultiSearchResponse object in the body</p></td></tr><tr><td align="left" valign="top"><p>EXISTS</p></td><td align="left" valign="top"><p>Index name as header</p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.17:</strong></span> Returns a Boolean object in the body</p></td></tr><tr><td align="left" valign="top"><p>UPDATE</p></td><td align="left" valign="top"><p>Map, String, byte[] or XContentBuilder content to update</p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.17:</strong></span> Updates content to an index and returns the content&#8217;s
indexId in the body.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ElasticSearch-IndexExample"></a>Index Example</h2></div></div></div><p>Below is a simple INDEX example</p><pre class="programlisting">from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:index"</em></strong>)
.to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"elasticsearch://local?operation=INDEX&amp;indexName=twitter&amp;indexType=tweet"</em></strong>);</pre><pre class="programlisting"><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"direct:index"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096"> /&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"elasticsearch://local?operation=INDEX&amp;indexName=twitter&amp;indexType=tweet"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><p>A client would simply need to pass a body message containing a Map to
the route. The result body contains the indexId created.</p><pre class="programlisting">Map&lt;String, String&gt; map = <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">new</strong> HashMap&lt;String, String&gt;();
map.put(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"content"</em></strong>, <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"test"</em></strong>);
String indexId = template.requestBody(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"direct:index"</em></strong>, map, String.<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-keyword">class</strong>);</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ElasticSearch-Formoreinformation"></a>For more information, see these resources</h2></div></div></div><p><a class="link" href="http://elasticsearch.org" target="_top">ElasticSearch Main Site</a></p><p><a class="link" href="http://www.elasticsearch.org/guide/reference/java-api/" target="_top">ElasticSearch
Java API</a></p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ElasticSearch-SeeAlso"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="configuring-camel.html" target="_top">Configuring Camel</a></li><li class="listitem"><a class="link" href="component.html" target="_top">Component</a></li><li class="listitem"><a class="link" href="endpoint.html" target="_top">Endpoint</a></li><li class="listitem"><a class="link" href="getting-started.html" target="_top">Getting Started</a></li></ul></div></div></div></body></html>