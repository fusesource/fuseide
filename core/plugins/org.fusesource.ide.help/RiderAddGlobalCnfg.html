<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Adding global endpoints, data formats or beans</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="RiderEditRoute.html" title="Editing a routing context in the route editor"><link rel="prev" href="RiderAddBeans.html" title="Manually adding beans and configuration"><link rel="next" href="RiderEditPrefs.html" title="Configuring the route editor"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RiderAddGlobalCnfg"></a>Adding global endpoints, data formats or beans</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2000"></a>Overview</h3></div></div></div><p>Some routes rely on shared configuration provided by global endpoints, global data
            formats or global beans. You can add global elements to the project's routing context
            file by using the route editor's <span class="guilabel">Configurations</span> tab.</p><p>To add global elements to your routing context file:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Open your routing context file in the route editor.</p></li><li class="step"><p>At the bottom of the route editor, click the
                        <span class="guilabel">Configurations</span> tab to display global configurations, if
                    there are any. </p><div class="informalfigure"><div class="mediaobject"><img src="./images/ConfigurationsView.png" width="335.5"></div></div></li><li class="step"><p>Click <span class="guibutton">Add</span> to open the <span class="guilabel">Create a new global element</span>
                    dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVAddButton.png" width="186.45000000000002"></div></div><p>The options are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Endpoint&#8212;see <a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalEndpoint" title="Adding a global endpoint">Adding a global endpoint</a>. </p></li><li class="listitem"><p>Data Format&#8212;see <a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalDF" title="Adding a global data format">Adding a global data format</a>. </p></li><li class="listitem"><p>Bean&#8212;see <a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalBean" title="Adding a global bean">Adding a global bean</a>.</p></li></ul></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="selectGlobalEndpoint"></a>Adding a global endpoint</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Create a new global element</span> dialog, select
                        <span class="guilabel">Endpoint</span> and 
                    click <span class="guibutton">OK</span> to open the <span class="guilabel">Select component</span>
                    dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVSelectCamComponent1.png" width="608.3000000000001"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>By default, the <span class="guilabel">Select component</span> dialog opens with the <span class="guimenuitem">Show
                            only palette components</span> option enabled. To see all
                        available components, disable this option.</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The <span class="guilabel">Grouped by categories</span> option groups components by type.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVSelectCamComponentGrouped.png" width="552"></div></div></td></tr></table></div></li><li class="step"><a name="globalEndptSelect"></a><p>In the <span class="guilabel">Select component</span> dialog, scroll through the list
                    of Camel components to find and select the component you want to add to the
                    context file, and then enter an ID for it in the <span class="guilabel">Id</span>
                    field.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVCamComponentSelected.png" width="608.85"></div></div><p>In this example, the JMS component is selected and
                        <strong class="userinput"><code>myJMS</code></strong> is the <span class="guilabel">Id</span> value.</p></li><li class="step"><p>Click <span class="guibutton">Finish</span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVmyEndptAdded2.png" width="342.55"></div></div><p>You can now set properties in the <span class="guilabel">Properties</span> view as
                    needed.</p><p>The tooling autofills <span class="guilabel">Id</span> with the value you entered in
                    the component's <span class="guilabel">Id</span> field in <a class="xref" href="RiderAddGlobalCnfg.html#globalEndptSelect" title="Step 2">Step 2</a>. In this example, Camel builds the
                        <span class="guilabel">uri</span> (required field) starting with the component's
                    schema (in this case, <code class="literal">jms:</code>), but you must specify the
                        <code class="code">destinationName</code> and the <code class="code">destinationType</code> to
                    complete the component's <span class="guilabel">uri</span>. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>For the JMS component, the destination type defaults to <code class="code">queue</code>. This default value
                        does not appear in the <span class="guilabel">uri</span> field on the
                            <span class="guilabel">Details</span> page until you have entered a value in
                            <span class="guilabel">Destination Name</span> (required field).</p></td></tr></table></div></li><li class="step"><p>To complete the component's uri, click <span class="guimenu">Advanced</span> &gt; <span class="guisubmenu">Path</span>.</p></li><li class="step"><p>In the <span class="guilabel">Destination Name</span> field, enter the name of the
                    destination endpoint (for example, <strong class="userinput"><code>FOO.BAR</code></strong>). In the
                        <span class="guilabel">Destination Type</span> field, enter the endpoint
                    destination's type (for example, <strong class="userinput"><code>queue</code></strong>,
                        <strong class="userinput"><code>topic</code></strong>), <strong class="userinput"><code>temp:queue</code></strong>, or
                        <strong class="userinput"><code>temp:topic</code></strong>). </p><div class="informalfigure"><div class="mediaobject"><img src="./images/JMSCompAdvanPathProp.png" width="310.7"></div></div><p>The <span class="guilabel">Properties</span> view's <span class="guilabel">Details</span> and
                        <span class="guilabel">Advanced</span> pages provide access to all properties
                    available for configuring a particular component. </p></li><li class="step"><p>For example, click the <span class="guilabel">Consumer (advanced)</span> tab.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/JMSCompConsumerAdvanProps2.png" width="550.5500000000001"></div></div><p>Enable the properties <span class="guilabel">Eager Loading Of
                        Properties</span> and <span class="guilabel">Expose Listener
                    Session</span>.</p></li><li class="step"><p>Switch to <span class="guilabel">Source</span> view to see the code that the tooling
                    added to the context file (in this example, a configured JMS endpoint), before
                    the first <code class="sgmltag-element">route</code> element.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsEndptSourceView.png" width="579.15"></div></div></li><li class="step"><p>When done, save your changes by selecting <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> on the menu bar.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="selectGlobalDF"></a>Adding a global data format</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Create a new global element</span> dialog, select
                        <span class="guilabel">Data Format</span> and click <span class="guibutton">OK</span> 
                    to open the <span class="guilabel">Create a global Data
                        Format</span> dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVCreateGlobalDF1.png" width="436.1499999999999"></div></div><p>The data format defaults to <code class="literal">avro</code>, the format at the top of
                    the list of those available.</p></li><li class="step"><p>Open the <span class="guilabel">Data Format</span> drop-down menu, and select the
                    format you want, for example, <code class="literal">xmljson</code>.</p></li><li class="step"><p>In the <span class="guilabel">Id</span> field, enter a name for the format, for example,
                    <em class="replaceable"><code>myDataFormat</code></em>).</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVCreateGlobalDF2.png" width="441.3500000000001"></div></div></li><li class="step"><p>Click <span class="guibutton">Finish</span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEditGlobalDFprops1.png" width="254.65000000000006"></div></div><p>You can now set properties in the <span class="guilabel">Properties</span> view as
                    needed.</p></li><li class="step"><p>In the <span class="guilabel">Properties</span> view, set property values as
                    appropriate for your project, for example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEditGlobalDFprops2.png" width="415.2"></div></div></li><li class="step"><p>Switch to the <span class="guilabel">Source</span> view to see the code that the tooling
                    added to the context file. In this example, a configured xmljson data format is
                    before the first <code class="sgmltag-element">route</code> element.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVGlobalDFSourceV.png" width="492.59999999999997"></div></div></li><li class="step"><p>When done, save your changes by selecting <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> on the menu bar.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="selectGlobalBean"></a>Adding a global bean</h3></div></div></div><p>A global bean enables out-of-route bean definitions that can be referenced from
            anywhere in the route. When you copy a <span class="guilabel">Bean</span> component from the
            palette to the route, you can find defined global beans in the
                <span class="guilabel">Properties</span> view's <span class="guilabel">Ref</span> dropdown. You can
            select the global bean that you want the <span class="guilabel">Bean</span> component to
            reference. </p><p>To add a global bean element:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Create a new global element</span> dialog, select
                    <span class="guilabel">Bean</span> and click <span class="guibutton">OK</span> to open the 
                    <span class="guilabel">Bean Definition</span> dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVCreateGlobalBean1.png" width="341.25"></div></div></li><li class="step"><p>In the <span class="guilabel">Id</span> field, enter an ID for the global bean, for example,
                        <span class="guilabel">TransformBean</span>. The ID must be unique in the
                    configuration. </p></li><li class="step"><p>To fill the <span class="guilabel">Class</span> field, do one of the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Enter the name of a class that is in the project or in a referenced project.</p></li><li class="listitem"><p>Click <span class="bold"><strong> ...</strong></span> (Browse) to navigate to and select a class that is
                            in the project or in a referenced project.</p></li><li class="listitem"><p>Click <span class="bold"><strong>+</strong></span> to define a new bean class
                            and add it as a global bean. </p></li></ul></div></li><li class="step"><p>If the bean you are adding requires one or more arguments, in the <span class="guilabel">Constructor
                        Arguments</span> section, for each argument:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Click <span class="guilabel">Add</span>.</p></li><li class="listitem"><p>Optionally, in the <span class="guilabel">Type</span> field, enter the type
                                of the argument. The default is <code class="code">java.lang.String</code>. </p></li><li class="listitem"><p>In the <span class="guilabel">Value</span> field, enter the value of the
                                argument.</p></li><li class="listitem"><p>Click <span class="guilabel">OK</span>. </p></li></ol></div></li><li class="step"><p>Optionally specify one or more properties that are accessible to the global bean. In the
                        <span class="guilabel">Bean Properties</span> section, do the following for each property:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Click <span class="guilabel">Add</span>.</p></li><li class="listitem"><p>In the <span class="guilabel">Name</span> field, enter the name of the
                                property.</p></li><li class="listitem"><p>In the <span class="guilabel">Value</span> field, enter the value of the
                                property.</p></li><li class="listitem"><p>Click <span class="guilabel">OK</span>. </p></li></ol></div></li><li class="step"><p>Click <span class="guilabel">Finish</span> to add the global bean to the configuration. The global bean
                    ID you specified appears in the <span class="guilabel">Configuration</span> view, for
                    example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsBeanInList.png" width="404.95"></div></div></li><li class="step"><p>Switch to the <span class="guilabel">Source</span> view to see the <code class="code">bean</code> element that the
                    tooling added to the context file. For example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsBeanSourceV.png" width="471.25"></div></div></li><li class="step"><p>Click the <span class="guilabel">Configuration</span> tab to return to the list of global elements and
                    select a global bean to display its standard properties in the
                        <span class="guilabel">Properties</span> view, for example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsBeanProperties.png" width="406.90000000000003"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>To view or edit a property that you specified when you added a global bean, select the bean in
                        the <span class="guilabel">Configuration</span> view and then click
                            <span class="guilabel">Edit</span>. </p></td></tr></table></div></li><li class="step"><p>Set global bean properties as needed: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="guilabel">Depends-on</span> is a string that you can use to identify a bean that must be
                            created before this global bean. Specify the ID (name) of the depended
                            on bean. For example, if you are adding the <code class="code">TransformBean</code>
                            and you set <span class="guilabel">Depends-on</span> to
                                <code class="code">ChangeCaseBean</code> then <code class="code">ChangeCaseBean</code> must be
                            created and then <code class="code">TransformBean</code> can be created. When the
                            beans are being destroyed then <code class="code">TransformBean</code> is destroyed
                            first. </p></li><li class="listitem"><p><span class="guilabel">Destroy-method</span> lets you specify or select which of the bean's destory methods to call
                    when the processing performed by the bean is done.</p></li><li class="listitem"><p><span class="guilabel">Factory-method</span> is useful only when the global bean is a factory class. In
                            this situation, specify or select a static factory method to be called
                            when the bean is referenced. </p></li><li class="listitem"><p><span class="guilabel">Init-method</span> lets you specify or select which of the bean's <code class="code">init()</code> methods to
                            call when the bean is referenced. </p></li><li class="listitem"><p><span class="guilabel">Scope</span> is <span class="guilabel">singleton</span> or
                            <span class="guilabel">prototype</span>. The default,
                                <span class="guilabel">singleton</span>, indicates that Camel uses the same
                            instance of the bean each time the bean is called. Specity
                                <span class="guilabel">prototype</span> when you want Camel to create a new
                            instance of the bean each time the bean is called. </p></li></ul></div></li><li class="step"><p>When done, save your changes by selecting <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> on the menu bar.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="deleteGlobalComponent"></a>Deleting a global element</h3></div></div></div><p>The procedure is the same whether removing an endpoint, data format or bean that was
            previously added to the routing context.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Configurations</span> view, select the global element
                    that you want to delete.</p><p>For example, suppose you want to delete the data format
                        <code class="filename">myDataFormat</code> that was added in <a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalDF" title="Adding a global data format">Adding a global data format</a>:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVDFSelectDelete.png" width="218.9"></div></div></li><li class="step"><p>Click <span class="guibutton">Delete</span>.</p><p>The global element <code class="filename">myDataFormat</code> disappears from the
                        <span class="guilabel">Configurations</span> view.</p></li><li class="step"><p>Switch to the <span class="guilabel">Source</span> view to check that the tooling
                    removed the XML code from the routing context. </p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsDelDFSourceV.png" width="449.90000000000003"></div></div></li><li class="step"><p>When done, save your changes by selecting <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> on the menu bar.</p></li></ol></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="imagesdb/caution.png"></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>You cannot perform an undo operation for deletion of a global element. If you inadvertently
                delete a global element that you want to keep in the configuration you might be able
                to undo the deletion by closing the context file without saving it. If this is not
                feasible then re-add the inadvertently deleted global element. </p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="editGlobalComponent"></a>Editing a global element</h3></div></div></div><p>The procedure is the same whether modifying the properties of an endpoint, data format
            or bean that you added to the routing context.</p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="imagesdb/caution.png"></td><th align="left">Caution</th></tr><tr><td align="left" valign="top"><p>Typically, you do not want to change the ID of a global element. If the
            global element is already in use in a running route, changing the ID can 
        break references the the global element. </p></td></tr></table></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Configurations</span> view, select the global element tha
                    you want to edit.</p><p>For example, to edit the endpoint <code class="filename">myJMS</code> that was added in
                        <a class="xref" href="RiderAddGlobalCnfg.html#selectGlobalEndpoint" title="Adding a global endpoint">Adding a global endpoint</a>:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEndptEditSelect.png" width="206.8"></div></div></li><li class="step"><p>Click <span class="guibutton">Edit</span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEndptClickEdit.png" width="195.8"></div></div><p>In the <span class="guilabel">Properties</span> view, modify the element's properties
                    as needed.</p></li><li class="step"><p>For example, open the <span class="guimenu">Advanced</span> &gt; <span class="guisubmenu">Consumer</span> tab, and change the value of <span class="guilabel">Concurrent
                        Consumers</span> to <strong class="userinput"><code>2</code></strong>:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsEditEndpntConcurConsume2.png" width="476.85"></div></div></li><li class="step"><p>Switch to the <span class="guilabel">Source</span> view and check that the tooling
                    added the property <code class="code">concurrentConsumers=2</code> to the routing
                    context:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/CnfigsVEndptEditSourceV.png" width="485.6500000000001"></div></div></li><li class="step"><p>When done, save your changes by selecting <span class="guimenu">File</span> &gt; <span class="guimenuitem">Save</span> on the menu bar.</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2753"></a>Related topics</h3></div></div></div><table border="0" summary="Simple list" class="simplelist"><tr><td>
                <a href="RiderAddBeans.html" class="olink">Manually adding beans and configuration</a>
            </td></tr></table><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Manually adding a global element is possible but not recommended because doing so is error
                prone. The recommendation is to use the <span class="guilabel">Configurations</span> tab in
                the route editor. </p></td></tr></table></div></div></div></body></html>