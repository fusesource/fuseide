<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Example 2: Writing Data to SAP</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="SAP.html" title="SAP Component"><link rel="prev" href="SAP-Example1.html" title="Example 1: Reading Data from SAP"><link rel="next" href="SAP-Example3.html" title="Example 3: Handling Requests from SAP"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SAP-Example2"></a>Example 2: Writing Data to SAP</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="topic-37556"></a>Overview</h3></div></div></div><p>This example demonstrates a route which creates a <code class="code">FlightTrip</code> business
                object instance in SAP. The route invokes the <code class="code">FlightTrip</code> BAPI method,
                    <code class="code">BAPI_FLTRIP_CREATE</code>, using a destination endpoint to create the
                object.</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="topic-37557"></a>Java DSL for route</h3></div></div></div><p>The Java DSL for the example route is as follows:</p><div class="informalexample"><pre class="programlisting">from("direct:createFlightTrip")
    .to("bean:createFlightTripRequest")
    .to("sap-srfc-destination:nplDest:BAPI_FLTRIP_GETLIST?transacted=true")
    .to("bean:returnFlightTripResponse");</pre></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="topic-37558"></a>XML DSL for route</h3></div></div></div><p>And the Spring DSL for the same route is as follows:</p><div class="informalexample"><pre class="programlisting">&lt;route&gt;
    &lt;from uri="direct:createFlightTrip"/&gt;
    &lt;to uri="bean:createFlightTripRequest"/&gt;
    &lt;to uri="sap-srfc-destination:nplDest:BAPI_FLTRIP_GETLIST?transacted=true"/&gt;
    &lt;to uri="bean:returnFlightTripResponse"/&gt;
&lt;/route&gt;</pre></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="topic-37559"></a>Transaction support</h3></div></div></div><p>Note that the URL for the SAP endpoint has the <code class="code">transacted</code> option set
                to <code class="code">true</code>. As discussed in <a class="xref" href="SAP-Txn.html" title="Transaction Support">Transaction Support</a>, when this option is
                enabled the endpoint ensures that an SAP transaction session has been initiated
                before invoking the RFC call. Because this endpoint&#8217;s RFC creates new data in SAP,
                this options is necessary to make the route's changes permanent in SAP. </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="topic-37560"></a>Populating request parameters</h3></div></div></div><p>The <code class="code">createFlightTripRequest</code> and <code class="code">returnFlightTripResponse</code>
                beans are responsible for populating request parameters into the SAP request and
                extracting response parameters from the SAP response respectively following the same
                sequence of operations as demonstrated in the previous example.</p></div></div></body></html>