<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>VM</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-Vertx.html" title="Vertx"><link rel="next" href="IDU-Weather.html" title="Weather"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-VM"></a>VM</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-VM_HSH_VMComponent"></a>VM Component</h2></div></div></div><p>The <span class="bold"><strong>vm:</strong></span> component provides asynchronous <a class="link" href="http://www.eecs.harvard.edu/~mdw/proj/seda/" target="_top">SEDA</a> behavior, exchanging messages on a <a class="link" href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html" target="_top">BlockingQueue</a> and invoking consumers in a separate thread pool.</p><p>This component differs from the <a href="IDU-SEDA.html" class="olink">SEDA</a> component in
      that VM supports communication across CamelContext instances - so you can use this mechanism
      to communicate across web applications (provided that <code class="literal">camel-core.jar</code> is on
      the <code class="literal">system/boot</code> classpath).</p><p>VM is an extension to the <a href="IDU-SEDA.html" class="olink">SEDA</a> component.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-VM_HSH_URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">
vm:queueName[?options]
</pre><p>Where <span class="bold"><strong><code class="literal">queueName</code></strong></span> can be any string to uniquely identify the endpoint within the JVM (or at least within the classloader that loaded camel-core.jar)</p><p>You can append query options to the URI in the following format: <code class="literal">?option=value&amp;option=value&amp;...</code>
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Before Camel 2.3 - Same URI must be used for both producer and consumer"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Before Camel 2.3 - Same URI must be used for both producer and consumer</th></tr><tr><td align="left" valign="top"><p>An exactly identical <a href="IDU-VM.html" class="olink">VM</a> endpoint URI <span class="bold"><strong>must</strong></span> be used for both the producer and the consumer endpoint. Otherwise, Camel will create a second <a href="IDU-VM.html" class="olink">VM</a> endpoint despite that the <code class="literal">queueName</code> portion of the URI is identical. For example:</p><pre class="programlisting">
from("direct:foo").to("vm:bar?concurrentConsumers=5");

from("vm:bar?concurrentConsumers=5").to("file://output");
</pre><p>Notice that we have to use the full URI, including options in both the producer and consumer.</p><p>In Camel 2.4 this has been fixed so that only the queue name must match.  Using the queue name <code class="literal">bar</code>, we could rewrite the previous exmple as follows: </p><pre class="programlisting">
from("direct:foo").to("vm:bar");

from("vm:bar?concurrentConsumers=5").to("file://output");
</pre></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-VM_HSH_Options"></a>Options</h2></div></div></div><p>See the <a href="IDU-SEDA.html" class="olink">SEDA</a> component for options and other
      important usage details as the same rules apply to the <a href="IDU-VM.html" class="olink">VM</a>
      component.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-VM_HSH_Samples"></a>Samples</h2></div></div></div><p>In the route below we send exchanges across CamelContext instances to a VM queue named <code class="literal">order.email</code>:</p><pre class="programlisting">
from("direct:in").bean(MyOrderBean.class).to("vm:order.email");
</pre><p>And then we receive exchanges in some other Camel context (such as deployed in another <code class="literal">.war</code> application):</p><pre class="programlisting">
from("vm:order.email").bean(MyOrderEmailSender.class);
</pre><p>

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a href="IDU-SEDA.html" class="olink">SEDA</a>
        </p></li></ul></div></div></div></body></html>