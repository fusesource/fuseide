<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Running a SwitchYard Project on a JBoss Fuse Server</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="RiderSwitchyard.html" title="Using the Switchyard Tooling"><link rel="prev" href="chap-JBoss_Integration_and_SOA_Development.html" title="JBoss Integration and SOA Development"><link rel="next" href="SetupEAPServer.html" title="Running a SwitchYard Project on a JBoss Enterprise Application Server"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SetupFuseServer"></a>Running a SwitchYard Project on a JBoss Fuse Server</h2></div></div></div><p>To publish and run Fuse SwitchYard projects on an installed Fuse server, you must first
        add the server and its runtime definition to the tooling's <span class="guilabel">Servers</span>
        list. Once added to the list, the server appears in the <span class="guilabel">Servers</span> view,
        where you can configure it, start and stop it, and publish projects to it.</p><p>You can publish SwitchYard projects to JBoss Fuse 6.3 and newer servers that you have
        defined and added to the Servers list.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you haven't already installed a server, you can do so when you define and add it
        to the Servers list.</p></td></tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7275"></a>Adding a JBoss Fuse server</h3></div></div></div><p>Follow the instructions in <a href="FIDEAddServer.html" class="olink">Adding a Server</a> to define and add an installed
                    JBoss Fuse 6.3 server.</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7283"></a>Installing the SwitchYard features on the server</h3></div></div></div><p>JBoss Fuse is SwitchYard-ready, but you have to install the switchyard
            features.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Servers</span> view, select the JBoss Fuse server you
                    just added, and click <span class="inlinemediaobject"><img src="./images/run_exec.png" width="13.6"></span> on the view's menu bar to start it up.</p><p>
                    <span class="guilabel">Console</span> view opens and displays the server's startup
                    progress:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYFuseStartUpConsole.png" width="301.2"></div></div><p>Wait until <code class="code">[PATCH] Storing user changes</code> appears at the end of the
                    output.</p></li><li class="step"><p>Switch to <span class="guilabel">Shell</span> view, and install the
                        <code class="filename">switchyard-*</code> features, one after another, on the
                    server:</p><pre class="programlisting">JBossFuse:admin@root&gt; features:install switchyard-bean
JBossFuse:admin@root&gt; features:install switchyard-camel
JBossFuse:admin@root&gt; features:install switchyard-soap</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>To see a list of all available SwitchYard-related features, enter <code class="code">features:list | grep
                            switchyard*</code>.</p></td></tr></table></div></li><li class="step"><p>Check that the <code class="filename">switchyard-*</code> features are installed and active:</p><pre class="programlisting">JBossFuse:admin@root&gt; osgi:list</pre><p>The end of the output should show the switchyard components installed and
                    active :</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYFuseSYbeanFeatureInstalled.png" width="479.4"></div></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7345"></a>Importing a SwitchYard quickstart project</h3></div></div></div><p>The SwitchYard quickstarts are installed in
                <em class="replaceable"><code>$FUSE_HOME</code></em><code class="filename">/quickstarts/switchyard/</code>.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Right-click in <span class="guilabel">Project Explorer</span>, and select <span class="guimenu">Import</span> &gt; <span class="guimenuitem">Import...</span> to open the <span class="guilabel">Choose Import source</span>
                    dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYchooseImportSource.png" width="288.75"></div></div></li><li class="step"><p>In the <span class="guilabel">Maven</span> folder, select <span class="guilabel">Existing Maven
                    Projects</span>.</p></li><li class="step"><p>Click <span class="guibutton">Next</span> to open the <span class="guilabel">Select Maven
                        projects</span> dialog.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYFuseMavenProjects1.png" width="296.45000000000005"></div></div></li><li class="step"><p>Click the <span class="guibutton">Browse</span> button next to the <span class="guilabel">Root Directory</span>
                    field to locate and select the
                        <code class="literal"><em class="replaceable"><code>$FUSE_HOME</code></em>/quickstarts/switchyard/bean-service</code>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYFuseMavenProjects2.png" width="326.15000000000003"></div></div></li><li class="step"><p>In the <span class="guilabel">Projects</span> pane, make sure the box next to the
                        <code class="filename">pom.xml</code> file entry for the
                        <code class="filename">switchyard-bean-service</code> is checked to select it.</p></li><li class="step"><p>Click <span class="guibutton">Finish</span> to start the import.</p><p>The <code class="filename">switchyard-bean-service</code> project appears in
                        <span class="guilabel">Project Explorer</span>. </p><p>Wait a moment for the import process to finish.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>See <a href="RiderNewProject.html#riderMavenDependErrors" class="olink">Resolving Maven dependency errors</a> for details on what to do if you encounter
                        Maven dependency errors, caused by failure to download all of the project's
                        dependencies from the Maven repositories.</p></td></tr></table></div></li><li class="step"><p>In <span class="guilabel">Project Explorer</span>, right-click the
                        <code class="filename">switchyard-bean-service</code> project to open the context
                    menu, and select <span class="guimenuitem">Enable Fuse Camel Nature</span>.</p><p>This option enables you to publish a switchyard project to the JBoss Fuse
                    server, which you can do at any time now (for details, see <a class="xref" href="SetupFuseServer.html#publishSYfuseproject" title="Publishing a SwitchYard project to the server">Publishing a SwitchYard project to the server</a>).</p></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7464"></a>Testing the SwitchYard quickstart project locally</h3></div></div></div><p>It's a good idea to run projects as a JUnit test to check that they successfully build
            and run locally. The provided test files included with each SwitchYard quickstart are
            complete and comprehensive and need no modification.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In <span class="guilabel">Project Explorer</span>, expand the
                <code class="filename">switchyard-bean-service</code> project to expose
                        <code class="filename">src/test/java/OrderServiceTest.java</code> file.</p><p>If you want to take a look at the test code, double-click the file to open it
                    in the Java editor.</p></li><li class="step"><p>In <span class="guilabel">Project Explorer</span>, right-click the
                        <code class="filename">OrderServiceTest.java</code> file to open the context menu,
                    and select <span class="guimenu">Run As</span> &gt; <span class="guimenuitem">JUnit Test</span>.</p><p><span class="guilabel">Console</span> view automatically opens and displays the log
                    entries generated by the JUnit test. </p><div class="informalfigure"><div class="mediaobject"><img src="./images/FuseJUnitTstConsoleLogs.png" width="492.59999999999997"></div></div><p>The last two log entries indicate that the test ran successfully against
                    Apache Camel as expected.</p></li><li class="step"><p>Click the <span class="guilabel">JUnit</span> tab to open <span class="guilabel">JUnit</span> view.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/FuseJUnitTstSuccess.png" width="408"></div></div><p>This test proves that the <code class="filename">switchyard-bean-service</code> successfully builds and runs
                    locally.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you failed to set the <span class="guilabel">Execution environment</span> to JavaSE-1.7 or
                        JavaSE-1.8 when you defined the JBoss Fuse server, this test will fail. You
                        can easily reset it by right-clicking the <code class="filename">JRE System
                            Library</code> node in <span class="guilabel">Project Explorer</span>, and
                        selecting <span class="guimenu">Build Path</span> &gt; <span class="guisubmenu">Configure Build Path</span>. In the <span class="guilabel">Java Build Path</span> dialog's
                            <span class="guilabel">Library</span> tab, edit the current library to change the
                            <span class="guilabel">Execution environment</span> setting to JavaSE-1.7 or
                        JavaSE-1.8. (The library you select must be installed on your machine.) Then
                        rerun the test.</p></td></tr></table></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="publishSYfuseproject"></a>Publishing a SwitchYard project to the server</h3></div></div></div><p>You can publish a project to a supported server, defined and listed in the
                <span class="guilabel">Servers</span> view, whether it's running or not. A published project
            will run as scheduled according to the server's settings (for details, see <a href="FIDEDeployingContainer.html" class="olink"><i>Publishing Fuse Integration Projects to a Server</i></a>).</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Servers</span> view, right-click the target server to open the context
                    menu, and then select <span class="guimenuitem">Add and Remove</span>.</p><p>When a project is ready for publishing, it appears in the
                        <span class="guilabel">Available</span> column. For example:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/EAP64AddRemoveProject.png" width="289.3"></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The option <span class="guilabel">If server is started, publish changes immediately</span> is enable by
                        default. See <a href="FIDEDeployingContainer.html#autoPublish" class="olink">Publishing Fuse projects automatically when resources change</a> for information on how this
                        option works and on using other publishing options.</p></td></tr></table></div></li><li class="step"><p>Double-click the project in the <span class="guilabel">Available</span> column to move it to the
                        <span class="guilabel">Configured</span> column.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYFuseProjConfigd.png" width="289.3"></div></div></li><li class="step"><p>Click <span class="guibutton">Finish</span>.</p><p>Once publishing has finished, the project appears as a node under the server
                    runtime node in the <span class="guilabel">Servers</span> view.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYbeanSrvPublishedSrvView.png" width="483"></div></div><p><span class="guilabel">Servers</span> view shows that both the server runtime and the project
                    are started and synchronized.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>For a server runtime, <span class="italic">Synchronized</span> means that all published
                        resources on the server are identical to their local counterparts. For a
                        published resource, <span class="italic">Synchronized</span> means
                        that it is identical to its local counterpart.</p></td></tr></table></div></li><li class="step"><p>In <span class="guilabel">Shell</span> view, enter the command <span class="command"><strong>osgi:list</strong></span> to confirm
                    that the <code class="filename">switchyard-bean-service</code> project is installed and
                    active.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYbeanSrvPublishedShellV.png" width="516.75"></div></div></li></ol></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7648"></a>Testing the published SwitchYard project</h3></div></div></div><p>You can use the  JBoss Web Service Tester tool to test your published web
            service.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Open a web browser, and go to <code class="literal">http://localhost:8181/cxf/</code> to see the
                    available SOAP services with <span class="guilabel">OrderService</span> in the list. </p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYwebBrowseLocalHost.png" width="502.5"></div></div><p>This site provides a link to the <span class="guilabel">OrderService</span>'s
                    WSDL.</p></li><li class="step"><p>Click the link to the <span class="guilabel">OrderService</span>'s  WSDL to open it in the
                    browser.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/FuseWSDLxml.png" width="412.50000000000006"></div></div></li><li class="step"><a name="copyFuseWSDLlink"></a><p>Copy the URL displayed in the browser's address field.</p></li><li class="step"><p>In JBoss Developer Studio, click <span class="guimenu">Window</span> &gt; <span class="guisubmenu">Show View</span> &gt; <span class="guimenuitem">Other</span>, then scroll down to the <span class="guilabel">JBoss Tools Web Services</span> folder, and
                select <span class="guimenuitem">Web Service Tester</span>. </p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapJBWebTester0.png" width="377.85"></div></div></li><li class="step"><p>Click the drop-down menu labeled <span class="guilabel">GET</span>, and select
                        <span class="guimenuitem">JAX-WS</span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYeapJBWebTester2.png" width="378.95000000000005"></div></div><p>The <span class="guilabel">Request Body</span> pane displays an example SOAP request
                    message.</p></li><li class="step"><p>Click <span class="inlinemediaobject"><img src="./images/GetFromWSDLIcon.png" width="16.15"></span> next to <span class="inlinemediaobject"><img src="./images/JAXWSbutton.png" width="88.39999999999999"></span> to open the <span class="guilabel">Specify the Source WSDL for the Web
                        Service</span> dialog, and then paste the URI you copied in <a class="xref" href="SetupFuseServer.html#copyFuseWSDLlink" title="Step 3">Step 3</a> into the <span class="guilabel">WSDL URI</span>
                    field.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/FuseTestrWSDLSelector.png" width="326.70000000000005"></div></div><p>The <span class="guimenuitem">Web Service Tester</span> auto fills the remaining
                    fields with the data retrieved from the WSDL.</p></li><li class="step"><p>Click <span class="guibutton">OK</span>.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/FuseTestrReqMsgXML.png" width="326.70000000000005"></div></div><p>The <span class="guilabel">Web Service Tester</span> displays the XML request message
                    retrieved from the WSDL in the <span class="guilabel">Request Body</span> pane.</p><p>You can enter values for the <code class="literal">&lt;order&gt;</code> items
                        <code class="literal">&lt;orderId&gt;</code>, <code class="literal">&lt;itemId&gt;</code>, and
                        <code class="literal">&lt;quantity&gt;</code> to test the project's request and response
                    services.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can discover what the data types are for each order item. In
                    <span class="guilabel">Project Explorer</span>,
                    double-click <code class="filename">src/test/java/OrderServiceTest.java</code> file to open it in the Java
                    editor:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYOrderSrvTestJava.png" width="275.99999999999994"></div></div></td></tr></table></div></li><li class="step"><p>In the <span class="guilabel">Request Body</span> pane, click the value field of each order item and
                    enter an appropriate value for it. For example:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>For <span class="property">&lt;orderID&gt;</span> replace
                        <code class="literal">?</code> with <em class="replaceable"><code>ORDER10</code></em></p></li><li class="listitem"><p>For <span class="property">&lt;itemId&gt;</span> replace <code class="literal">?</code> with <em class="replaceable"><code>BUTTER</code></em></p></li><li class="listitem"><p>For <span class="property">&lt;quantity&gt;</span> replace <code class="literal">0</code> with <em class="replaceable"><code>1000</code></em></p></li></ul></div></li><li class="step"><p>Click <span class="inlinemediaobject"><img src="./images/run_exec.png" width="12.8"></span> to the right of <span class="inlinemediaobject"><img src="./images/GetFromWSDLIcon.png" width="16.15"></span> to invoke the <span class="command"><strong>submitOrder</strong></span> operation. and
                populate the <span class="guilabel">Response Body</span> pane with an example response
                message.</p><p><span class="guilabel">Console</span> view automatically opens to show the status of
                    the <span class="command"><strong>submitOrder</strong></span> operation:</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYFuseConValidReqMsgEdits1.png" width="333.3"></div></div></li><li class="step"><p>Switch to the <span class="guilabel">Web Service Tester</span> tool and check the response message in
                the <span class="guilabel">Response Body</span> pane.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/SYFWSTValReqMsgEdits1.png" width="357"></div></div></li></ol></div></div></div></body></html>