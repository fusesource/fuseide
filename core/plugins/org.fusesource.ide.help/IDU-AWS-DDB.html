<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>AWS-DDB</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-AWS.html" title="AWS"><link rel="prev" href="IDU-AWS-CW.html" title="AWS-CW"><link rel="next" href="IDU-AWS-DDBSTREAM.html" title="AWS-DDBSTREAM"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-AWS-DDB"></a>AWS-DDB</h2></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_DDBComponent"></a>DDB Component</h3></div></div></div><p></p><p><span class="bold"><strong>Available as of Camel 2.10</strong></span>
    </p><p>The DynamoDB component supports storing and retrieving data from/to <a class="link" href="http://aws.amazon.com/dynamodb" target="_top">Amazon's DynamoDB</a> service.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Prerequisites"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Prerequisites</th></tr><tr><td align="left" valign="top"><p>You must have a valid Amazon Web Services developer account, and be signed up to use Amazon DynamoDB. More information are available at <a class="link" href="http://aws.amazon.com/dynamodb" target="_top">Amazon DynamoDB</a>.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_URIFormat"></a>URI Format</h3></div></div></div><p></p><pre class="programlisting">aws-ddb://domainName[?options]</pre><p>You can append query options to the URI in the following format, ?options=value&amp;option2=value&amp;...</p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_URIOptions"></a>URI Options</h3></div></div></div><p></p><table id="d0e48642"><tr>
        <th> Name </th>
        <th> Default Value </th>
        <th> Context </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="code">amazonDDBClient</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> Reference to a <code class="literal">com.amazonaws.services.dynamodb.AmazonDynamoDB</code> in the Registry. </td>
      </tr><tr>
        <td><code class="code">accessKey</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> Amazon AWS Access Key </td>
      </tr><tr>
        <td><code class="code">secretKey</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> Amazon AWS Secret Key </td>
      </tr><tr>
        <td><code class="code">amazonDdbEndpoint</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> The region with which the AWS-DDB client wants to work with. </td>
      </tr><tr>
        <td><code class="code">tableName</code>
                </td>
        <td><code class="literal">null</code>
        </td>
        <td> Producer </td>
        <td> The name of the table currently worked with. </td>
      </tr><tr>
        <td><code class="code">readCapacity</code>
                </td>
        <td><code class="literal">0</code>
        </td>
        <td> Producer </td>
        <td> The provisioned throughput to reserve for reading resources from your table </td>
      </tr><tr>
        <td><code class="code">writeCapacity</code>
                </td>
        <td><code class="literal">0</code>
        </td>
        <td> Producer </td>
        <td> The provisioned throughput to reserved for writing resources to your table </td>
      </tr><tr>
        <td><code class="code">consistentRead</code>
                </td>
        <td><code class="literal">false</code>
        </td>
        <td> Producer </td>
        <td> Determines whether or not strong consistency should be enforced when data is read.</td>
      </tr><tr>
        <td><code class="code">operation</code></td>
        <td><code class="literal">PutAttributes</code>
        </td>
        <td> Producer </td>
        <td> Valid values are BatchGetItems, DeleteItem, DeleteTable, DescribeTable, GetItem, PutItem, Query, Scan, UpdateItem, UpdateTable.</td>
      </tr><tr>
                <td><code class="code">proxyHost</code>
                </td>
                <td><code class="literal">null</code>
                </td>
                <td> Producer </td>
                <td>Specify a proxy host to be used inside the client definition.</td>
            </tr><tr>
                <td><code class="code">proxyPort</code>
                </td>
                <td><code class="literal">null</code>
                </td>
                <td> Producer </td>
                <td>Specify a proxy port to be used inside the client definition.</td>
            </tr></table><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Required DDB component options"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="imagesdb/important.png"></td><th align="left">Required DDB component options</th></tr><tr><td align="left" valign="top"><p>You have to provide the amazonDDBClient in the Registry or your accessKey and secretKey to access the <a class="link" href="http://aws.amazon.com/dynamodb" target="_top">Amazon's DynamoDB</a>.</p></td></tr></table></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_Usage"></a>Usage</h3></div></div></div><p></p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheadersevaluatedbytheDDBproducer"></a>Message headers evaluated by the DDB producer</h3></div></div></div><p></p><p>

    </p><table id="d0e48879"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbBatchItems</code>
        </td>
        <td><code class="literal">Map&lt;String, KeysAndAttributes&gt;</code>
        </td>
        <td> A map of the table name and corresponding items to get by primary key. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbTableName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> Table Name for this operation. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbKey</code>
        </td>
        <td><code class="literal">Map&lt;String, AttributeValue&gt;</code>
                </td>
        <td> The primary key that uniquely identifies each item in a table. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbReturnValues</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> Use this parameter if you want to get the attribute name-value pairs before or after they are modified(NONE, ALL_OLD, UPDATED_OLD, ALL_NEW, UPDATED_NEW). </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbUpdateCondition</code>
        </td>
        <td><code class="literal">Map&lt;String, ExpectedAttributeValue&gt;</code>
        </td>
        <td> Designates an attribute for a conditional modification. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbAttributeNames</code>
        </td>
        <td><code class="literal">Collection&lt;String&gt;</code>
        </td>
        <td> If attribute names are not specified then all attributes will be returned. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbConsistentRead</code>
        </td>
        <td><code class="literal">Boolean</code>
        </td>
        <td> If set to true, then a consistent read is issued, otherwise eventually consistent is used. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbItem</code>
        </td>
        <td><code class="literal">Map&lt;String, AttributeValue&gt;</code>
        </td>
        <td> A map of the attributes for the item, and must include the primary key values that define the item. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbKeyConditions</code></td>
        <td><code class="literal">Map&lt;String, Condition&gt;</code>
                </td>
        <td> This header specifies the selection criteria for the query, and merges together the two
                    old headers <span class="bold"><strong>CamelAwsDdbHashKeyValue</strong></span> and
                        <span class="bold"><strong>CamelAwsDdbScanRangeKeyCondition</strong></span></td>
      </tr><tr>
                <td><code class="literal">CamelAwsDdbStartKey</code></td>
                <td><code class="literal">Key</code>
                </td>
                <td> Primary key of the item from which to continue an earlier query. </td>
            </tr><tr>
        <td><code class="literal">CamelAwsDdbLimit</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> The maximum number of items to return. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbScanIndexForward</code>
        </td>
        <td><code class="literal">Boolean</code>
        </td>
        <td> Specifies forward or backward traversal of the index. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbScanFilter</code>
        </td>
        <td><code class="literal">Map&lt;String, Condition&gt;</code>
        </td>
        <td> Evaluates the scan results and returns only the desired values. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbUpdateValues</code>
        </td>
        <td><code class="literal">Map&lt;String, AttributeValueUpdate&gt;</code>
        </td>
        <td> Map of attribute name to the new value and action for the update. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheaderssetduringBatchGetItemsoperation"></a>Message headers set during BatchGetItems operation</h3></div></div></div><p></p><p>

    </p><table id="d0e49113"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbBatchResponse</code>
        </td>
        <td><code class="literal">Map&lt;String,BatchResponse&gt;</code>
                </td>
        <td> Table names and the respective item attributes from the tables. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbUnprocessedKeys</code>
        </td>
        <td><code class="literal">Map&lt;String,KeysAndAttributes&gt;</code>
        </td>
        <td> Contains a map of tables and their respective keys that were not processed with the current response. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheaderssetduringDeleteItemoperation"></a>Message headers set during DeleteItem operation</h3></div></div></div><p></p><p>

    </p><table id="d0e49164"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbAttributes</code>
        </td>
        <td><code class="literal">Map&lt;String, AttributeValue&gt;</code>
        </td>
        <td> The list of attributes returned by the operation. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheaderssetduringDeleteTableoperation"></a>Message headers set during DeleteTable operation</h3></div></div></div><p></p><p>

    </p><table id="d0e49200"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbProvisionedThroughput</code>
        </td>
        <td><code class="literal">ProvisionedThroughputDescription</code>
        </td>
        <td> The value of the ProvisionedThroughput property for this table </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbCreationDate</code>
        </td>
        <td><code class="literal">Date</code>
        </td>
        <td> Creation DateTime of this table. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbTableItemCount</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> Item count for this table. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbKeySchema</code>
        </td>
        <td><code class="literal">List&lt;KeySchemaElement&gt;</code>
                </td>
        <td> The KeySchema that identifies the primary key for this table. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbTableName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The table name. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbTableSize</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> The table size in bytes. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbTableStatus</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The status of the table: CREATING, UPDATING, DELETING, ACTIVE </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheaderssetduringDescribeTableoperation"></a>Message headers set during DescribeTable operation</h3></div></div></div><p></p><p>

    </p><table id="d0e49326"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbProvisionedThroughput</code>
        </td>
        <td><code class="code">ProvisionedThroughputDescription</code></td>
        <td> The value of the ProvisionedThroughput property for this table </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbCreationDate</code>
        </td>
        <td><code class="literal">Date</code>
        </td>
        <td> Creation DateTime of this table. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbTableItemCount</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> Item count for this table. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbKeySchema</code>
        </td>
        <td>
                    <p><code class="code">List&lt;KeySchemaElement&gt;</code></p>
                </td>
        <td> The KeySchema that identifies the primary key for this table. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbTableName</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The table name. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbTableSize</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> The table size in bytes. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbTableStatus</code>
        </td>
        <td><code class="literal">String</code>
        </td>
        <td> The status of the table: CREATING, UPDATING, DELETING, ACTIVE </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbReadCapacity</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> ReadCapacityUnits property of this table. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbWriteCapacity</code>
        </td>
        <td><code class="literal">Long</code>
        </td>
        <td> WriteCapacityUnits property of this table. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheaderssetduringGetItemoperation"></a>Message headers set during GetItem operation</h3></div></div></div><p></p><p>

    </p><table id="d0e49483"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbAttributes</code>
        </td>
        <td><code class="literal">Map&lt;String, AttributeValue&gt;</code>
        </td>
        <td> The list of attributes returned by the operation. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheaderssetduringPutItemoperation"></a>Message headers set during PutItem operation</h3></div></div></div><p></p><p>

    </p><table id="d0e49519"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbAttributes</code>
        </td>
        <td><code class="literal">Map&lt;String, AttributeValue&gt;</code>
        </td>
        <td> The list of attributes returned by the operation. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheaderssetduringQueryoperation"></a>Message headers set during Query operation</h3></div></div></div><p></p><p>

    </p><table id="d0e49555"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbItems</code>
        </td>
        <td><code class="literal">List&lt;java.util.Map&lt;String,AttributeValue&gt;&gt;</code>
        </td>
        <td> The list of attributes returned by the operation. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbLastEvaluatedKey</code>
        </td>
        <td><code class="literal">Key</code>
        </td>
        <td> Primary key of the item where the query operation stopped, inclusive of the previous result set. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbConsumedCapacity</code>
        </td>
        <td><code class="literal">Double</code>
        </td>
        <td> The number of Capacity Units of the provisioned throughput of the table consumed during the operation. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbCount</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> Number of items in the response. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheaderssetduringScanoperation"></a>Message headers set during Scan operation</h3></div></div></div><p></p><p>

    </p><table id="d0e49636"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbItems</code>
        </td>
        <td><code class="literal">List&lt;java.util.Map&lt;String,AttributeValue&gt;&gt;</code>
        </td>
        <td> The list of attributes returned by the operation. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbLastEvaluatedKey</code>
        </td>
        <td><code class="literal">Key</code>
        </td>
        <td> Primary key of the item where the query operation stopped, inclusive of the previous result set. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbConsumedCapacity</code>
        </td>
        <td><code class="literal">Double</code>
        </td>
        <td> The number of Capacity Units of the provisioned throughput of the table consumed during the operation. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbCount</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> Number of items in the response. </td>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbScannedCount</code>
        </td>
        <td><code class="literal">Integer</code>
        </td>
        <td> Number of items in the complete scan before any filters are applied. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_MessageheaderssetduringUpdateItemoperation"></a>Message headers set during UpdateItem operation</h3></div></div></div><p></p><p>

    </p><table id="d0e49732"><tr>
        <th> Header </th>
        <th> Type </th>
        <th> Description </th>
      </tr><tr>
        <td><code class="literal">CamelAwsDdbAttributes</code>
        </td>
        <td><code class="literal">Map&lt;String, AttributeValue&gt;</code>
        </td>
        <td> The list of attributes returned by the operation. </td>
      </tr></table></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_AdvancedAmazonDynamoDBconfiguration"></a>Advanced AmazonDynamoDB configuration</h3></div></div></div><p></p><p>If you need more control over the <code class="literal">AmazonDynamoDB</code> instance configuration you can create your own instance and refer to it from the URI:</p><pre class="programlisting">
from("direct:start")
.to("aws-ddb://domainName?amazonDDBClient=#client");
</pre><p>The <code class="literal">#client</code> refers to a <code class="literal">AmazonDynamoDB</code> in the Registry.</p><p>For example if your Camel Application is running behind a firewall:</p><pre class="programlisting">
AWSCredentials awsCredentials = new BasicAWSCredentials("myAccessKey", "mySecretKey");
ClientConfiguration clientConfiguration = new ClientConfiguration();
clientConfiguration.setProxyHost("http://myProxyHost");
clientConfiguration.setProxyPort(8080);

AmazonDynamoDB client = new AmazonDynamoDBClient(awsCredentials, clientConfiguration);

registry.bind("client", client);
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="IDU-AWS-DDB_HSH_Dependencies"></a>Dependencies</h3></div></div></div><p></p><p>Maven users will need to add the following dependency to their pom.xml.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: pom.xml"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="imagesdb/note.png"></td><th align="left">pom.xml</th></tr><tr><td align="left" valign="top"><pre class="programlisting">
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-aws&lt;/artifactId&gt;
    &lt;version&gt;${camel-version}&lt;/version&gt;
&lt;/dependency&gt;
</pre></td></tr></table></div><p>where <code class="literal">${camel-version}</code> must be replaced by the actual version of Camel (2.10 or higher).</p><p>

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p></p><p>
          <a href="IDU-AWS.html" class="olink">AWS Component</a>
        </p></li></ul></div></div></div></body></html>