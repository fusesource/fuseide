<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Timer Component</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Part&nbsp;V.&nbsp;Apache Camel Component Reference"><link rel="prev" href="Telegram-TelegramComponent.html" title="Telegram Component"><link rel="next" href="Twitter-Twitter.html" title="Twitter Component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="Timer-TimerComponent"></a>Timer Component</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="Timer-TimerComponent.html#Timer-URIformat">URI format</a></span></dt><dt><span class="section"><a href="Timer-TimerComponent.html#Timer-Options">Options</a></span></dt><dt><span class="section"><a href="Timer-TimerComponent.html#Timer-ExchangeProperties">Exchange Properties</a></span></dt><dt><span class="section"><a href="Timer-TimerComponent.html#Timer-Sample">Sample</a></span></dt><dt><span class="section"><a href="Timer-TimerComponent.html#Timer-SeeAlso">See Also</a></span></dt></dl></div><p>The <span class="strong"><strong>timer:</strong></span> component is used to generate message exchanges when a
timer fires You can only consume events from this endpoint.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Timer-URIformat"></a>URI format</h2></div></div></div><pre class="programlisting">timer:name[?options]</pre><p>Where <code class="literal">name</code> is the name of the <code class="literal">Timer</code> object, which is created and
shared across endpoints. So if you use the same name for all your timer
endpoints, only one <code class="literal">Timer</code> object and thread will be used.</p><p>You can append query options to the URI in the following format,
<code class="literal">?option=value&amp;option=value&amp;&#8230;&#8203;</code></p><p><span class="strong"><strong>Note:</strong></span> The IN body of the generated exchange is <code class="literal">null</code>. So
<code class="literal">exchange.getIn().getBody()</code> returns <code class="literal">null</code>.</p><p>TIP:*Advanced Scheduler*
See also the <a class="link" href="quartz.html" target="_top">Quartz</a> component that supports much more
advanced scheduling.</p><p>TIP:*Specify time in human friendly format*
In <span class="strong"><strong>Camel 2.3</strong></span> onwards you can specify the time in
<a class="link" href="how-do-i-specify-time-period-in-a-human-friendly-syntax.html" target="_top">human
friendly syntax</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Timer-Options"></a>Options</h2></div></div></div><p>The Timer component has no options.</p><p>The Timer component supports 13 endpoint options which are listed below:</p><p>{% raw %}</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="19%" class="col_1"><col width="10%" class="col_2"><col width="11%" class="col_3"><col width="10%" class="col_4"><col width="50%" class="col_5"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Group</th><th align="left" valign="top">Default</th><th align="left" valign="top">Java Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p>timerName</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Required</strong></span> The name of the timer</p></td></tr><tr><td align="left" valign="top"><p>bridgeErrorHandler</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Allows for bridging the consumer to the Camel routing Error Handler which mean any exceptions occurred while the consumer is trying to pickup incoming messages or the likes will now be processed as a message and handled by the routing Error Handler. By default the consumer will use the org.apache.camel.spi.ExceptionHandler to deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>delay</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">1000</code></p></td><td align="left" valign="top"><p><code class="literal">long</code></p></td><td align="left" valign="top"><p>The number of milliseconds to wait before the first event is generated. Should not be used in conjunction with the time option. The default value is 1000. You can also specify time values using units such as 60s (60 seconds) 5m30s (5 minutes and 30 seconds) and 1h (1 hour).</p></td></tr><tr><td align="left" valign="top"><p>fixedRate</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Events take place at approximately regular intervals separated by the specified period.</p></td></tr><tr><td align="left" valign="top"><p>period</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">1000</code></p></td><td align="left" valign="top"><p><code class="literal">long</code></p></td><td align="left" valign="top"><p>If greater than 0 generate periodic events every period milliseconds. The default value is 1000. You can also specify time values using units such as 60s (60 seconds) 5m30s (5 minutes and 30 seconds) and 1h (1 hour).</p></td></tr><tr><td align="left" valign="top"><p>repeatCount</p></td><td align="left" valign="top"><p>consumer</p></td><td align="left" valign="top"><p><code class="literal">0</code></p></td><td align="left" valign="top"><p><code class="literal">long</code></p></td><td align="left" valign="top"><p>Specifies a maximum limit of number of fires. So if you set it to 1 the timer will only fire once. If you set it to 5 it will only fire five times. A value of zero or negative means fire forever.</p></td></tr><tr><td align="left" valign="top"><p>exceptionHandler</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExceptionHandler</code></p></td><td align="left" valign="top"><p>To let the consumer use a custom ExceptionHandler. Notice if the option bridgeErrorHandler is enabled then this options is not in use. By default the consumer will deal with exceptions that will be logged at WARN/ERROR level and ignored.</p></td></tr><tr><td align="left" valign="top"><p>exchangePattern</p></td><td align="left" valign="top"><p>consumer (advanced)</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">ExchangePattern</code></p></td><td align="left" valign="top"><p>Sets the default exchange pattern when creating an exchange.</p></td></tr><tr><td align="left" valign="top"><p>daemon</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Specifies whether or not the thread associated with the timer endpoint runs as a daemon. The default value is true.</p></td></tr><tr><td align="left" valign="top"><p>pattern</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>Allows you to specify a custom Date pattern to use for setting the time option using URI syntax.</p></td></tr><tr><td align="left" valign="top"><p>synchronous</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>Sets whether synchronous processing should be strictly used or Camel is allowed to use asynchronous processing (if supported).</p></td></tr><tr><td align="left" valign="top"><p>time</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Date</code></p></td><td align="left" valign="top"><p>A java.util.Date the first event should be generated. If using the URI the pattern expected is: yyyy-MM-dd HH:mm:ss or yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.</p></td></tr><tr><td align="left" valign="top"><p>timer</p></td><td align="left" valign="top"><p>advanced</p></td><td align="left" valign="top">&nbsp;</td><td align="left" valign="top"><p><code class="literal">Timer</code></p></td><td align="left" valign="top"><p>To use a custom Timer</p></td></tr></tbody></table></div><p>{% endraw %}</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Timer-ExchangeProperties"></a>Exchange Properties</h2></div></div></div><p>When the timer is fired, it adds the following information as properties
to the <code class="literal">Exchange</code>:</p><div class="informaltable"><table border="1" width="100%"><colgroup><col width="10%" class="col_1"><col width="10%" class="col_2"><col width="80%" class="col_3"></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">Exchange.TIMER_NAME</code></p></td><td align="left" valign="top"><p><code class="literal">String</code></p></td><td align="left" valign="top"><p>The value of the <code class="literal">name</code> option.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Exchange.TIMER_TIME</code></p></td><td align="left" valign="top"><p><code class="literal">Date</code></p></td><td align="left" valign="top"><p>The value of the <code class="literal">time</code> option.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Exchange.TIMER_PERIOD</code></p></td><td align="left" valign="top"><p><code class="literal">long</code></p></td><td align="left" valign="top"><p>The value of the <code class="literal">period</code> option.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Exchange.TIMER_FIRED_TIME</code></p></td><td align="left" valign="top"><p><code class="literal">Date</code></p></td><td align="left" valign="top"><p>The time when the consumer fired.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">Exchange.TIMER_COUNTER</code></p></td><td align="left" valign="top"><p><code class="literal">Long</code></p></td><td align="left" valign="top"><p><span class="strong"><strong>Camel 2.8:</strong></span> The current fire counter. Starts from 1.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Timer-Sample"></a>Sample</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="Timer-TimerComponent.html#Timer-AvailableasofCamel2.17">Available as of Camel 2.17</a></span></dt><dt><span class="section"><a href="Timer-TimerComponent.html#Timer-Firingonlyonce">Firing only once</a></span></dt></dl></div><p>To set up a route that generates an event every 60 seconds:</p><pre class="programlisting">   from(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"timer://foo?fixedRate=true&amp;period=60000"</em></strong>).to(<strong xmlns="http://www.w3.org/1999/xhtml" class="hl-string"><em style="color:red">"bean:myBean?method=someMethodName"</em></strong>);</pre><p>TIP:Instead of 60000 you can use period=60s which is more friendly to read.</p><p>The above route will generate an event and then invoke the
<code class="literal">someMethodName</code> method on the bean called <code class="literal">myBean</code> in the
<a class="link" href="registry.html" target="_top">Registry</a> such as JNDI or <a class="link" href="spring.html" target="_top">Spring</a>.</p><p>And the route in Spring DSL:</p><pre class="programlisting">  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"timer://foo?fixedRate=true&amp;amp;period=60000"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"bean:myBean?method=someMethodName"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="Timer-AvailableasofCamel2.17"></a>Available as of Camel 2.17</h3></div></div></div><p>You may want to fire messages in a Camel route as soon as possible you
can use a negative delay:</p><pre class="programlisting">  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"timer://foo?delay=-1"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"bean:myBean?method=someMethodName"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre><p>In this way the timer will fire messages immediately.</p><p>You can also specify a repeatCount parameter in conjunction with a
negative delay to stop firing messages after a fixed number has been
reached.</p><p>If you don&#8217;t specify a repeatCount then the timer will continue firing
messages until the route will be stopped.&nbsp;</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="Timer-Firingonlyonce"></a>Firing only once</h3></div></div></div><p><span class="strong"><strong>Available as of Camel 2.8</strong></span></p><p>You may want to fire a message in a Camel route only once, such as when
starting the route. To do that you use the repeatCount option as shown:</p><pre class="programlisting">  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;route&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;from</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"timer://foo?repeatCount=1"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;to</strong> <span xmlns="http://www.w3.org/1999/xhtml" class="hl-attribute" style="color: #F5844C">uri</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="hl-value" style="color: #993300">"bean:myBean?method=someMethodName"</span><strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong xmlns="http://www.w3.org/1999/xhtml" class="hl-tag" style="color: #000096">&lt;/route&gt;</strong></pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Timer-SeeAlso"></a>See Also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="configuring-camel.html" target="_top">Configuring Camel</a></li><li class="listitem"><a class="link" href="component.html" target="_top">Component</a></li><li class="listitem"><a class="link" href="endpoint.html" target="_top">Endpoint</a></li><li class="listitem"><a class="link" href="getting-started.html" target="_top">Getting Started</a></li><li class="listitem"><a class="link" href="quartz.html" target="_top">Quartz</a></li></ul></div></div></div></body></html>