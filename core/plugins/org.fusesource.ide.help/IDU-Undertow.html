<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Undertow</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-Twitter.html" title="Twitter"><link rel="next" href="IDU-Validation.html" title="Validation"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-Undertow"></a>Undertow</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e174264"></a>Undertow Component</h2></div></div></div><p>Available as of Camel 2.16</p><p>The undertow component provides HTTP-based endpoints for consuming and producing HTTP requests. That is, the Undertow component behaves as a simple Web server. Undertow can also be used as a http client which mean you can also use it with Camel as a producer.</p><p>Maven users will need to add the following dependency to their <code class="code">pom.xml</code> for this component:</p><pre class="programlisting">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-undertow&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e174278"></a>URI format</h2></div></div></div><pre class="programlisting">undertow:http://hostname[:port][/resourceUri][?options]
</pre><p>You can append query options to the URI in the following format, <code class="code">?option=value&amp;option=value&amp;...</code></p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e174287"></a>Options</h2></div></div></div><table id="d0e174290"><tbody><tr><th><p>Name</p></th><th><p>Default Value</p></th><th><p>Description</p></th></tr><tr><td><p>httpMethodRestrict</p></td><td> </td><td>Used to only allow consuming if the HttpMethod matches, such as GET/POST/PUT etc. Multiple methods can be specified separated by comma.</td></tr><tr><td><p>matchOnUriPrefix</p></td><td> </td><td>Whether or not the consumer should try to find a target consumer by matching the URI prefix if no exact match is found.</td></tr><tr><td><p>headerFilterStrategy</p></td><td> </td><td>To use a custom HeaderFilterStrategy to filter header to and from Camel message.</td></tr><tr><td><p>sslContextParameters</p></td><td> </td><td>To configure security using SSLContextParameters</td></tr><tr><td>throwExceptionOnFailure</td><td> </td><td>If the option is true, HttpProducer will ignore the Exchange.HTTP_URI header, and use the endpoint's URI for request. You may also set the option throwExceptionOnFailure to be false to let the producer send all the fault response back.</td></tr><tr><td>transferException</td><td> </td><td>Option to disable throwing the HttpOperationFailedException in case of failed responses from the remote server. This allows you to get all responses regardless of the HTTP status code.</td></tr><tr><td>undertowHttpBinding</td><td> </td><td>To use a custom UndertowHttpBinding to control the mapping between Camel message and undertow.</td></tr><tr><td><code class="code">keepAlive</code></td><td>true</td><td><span class="bold"><strong>Camel 2.16.1:</strong></span> <span class="bold"><strong>Producer only:</strong></span> Setting to ensure socket is not closed due to inactivity</td></tr><tr><td>tcpNoDelay</td><td>true</td><td><span class="bold"><strong>Camel 2.16.1:</strong></span> <span class="bold"><strong>Producer only:</strong></span>Setting to improve TCP protocol performance</td></tr><tr><td>reuseAddresses</td><td>true</td><td><span class="bold"><strong>Camel 2.16.1:</strong></span> <span class="bold"><strong>Producer only:</strong></span>Setting to facilitate socket multiplexing</td></tr><tr><td>options.XXX</td><td> </td><td><span class="bold"><strong>Camel 2.16.1:</strong></span> <span class="bold"><strong>Producer only:</strong></span>Sets additional channel options. The options that can be used are defined in <code class="code">org.xnio.Options</code>. To configure from endpoint uri, then prefix each option with "option.", such as "option.close-abort=true&amp;option.send-buffer=8192"</td></tr><tr><td>enableOptions</td><td>false</td><td><span class="bold"><strong>Camel 2.17:</strong></span> Specifies whether to enable HTTP OPTIONS for this Undertow consumer. By default OPTIONS is turned off.</td></tr></tbody></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e174416"></a>Message Headers</h2></div></div></div><p>Camel uses the same message headers as the HTTP component. From Camel 2.2, it also uses <code class="code">Exchange.HTTP_CHUNKED,CamelHttpChunked</code> header to turn on or turn off the chuched encoding on the camel-undertow consumer.</p><p>Camel also populates <span class="bold"><strong>all</strong></span> request.parameter and request.headers. For example, given a client request with the URL, <code class="code"><a class="link" href="http://myserver/myserver?orderid=123" target="_top">http://myserver/myserver?orderid=123</a></code>, the exchange will contain a header named <code class="code">orderid</code> with the value 123.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e174436"></a>Component Options</h2></div></div></div><p>The <code class="code">UndertowComponent</code> provides the following options:</p><table class="confluenceTable" id="d0e174444"><tbody><tr><th><p>Name</p></th><th><p>Default Value</p></th><th><p>Description</p></th></tr><tr><td><p>undertowHttpBinding</p></td><td><p> </p></td><td><p>To use a custom UndertowHttpBinding to control the mapping between Camel message and undertow.</p></td></tr><tr><td><p>httpConfiguration</p></td><td> </td><td>To use the shared HttpConfiguration as base configuration.</td></tr></tbody></table></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e174474"></a>Producer Example</h2></div></div></div><p>The following is a basic example of how to send an HTTP request to an existing HTTP endpoint.</p><p>in Java DSL</p><pre class="programlisting">from("direct:start").to("undertow:http://www.google.com");
</pre><p>or in Spring XML</p><pre class="programlisting">&lt;route&gt;
    &lt;from uri="direct:start"/&gt;
    &lt;to uri="undertow:http://www.google.com"/&gt;
&lt;route&gt;
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e174487"></a>Consumer Example</h2></div></div></div><p>In this sample we define a route that exposes a HTTP service at <code class="code"><a class="link" href="http://localhost:8080/myapp/myservice" target="_top">http://localhost:8080/myapp/myservice</a></code>:</p><pre class="programlisting">&lt;route&gt;
  &lt;from uri="undertow:http://localhost:8080/myapp/myservice"/&gt;
  &lt;to uri="bean:myBean"/&gt;
&lt;/route&gt;</pre><p>When you specify <code class="code">localhost</code> in a URL, Camel exposes the endpoint only on the local TCP/IP network interface, so it cannot be accessed from outside the machine it operates on.</p><p>If you need to expose a Jetty endpoint on a specific network interface, the numerical IP address of this interface should be used as the host. If you need to expose a Jetty endpoint on all network interfaces, the <code class="code">0.0.0.0</code> address should be used.</p></div></div></body></html>