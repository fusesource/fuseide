<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Atmosphere-Websocket</title><link rel="stylesheet" type="text/css" href="eclipse_book.css"><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><meta name="keywords" content="ESB, Apache ServiceMix, Open Source, open source, integration, OSGi, enterprise service bus, Apache ServiceMix documentation, Apache Karaf, Red Hat JBoss Fuse, Red Hat JBoss Fuse documentation"><link rel="home" href="index.html" title="Red Hat JBoss Fuse Tooling for Eclipse"><link rel="up" href="IDU-Components.html" title="Apache Camel Component Reference"><link rel="prev" href="IDU-APNS.html" title="APNS"><link rel="next" href="IDU-Atom.html" title="Atom"><link rel="copyright" href="tmdisclaim.html" title="Trademark Disclaimer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="IDU-Atmosphere-Websocket"></a>Atmosphere-Websocket</h1></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="IDU-Atmosphere-Websocket_HSH_AtmosphereWebsocketServletComponent"></a>Atmosphere Websocket Servlet Component</h2></div></div></div><p><span class="strong"><strong>Available as of Camel 2.14</strong></span></p><p>The <span class="strong"><strong>atmosphere-websocket:</strong></span> component provides
            Websocket based <a class="link" href="http://localhost:8090/display/CAMEL/Endpoint" target="_top">endpoints</a> for a servlet communicating with external clients over Websocket
            (as a servlet accepting websocket connections from external clients). The component uses
            the <a href="IDU-SERVLET.html" class="olink"><i>SERVLET</i></a> component and uses the <a class="link" href="https://github.com/Atmosphere/atmosphere" target="_top">Atmosphere</a> library to
            support the Websocket transport in various Servlet containers (e..g., Jetty, Tomcat,
            ...).</p><p>Unlike the <a href="IDU-Websocket.html" class="olink"><i>Websocket</i></a> component that starts the embedded Jetty
            server, this component uses the servlet provider of the container.</p><p>Maven users will need to add the following dependency to their <code class="code">pom.xml</code>
            for this component:</p><div class="informalexample"><pre class="programlisting">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-atmosphere-websocket&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;</pre></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-379"></a>URI Format</h2></div></div></div><div class="informalexample"><pre class="programlisting">atmosphere-websocket:///relative path[?options]</pre></div></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-380"></a>Reading and Writing Data over Websocket</h2></div></div></div><p>An atmopshere-websocket endpoint can either write data to the socket or read from
                the socket, depending on whether the endpoint is configured as the producer or the
                consumer, respectively.</p></div><div class="simplesect"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="scroll-bookmark-381"></a>Configuring URI to Read or Write Data</h2></div></div></div><p>In the route below, Camel will read from the specified websocket
                connection.</p><div class="informalexample"><pre class="programlisting">from("atmosphere-websocket:///servicepath")
	    .to("direct:next");</pre></div><p>And the equivalent Spring sample:</p><div class="informalexample"><pre class="programlisting">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="atmosphere-websocket:///servicepath"/&gt;
    &lt;to uri="direct:next"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</pre></div><p>In the route below, Camel will read from the specified websocket
                connection.</p><div class="informalexample"><pre class="programlisting">from("direct:next")
	    .to("atmosphere-websocket:///servicepath");</pre></div><p>And the equivalent Spring sample:</p><div class="informalexample"><pre class="programlisting">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;route&gt;
    &lt;from uri="direct:next"/&gt;
    &lt;to uri="atmosphere-websocket:///servicepath"/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;</pre></div></div></div></body></html>